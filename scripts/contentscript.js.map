{"version":3,"sources":["scripts/contentscript.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_htmlToJson","_htmlToJson2","_xhr","_xhr2","chrome","runtime","onMessage","addListener","request","sender","sendResponse","message","htmlToJson","_profile","parse","console","log","send","done","data","status","xhr","sendMessage","fail","errorType","error","extension","onRequest","profile","counter","insertedNodes","observer","MutationObserver","mutations","forEach","mutation","target","className","backgroundExperience","disconnect","observe","document","attributes","attributeFilter","childList","characterData","subtree","./htmlToJson","./xhr","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_zepto","_zepto2","HtmlToJson","this","$vcard","$profileBackground","text","find","attr","$document","children","returnValue","items","$bckexp","role","querySelectorAll","innerText","duration","getElementsByClassName","companyName","item","name","push","undefined","courseName","course","coursename","languageName","language","$skills","map","toArray","$backgroundEducation","$educations","org","degree","major","date","notes","fullname","title","locality","industry","picture","description","skills","backgroundEducation","location","courses","languages","./zepto","3","Xhr","_this","storage","sync","get","url","protocol","onChanged","changes","namespace","storageChange","newValue","ajax","type","contentType","JSON","stringify","4","_event","_ajax","_deferred","_callbacks","zepto-modules/ajax","zepto-modules/callbacks","zepto-modules/deferred","zepto-modules/event","zepto-modules/zepto","5","Zepto","$","triggerAndReturn","context","eventName","event","Event","trigger","isDefaultPrevented","triggerGlobal","settings","global","ajaxStart","active","ajaxStop","ajaxBeforeSend","beforeSend","ajaxSuccess","deferred","success","resolveWith","ajaxComplete","ajaxError","rejectWith","complete","ajaxDataFilter","dataFilter","empty","mimeToDataType","mime","split","htmlType","jsonType","scriptTypeRE","test","xmlTypeRE","appendQuery","query","replace","serializeData","options","processData","param","traditional","toUpperCase","dataType","parseArguments","isFunction","serialize","params","scope","array","isArray","hash","isPlainObject","each","add","jsonpID","Date","window","rscript","blankRE","originAnchor","createElement","href","ajaxJSONP","responseData","abortTimeout","_callbackName","jsonpCallback","callbackName","script","originalCallback","abort","triggerHandler","promise","on","clearTimeout","off","remove","arguments","src","head","appendChild","timeout","setTimeout","ajaxSettings","XMLHttpRequest","accepts","json","xml","html","crossDomain","cache","urlAnchor","hashIndex","extend","Deferred","host","toString","indexOf","slice","hasPlaceholder","now","jsonp","headers","setHeader","toLowerCase","RegExp","$1","nativeSetHeader","setRequestHeader","mimeType","overrideMimeType","onreadystatechange","readyState","result","getResponseHeader","responseType","response","responseText","eval","responseXML","parseJSON","statusText","async","open","username","password","xhrFields","apply","post","getJSON","fn","load","selector","self","parts","callback","escape","encodeURIComponent","join","6","Callbacks","memory","fired","firing","firingStart","firingLength","firingIndex","list","stack","once","fire","stopOnFalse","shift","disable","start","args","_","arg","unique","has","index","inArray","splice","disabled","lock","locked","fireWith","7","func","tuples","state","always","then","fns","defer","tuple","returned","resolve","reject","progress","notify","values","stateString","Array","when","sub","progressValues","progressContexts","resolveContexts","resolveValues","len","remain","updateFn","ctx","val","notifyWith","8","zid","element","_zid","findHandlers","ns","matcher","matcherFor","handlers","filter","handler","sel","sort","eventCapture","captureSetting","del","focusinSupported","focus","realEvent","hover","events","delegator","capture","id","set","ready","related","relatedTarget","contains","proxy","compatible","isImmediatePropagationStopped","_args","concat","preventDefault","stopPropagation","addEventListener","removeEventListener","source","eventMethods","predicate","sourceMethod","returnTrue","returnFalse","timeStamp","ignored","defaultPrevented","getPreventDefault","createProxy","originalEvent","ignoreProperties","isString","specialEvents","blur","mouseenter","mouseleave","click","mousedown","mouseup","mousemove","proxyFn","unshift","bind","unbind","one","stopImmediatePropagation","delegate","undelegate","live","body","die","autoRemove","$this","evt","match","closest","currentTarget","liveFired","dispatchEvent","createEvent","bubbles","initEvent","9","String","class2type","isWindow","isDocument","nodeType","DOCUMENT_NODE","isObject","getPrototypeOf","likeArray","compact","flatten","dasherize","str","classRE","classCache","maybeAddPx","cssNumber","defaultDisplay","nodeName","display","elementDisplay","getComputedStyle","getPropertyValue","parentNode","removeChild","childNodes","node","Z","dom","deep","filtered","nodes","funcArg","idx","payload","setAttribute","removeAttribute","klass","svg","baseVal","deserializeValue","traverseNode","fun","classList","camelize","uniq","emptyArray","column-count","columns","font-weight","line-height","opacity","z-index","zoom","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","adjacencyOperators","table","tableRow","containers","tr","tbody","thead","tfoot","td","th","*","readyRE","simpleSelectorRE","zepto","tempParent","propMap","tabindex","readonly","for","class","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","contenteditable","object","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","parent","temp","qsa","chr","fragment","properties","container","innerHTML","isZ","init","trim","found","maybeID","maybeClass","nameOnly","isSimple","getElementById","getElementsByTagName","documentElement","isEmptyObject","isNumeric","num","Number","isNaN","isFinite","elem","camelCase","uuid","support","expr","noop","elements","grep","constructor","reduce","el","size","every","not","is","excludes","eq","first","last","some","collection","parents","ancestors","pluck","contents","contentDocument","siblings","child","property","show","style","replaceWith","newContent","before","wrap","structure","clone","wrapAll","cloneNode","append","wrapInner","unwrap","hide","css","toggle","setting","prev","next","originHtml","newText","textContent","getAttribute","removeAttr","attribute","prop","removeProp","attrName","multiple","selected","offset","coordinates","coords","parentOffset","offsetParent","top","left","getBoundingClientRect","pageXOffset","pageYOffset","width","Math","round","height","computedStyle","removeProperty","cssText","hasClass","addClass","cls","newName","removeClass","toggleClass","names","scrollTop","hasScrollTop","scrollTo","scrollX","scrollLeft","hasScrollLeft","scrollY","position","parseFloat","detach","dimension","dimensionProperty","m","operator","operatorIndex","inside","argType","arr","copyByClone","nextSibling","firstChild","parentInDocument","insertBefore","ownerDocument","defaultView"],"mappings":"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","file":"contentscript.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _htmlToJson = require('./htmlToJson');\n\nvar _htmlToJson2 = _interopRequireDefault(_htmlToJson);\n\nvar _xhr = require('./xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n  if (request.message === 'scrape user') {\n\n    var htmlToJson = new _htmlToJson2.default();\n    var _profile = htmlToJson.parse();\n    console.log(_profile);\n    _xhr2.default.send(_profile).done(function (data, status, xhr) {\n      console.log('done !');\n      chrome.runtime.sendMessage({ message: 'change icon' });\n    }).fail(function (xhr, errorType, error) {\n      console.log('fail !');\n      chrome.runtime.sendMessage({ message: 'change icon' });\n    });\n  }\n});\n\nchrome.extension.onRequest.addListener(function (request, sender, sendResponse) {\n  var htmlToJson = new _htmlToJson2.default();\n  var profile = htmlToJson.parse();\n  sendResponse({ counter: profile });\n});\n\nvar insertedNodes = [];\nvar profile = '';\nvar observer = new MutationObserver(function (mutations) {\n  console.log('run');\n  mutations.forEach(function (mutation) {\n    if (mutation.target.className == 'pv-profile-section experience-section') {\n      chrome.extension.onRequest.addListener(function (request, sender, sendResponse) {\n        var htmlToJson = new _htmlToJson2.default();\n        var profile = htmlToJson.parse();\n        sendResponse({ counter: profile });\n        if (profile.backgroundExperience != null) {\n          console.log(profile);\n          // later, you can stop observing\n          observer.disconnect();\n        }\n      });\n    }\n    // for (var i = 0; i < mutation.addedNodes.length; i++)\n    // {\n    // }\n    // return false;\n  });\n});\nobserver.observe(document, {\n  attributes: true,\n  attributeFilter: ['class'],\n  childList: true,\n  characterData: false,\n  subtree: true\n});\n// Stops the MutationObserver from listening for changes.\nconsole.log(insertedNodes.length);\nif (insertedNodes.length > 0) {\n  observer.disconnect();\n}\n\n},{\"./htmlToJson\":2,\"./xhr\":3}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _zepto = require('./zepto');\n\nvar _zepto2 = _interopRequireDefault(_zepto);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HtmlToJson = function () {\n  function HtmlToJson() {\n    _classCallCheck(this, HtmlToJson);\n\n    this.$vcard = (0, _zepto2.default)('.vcard');\n    this.$profileBackground = (0, _zepto2.default)('.pv-profile-section experience-section');\n  }\n\n  // VCARD\n\n  _createClass(HtmlToJson, [{\n    key: 'fullname',\n    value: function fullname() {\n      return (0, _zepto2.default)('.pv-top-card-section__name').text();\n    }\n  }, {\n    key: 'title',\n    value: function title() {\n      return (0, _zepto2.default)('.pv-top-card-section__headline').text();\n    }\n  }, {\n    key: 'locality',\n    value: function locality() {\n      return this.$vcard.find('.locality').text();\n    }\n  }, {\n    key: 'industry',\n    value: function industry() {\n      return this.$vcard.find('.industry').text();\n    }\n  }, {\n    key: 'picture',\n    value: function picture() {\n      return this.$vcard.find('.profile-picture img').attr('src');\n    }\n\n    // PROFILE BACKGROUND\n\n  }, {\n    key: 'description',\n    value: function description() {\n      return this.$profileBackground.find('.description').text();\n    }\n  }, {\n    key: 'location',\n    value: function location() {\n      return (0, _zepto2.default)('.pv-top-card-section__location').text();\n    }\n  }, {\n    key: 'backgroundExperience',\n    value: function backgroundExperience() {\n      var $document = (0, _zepto2.default)('.pv-profile-section.experience-section > ul')[0].children;\n      var returnValue = {};\n      var items = [];\n      returnValue.items = items;\n      for (var i = 0; i < $document.length; i++) {\n        var $bckexp = $document[i];\n        var role = $bckexp.querySelectorAll('h3')[0].innerText;\n        var duration = $bckexp.getElementsByClassName('pv-entity__date-range')[0].innerText;\n        var companyName = $bckexp.getElementsByClassName('pv-entity__secondary-title')[0].innerText;\n        var item = { 'duration': duration, 'name': companyName, 'role': role };\n        returnValue.items.push(item);\n      }\n      return returnValue;\n    }\n  }, {\n    key: 'courses',\n    value: function courses() {\n      if ((0, _zepto2.default)('.accordion-panel.pv-profile-section.pv-accomplishments-block.courses > div > div > ul')[0] != undefined || (0, _zepto2.default)('.accordion-panel.pv-profile-section.pv-accomplishments-block.courses > div > div > ul')[0] != null) {\n        var $document = (0, _zepto2.default)('.accordion-panel.pv-profile-section.pv-accomplishments-block.courses > div > div > ul')[0].children;\n        var returnValue = {};\n        var items = [];\n        returnValue.items = items;\n        for (var i = 0; i < $document.length; i++) {\n          var courseName = $document[i].innerText;\n          var course = { 'coursename': courseName };\n          returnValue.items.push(course);\n        }\n        return returnValue;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'languages',\n    value: function languages() {\n      if ((0, _zepto2.default)('.accordion-panel.pv-profile-section.pv-accomplishments-block.languages > div > div > ul')[0] != undefined) {\n        var $document = (0, _zepto2.default)('.accordion-panel.pv-profile-section.pv-accomplishments-block.languages > div > div > ul')[0].children;\n        var returnValue = {};\n        var items = [];\n        returnValue.items = items;\n        for (var i = 0; i < $document.length; i++) {\n          var languageName = $document[i].innerText;\n          var language = { 'languageName': languageName };\n          returnValue.items.push(language);\n        }\n        return returnValue;\n      } else {\n        console.log('NULL');\n        return null;\n      }\n    }\n  }, {\n    key: 'skills',\n    value: function skills() {\n      var $skills = this.$profileBackground.find('.endorse-item-name-text');\n      return $skills.map(function (i, s) {\n        return (0, _zepto2.default)(s).text();\n      }).toArray();\n    }\n  }, {\n    key: 'backgroundEducation',\n    value: function backgroundEducation() {\n      var $backgroundEducation = this.$profileBackground.find('.background-education');\n      var $educations = $backgroundEducation.find('.education');\n\n      return $educations.map(function (i, e) {\n        return {\n          org: (0, _zepto2.default)(e).find('.org').text(),\n          degree: (0, _zepto2.default)(e).find('.degree').text(),\n          major: (0, _zepto2.default)(e).find('.major').text(),\n          date: (0, _zepto2.default)(e).find('.education-date').text(),\n          notes: (0, _zepto2.default)(e).find('.notes').text()\n        };\n      }).toArray();\n    }\n\n    // Methods\n\n  }, {\n    key: 'parse',\n    value: function parse() {\n      return {\n        fullname: this.fullname(),\n        title: this.title(),\n        locality: this.locality(),\n        industry: this.industry(),\n        picture: this.picture(),\n        description: this.description(),\n        backgroundExperience: this.backgroundExperience(),\n        skills: this.skills(),\n        backgroundEducation: this.backgroundEducation(),\n        location: this.location(),\n        courses: this.courses(),\n        languages: this.languages()\n      };\n    }\n  }]);\n\n  return HtmlToJson;\n}();\n\nexports.default = HtmlToJson;\n\n},{\"./zepto\":4}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _zepto = require('./zepto');\n\nvar _zepto2 = _interopRequireDefault(_zepto);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Xhr = function () {\n  function Xhr() {\n    var _this = this;\n\n    _classCallCheck(this, Xhr);\n\n    chrome.storage.sync.get(['url'], function (items) {\n      _this.url = location.protocol + '//' + items.url;\n    });\n\n    chrome.storage.onChanged.addListener(function (changes, namespace) {\n      var storageChange = changes['url'];\n      _this.url = location.protocol + '//' + storageChange.newValue;\n    });\n  }\n\n  _createClass(Xhr, [{\n    key: 'send',\n    value: function send(data) {\n      console.log(data);\n      return _zepto2.default.ajax({\n        url: this.url,\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify(data)\n      });\n    }\n  }]);\n\n  return Xhr;\n}();\n\nexports.default = new Xhr();\n\n},{\"./zepto\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _zepto = require('zepto-modules/zepto');\n\nvar _zepto2 = _interopRequireDefault(_zepto);\n\nvar _event = require('zepto-modules/event');\n\nvar _event2 = _interopRequireDefault(_event);\n\nvar _ajax = require('zepto-modules/ajax');\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _deferred = require('zepto-modules/deferred');\n\nvar _deferred2 = _interopRequireDefault(_deferred);\n\nvar _callbacks = require('zepto-modules/callbacks');\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _zepto2.default;\n\n},{\"zepto-modules/ajax\":5,\"zepto-modules/callbacks\":6,\"zepto-modules/deferred\":7,\"zepto-modules/event\":8,\"zepto-modules/zepto\":9}],5:[function(require,module,exports){\n//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\nvar Zepto = require('./zepto');\n\n;(function($){\n  var jsonpID = +new Date(),\n      document = window.document,\n      key,\n      name,\n      rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n      scriptTypeRE = /^(?:text|application)\\/javascript/i,\n      xmlTypeRE = /^(?:text|application)\\/xml/i,\n      jsonType = 'application/json',\n      htmlType = 'text/html',\n      blankRE = /^\\s*$/,\n      originAnchor = document.createElement('a')\n\n  originAnchor.href = window.location.href\n\n  // trigger a custom event and return false if it was cancelled\n  function triggerAndReturn(context, eventName, data) {\n    var event = $.Event(eventName)\n    $(context).trigger(event, data)\n    return !event.isDefaultPrevented()\n  }\n\n  // trigger an Ajax \"global\" event\n  function triggerGlobal(settings, context, eventName, data) {\n    if (settings.global) return triggerAndReturn(context || document, eventName, data)\n  }\n\n  // Number of active Ajax requests\n  $.active = 0\n\n  function ajaxStart(settings) {\n    if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n  }\n  function ajaxStop(settings) {\n    if (settings.global && !(--$.active)) triggerGlobal(settings, null, 'ajaxStop')\n  }\n\n  // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n  function ajaxBeforeSend(xhr, settings) {\n    var context = settings.context\n    if (settings.beforeSend.call(context, xhr, settings) === false ||\n        triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n      return false\n\n    triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n  }\n  function ajaxSuccess(data, xhr, settings, deferred) {\n    var context = settings.context, status = 'success'\n    settings.success.call(context, data, status, xhr)\n    if (deferred) deferred.resolveWith(context, [data, status, xhr])\n    triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n    ajaxComplete(status, xhr, settings)\n  }\n  // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n  function ajaxError(error, type, xhr, settings, deferred) {\n    var context = settings.context\n    settings.error.call(context, xhr, type, error)\n    if (deferred) deferred.rejectWith(context, [xhr, type, error])\n    triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type])\n    ajaxComplete(type, xhr, settings)\n  }\n  // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n  function ajaxComplete(status, xhr, settings) {\n    var context = settings.context\n    settings.complete.call(context, xhr, status)\n    triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n    ajaxStop(settings)\n  }\n\n  function ajaxDataFilter(data, type, settings) {\n    if (settings.dataFilter == empty) return data\n    var context = settings.context\n    return settings.dataFilter.call(context, data, type)\n  }\n\n  // Empty function, used as default callback\n  function empty() {}\n\n  $.ajaxJSONP = function(options, deferred){\n    if (!('type' in options)) return $.ajax(options)\n\n    var _callbackName = options.jsonpCallback,\n      callbackName = ($.isFunction(_callbackName) ?\n        _callbackName() : _callbackName) || ('Zepto' + (jsonpID++)),\n      script = document.createElement('script'),\n      originalCallback = window[callbackName],\n      responseData,\n      abort = function(errorType) {\n        $(script).triggerHandler('error', errorType || 'abort')\n      },\n      xhr = { abort: abort }, abortTimeout\n\n    if (deferred) deferred.promise(xhr)\n\n    $(script).on('load error', function(e, errorType){\n      clearTimeout(abortTimeout)\n      $(script).off().remove()\n\n      if (e.type == 'error' || !responseData) {\n        ajaxError(null, errorType || 'error', xhr, options, deferred)\n      } else {\n        ajaxSuccess(responseData[0], xhr, options, deferred)\n      }\n\n      window[callbackName] = originalCallback\n      if (responseData && $.isFunction(originalCallback))\n        originalCallback(responseData[0])\n\n      originalCallback = responseData = undefined\n    })\n\n    if (ajaxBeforeSend(xhr, options) === false) {\n      abort('abort')\n      return xhr\n    }\n\n    window[callbackName] = function(){\n      responseData = arguments\n    }\n\n    script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName)\n    document.head.appendChild(script)\n\n    if (options.timeout > 0) abortTimeout = setTimeout(function(){\n      abort('timeout')\n    }, options.timeout)\n\n    return xhr\n  }\n\n  $.ajaxSettings = {\n    // Default type of request\n    type: 'GET',\n    // Callback that is executed before request\n    beforeSend: empty,\n    // Callback that is executed if the request succeeds\n    success: empty,\n    // Callback that is executed the the server drops error\n    error: empty,\n    // Callback that is executed on request complete (both: error and success)\n    complete: empty,\n    // The context for the callbacks\n    context: null,\n    // Whether to trigger \"global\" Ajax events\n    global: true,\n    // Transport\n    xhr: function () {\n      return new window.XMLHttpRequest()\n    },\n    // MIME types mapping\n    // IIS returns Javascript as \"application/x-javascript\"\n    accepts: {\n      script: 'text/javascript, application/javascript, application/x-javascript',\n      json:   jsonType,\n      xml:    'application/xml, text/xml',\n      html:   htmlType,\n      text:   'text/plain'\n    },\n    // Whether the request is to another domain\n    crossDomain: false,\n    // Default timeout\n    timeout: 0,\n    // Whether data should be serialized to string\n    processData: true,\n    // Whether the browser should be allowed to cache GET responses\n    cache: true,\n    //Used to handle the raw response data of XMLHttpRequest.\n    //This is a pre-filtering function to sanitize the response.\n    //The sanitized response should be returned\n    dataFilter: empty\n  }\n\n  function mimeToDataType(mime) {\n    if (mime) mime = mime.split(';', 2)[0]\n    return mime && ( mime == htmlType ? 'html' :\n      mime == jsonType ? 'json' :\n      scriptTypeRE.test(mime) ? 'script' :\n      xmlTypeRE.test(mime) && 'xml' ) || 'text'\n  }\n\n  function appendQuery(url, query) {\n    if (query == '') return url\n    return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n  }\n\n  // serialize payload and append it to the URL for GET requests\n  function serializeData(options) {\n    if (options.processData && options.data && $.type(options.data) != \"string\")\n      options.data = $.param(options.data, options.traditional)\n    if (options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType))\n      options.url = appendQuery(options.url, options.data), options.data = undefined\n  }\n\n  $.ajax = function(options){\n    var settings = $.extend({}, options || {}),\n        deferred = $.Deferred && $.Deferred(),\n        urlAnchor, hashIndex\n    for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key]\n\n    ajaxStart(settings)\n\n    if (!settings.crossDomain) {\n      urlAnchor = document.createElement('a')\n      urlAnchor.href = settings.url\n      // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049\n      urlAnchor.href = urlAnchor.href\n      settings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host)\n    }\n\n    if (!settings.url) settings.url = window.location.toString()\n    if ((hashIndex = settings.url.indexOf('#')) > -1) settings.url = settings.url.slice(0, hashIndex)\n    serializeData(settings)\n\n    var dataType = settings.dataType, hasPlaceholder = /\\?.+=\\?/.test(settings.url)\n    if (hasPlaceholder) dataType = 'jsonp'\n\n    if (settings.cache === false || (\n         (!options || options.cache !== true) &&\n         ('script' == dataType || 'jsonp' == dataType)\n        ))\n      settings.url = appendQuery(settings.url, '_=' + Date.now())\n\n    if ('jsonp' == dataType) {\n      if (!hasPlaceholder)\n        settings.url = appendQuery(settings.url,\n          settings.jsonp ? (settings.jsonp + '=?') : settings.jsonp === false ? '' : 'callback=?')\n      return $.ajaxJSONP(settings, deferred)\n    }\n\n    var mime = settings.accepts[dataType],\n        headers = { },\n        setHeader = function(name, value) { headers[name.toLowerCase()] = [name, value] },\n        protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n        xhr = settings.xhr(),\n        nativeSetHeader = xhr.setRequestHeader,\n        abortTimeout\n\n    if (deferred) deferred.promise(xhr)\n\n    if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest')\n    setHeader('Accept', mime || '*/*')\n    if (mime = settings.mimeType || mime) {\n      if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n      xhr.overrideMimeType && xhr.overrideMimeType(mime)\n    }\n    if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET'))\n      setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded')\n\n    if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name])\n    xhr.setRequestHeader = setHeader\n\n    xhr.onreadystatechange = function(){\n      if (xhr.readyState == 4) {\n        xhr.onreadystatechange = empty\n        clearTimeout(abortTimeout)\n        var result, error = false\n        if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n          dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'))\n\n          if (xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob')\n            result = xhr.response\n          else {\n            result = xhr.responseText\n\n            try {\n              // http://perfectionkills.com/global-eval-what-are-the-options/\n              // sanitize response accordingly if data filter callback provided\n              result = ajaxDataFilter(result, dataType, settings)\n              if (dataType == 'script')    (1,eval)(result)\n              else if (dataType == 'xml')  result = xhr.responseXML\n              else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result)\n            } catch (e) { error = e }\n\n            if (error) return ajaxError(error, 'parsererror', xhr, settings, deferred)\n          }\n\n          ajaxSuccess(result, xhr, settings, deferred)\n        } else {\n          ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred)\n        }\n      }\n    }\n\n    if (ajaxBeforeSend(xhr, settings) === false) {\n      xhr.abort()\n      ajaxError(null, 'abort', xhr, settings, deferred)\n      return xhr\n    }\n\n    var async = 'async' in settings ? settings.async : true\n    xhr.open(settings.type, settings.url, async, settings.username, settings.password)\n\n    if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name]\n\n    for (name in headers) nativeSetHeader.apply(xhr, headers[name])\n\n    if (settings.timeout > 0) abortTimeout = setTimeout(function(){\n        xhr.onreadystatechange = empty\n        xhr.abort()\n        ajaxError(null, 'timeout', xhr, settings, deferred)\n      }, settings.timeout)\n\n    // avoid sending empty string (#319)\n    xhr.send(settings.data ? settings.data : null)\n    return xhr\n  }\n\n  // handle optional data/success arguments\n  function parseArguments(url, data, success, dataType) {\n    if ($.isFunction(data)) dataType = success, success = data, data = undefined\n    if (!$.isFunction(success)) dataType = success, success = undefined\n    return {\n      url: url\n    , data: data\n    , success: success\n    , dataType: dataType\n    }\n  }\n\n  $.get = function(/* url, data, success, dataType */){\n    return $.ajax(parseArguments.apply(null, arguments))\n  }\n\n  $.post = function(/* url, data, success, dataType */){\n    var options = parseArguments.apply(null, arguments)\n    options.type = 'POST'\n    return $.ajax(options)\n  }\n\n  $.getJSON = function(/* url, data, success */){\n    var options = parseArguments.apply(null, arguments)\n    options.dataType = 'json'\n    return $.ajax(options)\n  }\n\n  $.fn.load = function(url, data, success){\n    if (!this.length) return this\n    var self = this, parts = url.split(/\\s/), selector,\n        options = parseArguments(url, data, success),\n        callback = options.success\n    if (parts.length > 1) options.url = parts[0], selector = parts[1]\n    options.success = function(response){\n      self.html(selector ?\n        $('<div>').html(response.replace(rscript, \"\")).find(selector)\n        : response)\n      callback && callback.apply(self, arguments)\n    }\n    $.ajax(options)\n    return this\n  }\n\n  var escape = encodeURIComponent\n\n  function serialize(params, obj, traditional, scope){\n    var type, array = $.isArray(obj), hash = $.isPlainObject(obj)\n    $.each(obj, function(key, value) {\n      type = $.type(value)\n      if (scope) key = traditional ? scope :\n        scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'\n      // handle data in serializeArray() format\n      if (!scope && array) params.add(value.name, value.value)\n      // recurse into nested objects\n      else if (type == \"array\" || (!traditional && type == \"object\"))\n        serialize(params, value, traditional, key)\n      else params.add(key, value)\n    })\n  }\n\n  $.param = function(obj, traditional){\n    var params = []\n    params.add = function(key, value) {\n      if ($.isFunction(value)) value = value()\n      if (value == null) value = \"\"\n      this.push(escape(key) + '=' + escape(value))\n    }\n    serialize(params, obj, traditional)\n    return params.join('&').replace(/%20/g, '+')\n  }\n})(Zepto)\n\n},{\"./zepto\":9}],6:[function(require,module,exports){\n//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\nvar Zepto = require('./zepto');\n\n;(function($){\n  // Create a collection of callbacks to be fired in a sequence, with configurable behaviour\n  // Option flags:\n  //   - once: Callbacks fired at most one time.\n  //   - memory: Remember the most recent context and arguments\n  //   - stopOnFalse: Cease iterating over callback list\n  //   - unique: Permit adding at most one instance of the same callback\n  $.Callbacks = function(options) {\n    options = $.extend({}, options)\n\n    var memory, // Last fire value (for non-forgettable lists)\n        fired,  // Flag to know if list was already fired\n        firing, // Flag to know if list is currently firing\n        firingStart, // First callback to fire (used internally by add and fireWith)\n        firingLength, // End of the loop when firing\n        firingIndex, // Index of currently firing callback (modified by remove if needed)\n        list = [], // Actual callback list\n        stack = !options.once && [], // Stack of fire calls for repeatable lists\n        fire = function(data) {\n          memory = options.memory && data\n          fired = true\n          firingIndex = firingStart || 0\n          firingStart = 0\n          firingLength = list.length\n          firing = true\n          for ( ; list && firingIndex < firingLength ; ++firingIndex ) {\n            if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {\n              memory = false\n              break\n            }\n          }\n          firing = false\n          if (list) {\n            if (stack) stack.length && fire(stack.shift())\n            else if (memory) list.length = 0\n            else Callbacks.disable()\n          }\n        },\n\n        Callbacks = {\n          add: function() {\n            if (list) {\n              var start = list.length,\n                  add = function(args) {\n                    $.each(args, function(_, arg){\n                      if (typeof arg === \"function\") {\n                        if (!options.unique || !Callbacks.has(arg)) list.push(arg)\n                      }\n                      else if (arg && arg.length && typeof arg !== 'string') add(arg)\n                    })\n                  }\n              add(arguments)\n              if (firing) firingLength = list.length\n              else if (memory) {\n                firingStart = start\n                fire(memory)\n              }\n            }\n            return this\n          },\n          remove: function() {\n            if (list) {\n              $.each(arguments, function(_, arg){\n                var index\n                while ((index = $.inArray(arg, list, index)) > -1) {\n                  list.splice(index, 1)\n                  // Handle firing indexes\n                  if (firing) {\n                    if (index <= firingLength) --firingLength\n                    if (index <= firingIndex) --firingIndex\n                  }\n                }\n              })\n            }\n            return this\n          },\n          has: function(fn) {\n            return !!(list && (fn ? $.inArray(fn, list) > -1 : list.length))\n          },\n          empty: function() {\n            firingLength = list.length = 0\n            return this\n          },\n          disable: function() {\n            list = stack = memory = undefined\n            return this\n          },\n          disabled: function() {\n            return !list\n          },\n          lock: function() {\n            stack = undefined\n            if (!memory) Callbacks.disable()\n            return this\n          },\n          locked: function() {\n            return !stack\n          },\n          fireWith: function(context, args) {\n            if (list && (!fired || stack)) {\n              args = args || []\n              args = [context, args.slice ? args.slice() : args]\n              if (firing) stack.push(args)\n              else fire(args)\n            }\n            return this\n          },\n          fire: function() {\n            return Callbacks.fireWith(this, arguments)\n          },\n          fired: function() {\n            return !!fired\n          }\n        }\n\n    return Callbacks\n  }\n})(Zepto)\n\n},{\"./zepto\":9}],7:[function(require,module,exports){\n//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n//\n//     Some code (c) 2005, 2013 jQuery Foundation, Inc. and other contributors\n\nvar Zepto = require('./zepto');\n\n;(function($){\n  var slice = Array.prototype.slice\n\n  function Deferred(func) {\n    var tuples = [\n          // action, add listener, listener list, final state\n          [ \"resolve\", \"done\", $.Callbacks({once:1, memory:1}), \"resolved\" ],\n          [ \"reject\", \"fail\", $.Callbacks({once:1, memory:1}), \"rejected\" ],\n          [ \"notify\", \"progress\", $.Callbacks({memory:1}) ]\n        ],\n        state = \"pending\",\n        promise = {\n          state: function() {\n            return state\n          },\n          always: function() {\n            deferred.done(arguments).fail(arguments)\n            return this\n          },\n          then: function(/* fnDone [, fnFailed [, fnProgress]] */) {\n            var fns = arguments\n            return Deferred(function(defer){\n              $.each(tuples, function(i, tuple){\n                var fn = $.isFunction(fns[i]) && fns[i]\n                deferred[tuple[1]](function(){\n                  var returned = fn && fn.apply(this, arguments)\n                  if (returned && $.isFunction(returned.promise)) {\n                    returned.promise()\n                      .done(defer.resolve)\n                      .fail(defer.reject)\n                      .progress(defer.notify)\n                  } else {\n                    var context = this === promise ? defer.promise() : this,\n                        values = fn ? [returned] : arguments\n                    defer[tuple[0] + \"With\"](context, values)\n                  }\n                })\n              })\n              fns = null\n            }).promise()\n          },\n\n          promise: function(obj) {\n            return obj != null ? $.extend( obj, promise ) : promise\n          }\n        },\n        deferred = {}\n\n    $.each(tuples, function(i, tuple){\n      var list = tuple[2],\n          stateString = tuple[3]\n\n      promise[tuple[1]] = list.add\n\n      if (stateString) {\n        list.add(function(){\n          state = stateString\n        }, tuples[i^1][2].disable, tuples[2][2].lock)\n      }\n\n      deferred[tuple[0]] = function(){\n        deferred[tuple[0] + \"With\"](this === deferred ? promise : this, arguments)\n        return this\n      }\n      deferred[tuple[0] + \"With\"] = list.fireWith\n    })\n\n    promise.promise(deferred)\n    if (func) func.call(deferred, deferred)\n    return deferred\n  }\n\n  $.when = function(sub) {\n    var resolveValues = slice.call(arguments),\n        len = resolveValues.length,\n        i = 0,\n        remain = len !== 1 || (sub && $.isFunction(sub.promise)) ? len : 0,\n        deferred = remain === 1 ? sub : Deferred(),\n        progressValues, progressContexts, resolveContexts,\n        updateFn = function(i, ctx, val){\n          return function(value){\n            ctx[i] = this\n            val[i] = arguments.length > 1 ? slice.call(arguments) : value\n            if (val === progressValues) {\n              deferred.notifyWith(ctx, val)\n            } else if (!(--remain)) {\n              deferred.resolveWith(ctx, val)\n            }\n          }\n        }\n\n    if (len > 1) {\n      progressValues = new Array(len)\n      progressContexts = new Array(len)\n      resolveContexts = new Array(len)\n      for ( ; i < len; ++i ) {\n        if (resolveValues[i] && $.isFunction(resolveValues[i].promise)) {\n          resolveValues[i].promise()\n            .done(updateFn(i, resolveContexts, resolveValues))\n            .fail(deferred.reject)\n            .progress(updateFn(i, progressContexts, progressValues))\n        } else {\n          --remain\n        }\n      }\n    }\n    if (!remain) deferred.resolveWith(resolveContexts, resolveValues)\n    return deferred.promise()\n  }\n\n  $.Deferred = Deferred\n})(Zepto)\n\n},{\"./zepto\":9}],8:[function(require,module,exports){\n//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\nvar Zepto = require('./zepto');\n\n;(function($){\n  var _zid = 1, undefined,\n      slice = Array.prototype.slice,\n      isFunction = $.isFunction,\n      isString = function(obj){ return typeof obj == 'string' },\n      handlers = {},\n      specialEvents={},\n      focusinSupported = 'onfocusin' in window,\n      focus = { focus: 'focusin', blur: 'focusout' },\n      hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' }\n\n  specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents'\n\n  function zid(element) {\n    return element._zid || (element._zid = _zid++)\n  }\n  function findHandlers(element, event, fn, selector) {\n    event = parse(event)\n    if (event.ns) var matcher = matcherFor(event.ns)\n    return (handlers[zid(element)] || []).filter(function(handler) {\n      return handler\n        && (!event.e  || handler.e == event.e)\n        && (!event.ns || matcher.test(handler.ns))\n        && (!fn       || zid(handler.fn) === zid(fn))\n        && (!selector || handler.sel == selector)\n    })\n  }\n  function parse(event) {\n    var parts = ('' + event).split('.')\n    return {e: parts[0], ns: parts.slice(1).sort().join(' ')}\n  }\n  function matcherFor(ns) {\n    return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')\n  }\n\n  function eventCapture(handler, captureSetting) {\n    return handler.del &&\n      (!focusinSupported && (handler.e in focus)) ||\n      !!captureSetting\n  }\n\n  function realEvent(type) {\n    return hover[type] || (focusinSupported && focus[type]) || type\n  }\n\n  function add(element, events, fn, data, selector, delegator, capture){\n    var id = zid(element), set = (handlers[id] || (handlers[id] = []))\n    events.split(/\\s/).forEach(function(event){\n      if (event == 'ready') return $(document).ready(fn)\n      var handler   = parse(event)\n      handler.fn    = fn\n      handler.sel   = selector\n      // emulate mouseenter, mouseleave\n      if (handler.e in hover) fn = function(e){\n        var related = e.relatedTarget\n        if (!related || (related !== this && !$.contains(this, related)))\n          return handler.fn.apply(this, arguments)\n      }\n      handler.del   = delegator\n      var callback  = delegator || fn\n      handler.proxy = function(e){\n        e = compatible(e)\n        if (e.isImmediatePropagationStopped()) return\n        e.data = data\n        var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))\n        if (result === false) e.preventDefault(), e.stopPropagation()\n        return result\n      }\n      handler.i = set.length\n      set.push(handler)\n      if ('addEventListener' in element)\n        element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\n    })\n  }\n  function remove(element, events, fn, selector, capture){\n    var id = zid(element)\n    ;(events || '').split(/\\s/).forEach(function(event){\n      findHandlers(element, event, fn, selector).forEach(function(handler){\n        delete handlers[id][handler.i]\n      if ('removeEventListener' in element)\n        element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\n      })\n    })\n  }\n\n  $.event = { add: add, remove: remove }\n\n  $.proxy = function(fn, context) {\n    var args = (2 in arguments) && slice.call(arguments, 2)\n    if (isFunction(fn)) {\n      var proxyFn = function(){ return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments) }\n      proxyFn._zid = zid(fn)\n      return proxyFn\n    } else if (isString(context)) {\n      if (args) {\n        args.unshift(fn[context], fn)\n        return $.proxy.apply(null, args)\n      } else {\n        return $.proxy(fn[context], fn)\n      }\n    } else {\n      throw new TypeError(\"expected function\")\n    }\n  }\n\n  $.fn.bind = function(event, data, callback){\n    return this.on(event, data, callback)\n  }\n  $.fn.unbind = function(event, callback){\n    return this.off(event, callback)\n  }\n  $.fn.one = function(event, selector, data, callback){\n    return this.on(event, selector, data, callback, 1)\n  }\n\n  var returnTrue = function(){return true},\n      returnFalse = function(){return false},\n      ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,\n      eventMethods = {\n        preventDefault: 'isDefaultPrevented',\n        stopImmediatePropagation: 'isImmediatePropagationStopped',\n        stopPropagation: 'isPropagationStopped'\n      }\n\n  function compatible(event, source) {\n    if (source || !event.isDefaultPrevented) {\n      source || (source = event)\n\n      $.each(eventMethods, function(name, predicate) {\n        var sourceMethod = source[name]\n        event[name] = function(){\n          this[predicate] = returnTrue\n          return sourceMethod && sourceMethod.apply(source, arguments)\n        }\n        event[predicate] = returnFalse\n      })\n\n      try {\n        event.timeStamp || (event.timeStamp = Date.now())\n      } catch (ignored) { }\n\n      if (source.defaultPrevented !== undefined ? source.defaultPrevented :\n          'returnValue' in source ? source.returnValue === false :\n          source.getPreventDefault && source.getPreventDefault())\n        event.isDefaultPrevented = returnTrue\n    }\n    return event\n  }\n\n  function createProxy(event) {\n    var key, proxy = { originalEvent: event }\n    for (key in event)\n      if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]\n\n    return compatible(proxy, event)\n  }\n\n  $.fn.delegate = function(selector, event, callback){\n    return this.on(event, selector, callback)\n  }\n  $.fn.undelegate = function(selector, event, callback){\n    return this.off(event, selector, callback)\n  }\n\n  $.fn.live = function(event, callback){\n    $(document.body).delegate(this.selector, event, callback)\n    return this\n  }\n  $.fn.die = function(event, callback){\n    $(document.body).undelegate(this.selector, event, callback)\n    return this\n  }\n\n  $.fn.on = function(event, selector, data, callback, one){\n    var autoRemove, delegator, $this = this\n    if (event && !isString(event)) {\n      $.each(event, function(type, fn){\n        $this.on(type, selector, data, fn, one)\n      })\n      return $this\n    }\n\n    if (!isString(selector) && !isFunction(callback) && callback !== false)\n      callback = data, data = selector, selector = undefined\n    if (callback === undefined || data === false)\n      callback = data, data = undefined\n\n    if (callback === false) callback = returnFalse\n\n    return $this.each(function(_, element){\n      if (one) autoRemove = function(e){\n        remove(element, e.type, callback)\n        return callback.apply(this, arguments)\n      }\n\n      if (selector) delegator = function(e){\n        var evt, match = $(e.target).closest(selector, element).get(0)\n        if (match && match !== element) {\n          evt = $.extend(createProxy(e), {currentTarget: match, liveFired: element})\n          return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))\n        }\n      }\n\n      add(element, event, callback, data, selector, delegator || autoRemove)\n    })\n  }\n  $.fn.off = function(event, selector, callback){\n    var $this = this\n    if (event && !isString(event)) {\n      $.each(event, function(type, fn){\n        $this.off(type, selector, fn)\n      })\n      return $this\n    }\n\n    if (!isString(selector) && !isFunction(callback) && callback !== false)\n      callback = selector, selector = undefined\n\n    if (callback === false) callback = returnFalse\n\n    return $this.each(function(){\n      remove(this, event, callback, selector)\n    })\n  }\n\n  $.fn.trigger = function(event, args){\n    event = (isString(event) || $.isPlainObject(event)) ? $.Event(event) : compatible(event)\n    event._args = args\n    return this.each(function(){\n      // handle focus(), blur() by calling them directly\n      if (event.type in focus && typeof this[event.type] == \"function\") this[event.type]()\n      // items in the collection might not be DOM elements\n      else if ('dispatchEvent' in this) this.dispatchEvent(event)\n      else $(this).triggerHandler(event, args)\n    })\n  }\n\n  // triggers event handlers on current element just as if an event occurred,\n  // doesn't trigger an actual event, doesn't bubble\n  $.fn.triggerHandler = function(event, args){\n    var e, result\n    this.each(function(i, element){\n      e = createProxy(isString(event) ? $.Event(event) : event)\n      e._args = args\n      e.target = element\n      $.each(findHandlers(element, event.type || event), function(i, handler){\n        result = handler.proxy(e)\n        if (e.isImmediatePropagationStopped()) return false\n      })\n    })\n    return result\n  }\n\n  // shortcut methods for `.bind(event, fn)` for each event type\n  ;('focusin focusout focus blur load resize scroll unload click dblclick '+\n  'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave '+\n  'change select keydown keypress keyup error').split(' ').forEach(function(event) {\n    $.fn[event] = function(callback) {\n      return (0 in arguments) ?\n        this.bind(event, callback) :\n        this.trigger(event)\n    }\n  })\n\n  $.Event = function(type, props) {\n    if (!isString(type)) props = type, type = props.type\n    var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true\n    if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])\n    event.initEvent(type, bubbles, true)\n    return compatible(event)\n  }\n\n})(Zepto)\n\n},{\"./zepto\":9}],9:[function(require,module,exports){\n//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\nvar Zepto = (function() {\n  var undefined, key, $, classList, emptyArray = [], concat = emptyArray.concat, filter = emptyArray.filter, slice = emptyArray.slice,\n    document = window.document,\n    elementDisplay = {}, classCache = {},\n    cssNumber = { 'column-count': 1, 'columns': 1, 'font-weight': 1, 'line-height': 1,'opacity': 1, 'z-index': 1, 'zoom': 1 },\n    fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\n    singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n    tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\n    rootNodeRE = /^(?:body|html)$/i,\n    capitalRE = /([A-Z])/g,\n\n    // special attributes that should be get/set via method calls\n    methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\n\n    adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],\n    table = document.createElement('table'),\n    tableRow = document.createElement('tr'),\n    containers = {\n      'tr': document.createElement('tbody'),\n      'tbody': table, 'thead': table, 'tfoot': table,\n      'td': tableRow, 'th': tableRow,\n      '*': document.createElement('div')\n    },\n    readyRE = /complete|loaded|interactive/,\n    simpleSelectorRE = /^[\\w-]*$/,\n    class2type = {},\n    toString = class2type.toString,\n    zepto = {},\n    camelize, uniq,\n    tempParent = document.createElement('div'),\n    propMap = {\n      'tabindex': 'tabIndex',\n      'readonly': 'readOnly',\n      'for': 'htmlFor',\n      'class': 'className',\n      'maxlength': 'maxLength',\n      'cellspacing': 'cellSpacing',\n      'cellpadding': 'cellPadding',\n      'rowspan': 'rowSpan',\n      'colspan': 'colSpan',\n      'usemap': 'useMap',\n      'frameborder': 'frameBorder',\n      'contenteditable': 'contentEditable'\n    },\n    isArray = Array.isArray ||\n      function(object){ return object instanceof Array }\n\n  zepto.matches = function(element, selector) {\n    if (!selector || !element || element.nodeType !== 1) return false\n    var matchesSelector = element.matches || element.webkitMatchesSelector ||\n                          element.mozMatchesSelector || element.oMatchesSelector ||\n                          element.matchesSelector\n    if (matchesSelector) return matchesSelector.call(element, selector)\n    // fall back to performing a selector:\n    var match, parent = element.parentNode, temp = !parent\n    if (temp) (parent = tempParent).appendChild(element)\n    match = ~zepto.qsa(parent, selector).indexOf(element)\n    temp && tempParent.removeChild(element)\n    return match\n  }\n\n  function type(obj) {\n    return obj == null ? String(obj) :\n      class2type[toString.call(obj)] || \"object\"\n  }\n\n  function isFunction(value) { return type(value) == \"function\" }\n  function isWindow(obj)     { return obj != null && obj == obj.window }\n  function isDocument(obj)   { return obj != null && obj.nodeType == obj.DOCUMENT_NODE }\n  function isObject(obj)     { return type(obj) == \"object\" }\n  function isPlainObject(obj) {\n    return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype\n  }\n\n  function likeArray(obj) {\n    var length = !!obj && 'length' in obj && obj.length,\n      type = $.type(obj)\n\n    return 'function' != type && !isWindow(obj) && (\n      'array' == type || length === 0 ||\n        (typeof length == 'number' && length > 0 && (length - 1) in obj)\n    )\n  }\n\n  function compact(array) { return filter.call(array, function(item){ return item != null }) }\n  function flatten(array) { return array.length > 0 ? $.fn.concat.apply([], array) : array }\n  camelize = function(str){ return str.replace(/-+(.)?/g, function(match, chr){ return chr ? chr.toUpperCase() : '' }) }\n  function dasherize(str) {\n    return str.replace(/::/g, '/')\n           .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n           .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n           .replace(/_/g, '-')\n           .toLowerCase()\n  }\n  uniq = function(array){ return filter.call(array, function(item, idx){ return array.indexOf(item) == idx }) }\n\n  function classRE(name) {\n    return name in classCache ?\n      classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)'))\n  }\n\n  function maybeAddPx(name, value) {\n    return (typeof value == \"number\" && !cssNumber[dasherize(name)]) ? value + \"px\" : value\n  }\n\n  function defaultDisplay(nodeName) {\n    var element, display\n    if (!elementDisplay[nodeName]) {\n      element = document.createElement(nodeName)\n      document.body.appendChild(element)\n      display = getComputedStyle(element, '').getPropertyValue(\"display\")\n      element.parentNode.removeChild(element)\n      display == \"none\" && (display = \"block\")\n      elementDisplay[nodeName] = display\n    }\n    return elementDisplay[nodeName]\n  }\n\n  function children(element) {\n    return 'children' in element ?\n      slice.call(element.children) :\n      $.map(element.childNodes, function(node){ if (node.nodeType == 1) return node })\n  }\n\n  function Z(dom, selector) {\n    var i, len = dom ? dom.length : 0\n    for (i = 0; i < len; i++) this[i] = dom[i]\n    this.length = len\n    this.selector = selector || ''\n  }\n\n  // `$.zepto.fragment` takes a html string and an optional tag name\n  // to generate DOM nodes from the given html string.\n  // The generated DOM nodes are returned as an array.\n  // This function can be overridden in plugins for example to make\n  // it compatible with browsers that don't support the DOM fully.\n  zepto.fragment = function(html, name, properties) {\n    var dom, nodes, container\n\n    // A special case optimization for a single tag\n    if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1))\n\n    if (!dom) {\n      if (html.replace) html = html.replace(tagExpanderRE, \"<$1></$2>\")\n      if (name === undefined) name = fragmentRE.test(html) && RegExp.$1\n      if (!(name in containers)) name = '*'\n\n      container = containers[name]\n      container.innerHTML = '' + html\n      dom = $.each(slice.call(container.childNodes), function(){\n        container.removeChild(this)\n      })\n    }\n\n    if (isPlainObject(properties)) {\n      nodes = $(dom)\n      $.each(properties, function(key, value) {\n        if (methodAttributes.indexOf(key) > -1) nodes[key](value)\n        else nodes.attr(key, value)\n      })\n    }\n\n    return dom\n  }\n\n  // `$.zepto.Z` swaps out the prototype of the given `dom` array\n  // of nodes with `$.fn` and thus supplying all the Zepto functions\n  // to the array. This method can be overridden in plugins.\n  zepto.Z = function(dom, selector) {\n    return new Z(dom, selector)\n  }\n\n  // `$.zepto.isZ` should return `true` if the given object is a Zepto\n  // collection. This method can be overridden in plugins.\n  zepto.isZ = function(object) {\n    return object instanceof zepto.Z\n  }\n\n  // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n  // takes a CSS selector and an optional context (and handles various\n  // special cases).\n  // This method can be overridden in plugins.\n  zepto.init = function(selector, context) {\n    var dom\n    // If nothing given, return an empty Zepto collection\n    if (!selector) return zepto.Z()\n    // Optimize for string selectors\n    else if (typeof selector == 'string') {\n      selector = selector.trim()\n      // If it's a html fragment, create nodes from it\n      // Note: In both Chrome 21 and Firefox 15, DOM error 12\n      // is thrown if the fragment doesn't begin with <\n      if (selector[0] == '<' && fragmentRE.test(selector))\n        dom = zepto.fragment(selector, RegExp.$1, context), selector = null\n      // If there's a context, create a collection on that context first, and select\n      // nodes from there\n      else if (context !== undefined) return $(context).find(selector)\n      // If it's a CSS selector, use it to select nodes.\n      else dom = zepto.qsa(document, selector)\n    }\n    // If a function is given, call it when the DOM is ready\n    else if (isFunction(selector)) return $(document).ready(selector)\n    // If a Zepto collection is given, just return it\n    else if (zepto.isZ(selector)) return selector\n    else {\n      // normalize array if an array of nodes is given\n      if (isArray(selector)) dom = compact(selector)\n      // Wrap DOM nodes.\n      else if (isObject(selector))\n        dom = [selector], selector = null\n      // If it's a html fragment, create nodes from it\n      else if (fragmentRE.test(selector))\n        dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null\n      // If there's a context, create a collection on that context first, and select\n      // nodes from there\n      else if (context !== undefined) return $(context).find(selector)\n      // And last but no least, if it's a CSS selector, use it to select nodes.\n      else dom = zepto.qsa(document, selector)\n    }\n    // create a new Zepto collection from the nodes found\n    return zepto.Z(dom, selector)\n  }\n\n  // `$` will be the base `Zepto` object. When calling this\n  // function just call `$.zepto.init, which makes the implementation\n  // details of selecting nodes and creating Zepto collections\n  // patchable in plugins.\n  $ = function(selector, context){\n    return zepto.init(selector, context)\n  }\n\n  function extend(target, source, deep) {\n    for (key in source)\n      if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {\n        if (isPlainObject(source[key]) && !isPlainObject(target[key]))\n          target[key] = {}\n        if (isArray(source[key]) && !isArray(target[key]))\n          target[key] = []\n        extend(target[key], source[key], deep)\n      }\n      else if (source[key] !== undefined) target[key] = source[key]\n  }\n\n  // Copy all but undefined properties from one or more\n  // objects to the `target` object.\n  $.extend = function(target){\n    var deep, args = slice.call(arguments, 1)\n    if (typeof target == 'boolean') {\n      deep = target\n      target = args.shift()\n    }\n    args.forEach(function(arg){ extend(target, arg, deep) })\n    return target\n  }\n\n  // `$.zepto.qsa` is Zepto's CSS selector implementation which\n  // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n  // This method can be overridden in plugins.\n  zepto.qsa = function(element, selector){\n    var found,\n        maybeID = selector[0] == '#',\n        maybeClass = !maybeID && selector[0] == '.',\n        nameOnly = maybeID || maybeClass ? selector.slice(1) : selector, // Ensure that a 1 char tag name still gets checked\n        isSimple = simpleSelectorRE.test(nameOnly)\n    return (element.getElementById && isSimple && maybeID) ? // Safari DocumentFragment doesn't have getElementById\n      ( (found = element.getElementById(nameOnly)) ? [found] : [] ) :\n      (element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11) ? [] :\n      slice.call(\n        isSimple && !maybeID && element.getElementsByClassName ? // DocumentFragment doesn't have getElementsByClassName/TagName\n          maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class\n          element.getElementsByTagName(selector) : // Or a tag\n          element.querySelectorAll(selector) // Or it's not simple, and we need to query all\n      )\n  }\n\n  function filtered(nodes, selector) {\n    return selector == null ? $(nodes) : $(nodes).filter(selector)\n  }\n\n  $.contains = document.documentElement.contains ?\n    function(parent, node) {\n      return parent !== node && parent.contains(node)\n    } :\n    function(parent, node) {\n      while (node && (node = node.parentNode))\n        if (node === parent) return true\n      return false\n    }\n\n  function funcArg(context, arg, idx, payload) {\n    return isFunction(arg) ? arg.call(context, idx, payload) : arg\n  }\n\n  function setAttribute(node, name, value) {\n    value == null ? node.removeAttribute(name) : node.setAttribute(name, value)\n  }\n\n  // access className property while respecting SVGAnimatedString\n  function className(node, value){\n    var klass = node.className || '',\n        svg   = klass && klass.baseVal !== undefined\n\n    if (value === undefined) return svg ? klass.baseVal : klass\n    svg ? (klass.baseVal = value) : (node.className = value)\n  }\n\n  // \"true\"  => true\n  // \"false\" => false\n  // \"null\"  => null\n  // \"42\"    => 42\n  // \"42.5\"  => 42.5\n  // \"08\"    => \"08\"\n  // JSON    => parse if valid\n  // String  => self\n  function deserializeValue(value) {\n    try {\n      return value ?\n        value == \"true\" ||\n        ( value == \"false\" ? false :\n          value == \"null\" ? null :\n          +value + \"\" == value ? +value :\n          /^[\\[\\{]/.test(value) ? $.parseJSON(value) :\n          value )\n        : value\n    } catch(e) {\n      return value\n    }\n  }\n\n  $.type = type\n  $.isFunction = isFunction\n  $.isWindow = isWindow\n  $.isArray = isArray\n  $.isPlainObject = isPlainObject\n\n  $.isEmptyObject = function(obj) {\n    var name\n    for (name in obj) return false\n    return true\n  }\n\n  $.isNumeric = function(val) {\n    var num = Number(val), type = typeof val\n    return val != null && type != 'boolean' &&\n      (type != 'string' || val.length) &&\n      !isNaN(num) && isFinite(num) || false\n  }\n\n  $.inArray = function(elem, array, i){\n    return emptyArray.indexOf.call(array, elem, i)\n  }\n\n  $.camelCase = camelize\n  $.trim = function(str) {\n    return str == null ? \"\" : String.prototype.trim.call(str)\n  }\n\n  // plugin compatibility\n  $.uuid = 0\n  $.support = { }\n  $.expr = { }\n  $.noop = function() {}\n\n  $.map = function(elements, callback){\n    var value, values = [], i, key\n    if (likeArray(elements))\n      for (i = 0; i < elements.length; i++) {\n        value = callback(elements[i], i)\n        if (value != null) values.push(value)\n      }\n    else\n      for (key in elements) {\n        value = callback(elements[key], key)\n        if (value != null) values.push(value)\n      }\n    return flatten(values)\n  }\n\n  $.each = function(elements, callback){\n    var i, key\n    if (likeArray(elements)) {\n      for (i = 0; i < elements.length; i++)\n        if (callback.call(elements[i], i, elements[i]) === false) return elements\n    } else {\n      for (key in elements)\n        if (callback.call(elements[key], key, elements[key]) === false) return elements\n    }\n\n    return elements\n  }\n\n  $.grep = function(elements, callback){\n    return filter.call(elements, callback)\n  }\n\n  if (window.JSON) $.parseJSON = JSON.parse\n\n  // Populate the class2type map\n  $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n    class2type[ \"[object \" + name + \"]\" ] = name.toLowerCase()\n  })\n\n  // Define methods that will be available on all\n  // Zepto collections\n  $.fn = {\n    constructor: zepto.Z,\n    length: 0,\n\n    // Because a collection acts like an array\n    // copy over these useful array functions.\n    forEach: emptyArray.forEach,\n    reduce: emptyArray.reduce,\n    push: emptyArray.push,\n    sort: emptyArray.sort,\n    splice: emptyArray.splice,\n    indexOf: emptyArray.indexOf,\n    concat: function(){\n      var i, value, args = []\n      for (i = 0; i < arguments.length; i++) {\n        value = arguments[i]\n        args[i] = zepto.isZ(value) ? value.toArray() : value\n      }\n      return concat.apply(zepto.isZ(this) ? this.toArray() : this, args)\n    },\n\n    // `map` and `slice` in the jQuery API work differently\n    // from their array counterparts\n    map: function(fn){\n      return $($.map(this, function(el, i){ return fn.call(el, i, el) }))\n    },\n    slice: function(){\n      return $(slice.apply(this, arguments))\n    },\n\n    ready: function(callback){\n      // need to check if document.body exists for IE as that browser reports\n      // document ready when it hasn't yet created the body element\n      if (readyRE.test(document.readyState) && document.body) callback($)\n      else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)\n      return this\n    },\n    get: function(idx){\n      return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\n    },\n    toArray: function(){ return this.get() },\n    size: function(){\n      return this.length\n    },\n    remove: function(){\n      return this.each(function(){\n        if (this.parentNode != null)\n          this.parentNode.removeChild(this)\n      })\n    },\n    each: function(callback){\n      emptyArray.every.call(this, function(el, idx){\n        return callback.call(el, idx, el) !== false\n      })\n      return this\n    },\n    filter: function(selector){\n      if (isFunction(selector)) return this.not(this.not(selector))\n      return $(filter.call(this, function(element){\n        return zepto.matches(element, selector)\n      }))\n    },\n    add: function(selector,context){\n      return $(uniq(this.concat($(selector,context))))\n    },\n    is: function(selector){\n      return this.length > 0 && zepto.matches(this[0], selector)\n    },\n    not: function(selector){\n      var nodes=[]\n      if (isFunction(selector) && selector.call !== undefined)\n        this.each(function(idx){\n          if (!selector.call(this,idx)) nodes.push(this)\n        })\n      else {\n        var excludes = typeof selector == 'string' ? this.filter(selector) :\n          (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)\n        this.forEach(function(el){\n          if (excludes.indexOf(el) < 0) nodes.push(el)\n        })\n      }\n      return $(nodes)\n    },\n    has: function(selector){\n      return this.filter(function(){\n        return isObject(selector) ?\n          $.contains(this, selector) :\n          $(this).find(selector).size()\n      })\n    },\n    eq: function(idx){\n      return idx === -1 ? this.slice(idx) : this.slice(idx, + idx + 1)\n    },\n    first: function(){\n      var el = this[0]\n      return el && !isObject(el) ? el : $(el)\n    },\n    last: function(){\n      var el = this[this.length - 1]\n      return el && !isObject(el) ? el : $(el)\n    },\n    find: function(selector){\n      var result, $this = this\n      if (!selector) result = $()\n      else if (typeof selector == 'object')\n        result = $(selector).filter(function(){\n          var node = this\n          return emptyArray.some.call($this, function(parent){\n            return $.contains(parent, node)\n          })\n        })\n      else if (this.length == 1) result = $(zepto.qsa(this[0], selector))\n      else result = this.map(function(){ return zepto.qsa(this, selector) })\n      return result\n    },\n    closest: function(selector, context){\n      var nodes = [], collection = typeof selector == 'object' && $(selector)\n      this.each(function(_, node){\n        while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector)))\n          node = node !== context && !isDocument(node) && node.parentNode\n        if (node && nodes.indexOf(node) < 0) nodes.push(node)\n      })\n      return $(nodes)\n    },\n    parents: function(selector){\n      var ancestors = [], nodes = this\n      while (nodes.length > 0)\n        nodes = $.map(nodes, function(node){\n          if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\n            ancestors.push(node)\n            return node\n          }\n        })\n      return filtered(ancestors, selector)\n    },\n    parent: function(selector){\n      return filtered(uniq(this.pluck('parentNode')), selector)\n    },\n    children: function(selector){\n      return filtered(this.map(function(){ return children(this) }), selector)\n    },\n    contents: function() {\n      return this.map(function() { return this.contentDocument || slice.call(this.childNodes) })\n    },\n    siblings: function(selector){\n      return filtered(this.map(function(i, el){\n        return filter.call(children(el.parentNode), function(child){ return child!==el })\n      }), selector)\n    },\n    empty: function(){\n      return this.each(function(){ this.innerHTML = '' })\n    },\n    // `pluck` is borrowed from Prototype.js\n    pluck: function(property){\n      return $.map(this, function(el){ return el[property] })\n    },\n    show: function(){\n      return this.each(function(){\n        this.style.display == \"none\" && (this.style.display = '')\n        if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\n          this.style.display = defaultDisplay(this.nodeName)\n      })\n    },\n    replaceWith: function(newContent){\n      return this.before(newContent).remove()\n    },\n    wrap: function(structure){\n      var func = isFunction(structure)\n      if (this[0] && !func)\n        var dom   = $(structure).get(0),\n            clone = dom.parentNode || this.length > 1\n\n      return this.each(function(index){\n        $(this).wrapAll(\n          func ? structure.call(this, index) :\n            clone ? dom.cloneNode(true) : dom\n        )\n      })\n    },\n    wrapAll: function(structure){\n      if (this[0]) {\n        $(this[0]).before(structure = $(structure))\n        var children\n        // drill down to the inmost element\n        while ((children = structure.children()).length) structure = children.first()\n        $(structure).append(this)\n      }\n      return this\n    },\n    wrapInner: function(structure){\n      var func = isFunction(structure)\n      return this.each(function(index){\n        var self = $(this), contents = self.contents(),\n            dom  = func ? structure.call(this, index) : structure\n        contents.length ? contents.wrapAll(dom) : self.append(dom)\n      })\n    },\n    unwrap: function(){\n      this.parent().each(function(){\n        $(this).replaceWith($(this).children())\n      })\n      return this\n    },\n    clone: function(){\n      return this.map(function(){ return this.cloneNode(true) })\n    },\n    hide: function(){\n      return this.css(\"display\", \"none\")\n    },\n    toggle: function(setting){\n      return this.each(function(){\n        var el = $(this)\n        ;(setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide()\n      })\n    },\n    prev: function(selector){ return $(this.pluck('previousElementSibling')).filter(selector || '*') },\n    next: function(selector){ return $(this.pluck('nextElementSibling')).filter(selector || '*') },\n    html: function(html){\n      return 0 in arguments ?\n        this.each(function(idx){\n          var originHtml = this.innerHTML\n          $(this).empty().append( funcArg(this, html, idx, originHtml) )\n        }) :\n        (0 in this ? this[0].innerHTML : null)\n    },\n    text: function(text){\n      return 0 in arguments ?\n        this.each(function(idx){\n          var newText = funcArg(this, text, idx, this.textContent)\n          this.textContent = newText == null ? '' : ''+newText\n        }) :\n        (0 in this ? this.pluck('textContent').join(\"\") : null)\n    },\n    attr: function(name, value){\n      var result\n      return (typeof name == 'string' && !(1 in arguments)) ?\n        (0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined) :\n        this.each(function(idx){\n          if (this.nodeType !== 1) return\n          if (isObject(name)) for (key in name) setAttribute(this, key, name[key])\n          else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))\n        })\n    },\n    removeAttr: function(name){\n      return this.each(function(){ this.nodeType === 1 && name.split(' ').forEach(function(attribute){\n        setAttribute(this, attribute)\n      }, this)})\n    },\n    prop: function(name, value){\n      name = propMap[name] || name\n      return (1 in arguments) ?\n        this.each(function(idx){\n          this[name] = funcArg(this, value, idx, this[name])\n        }) :\n        (this[0] && this[0][name])\n    },\n    removeProp: function(name){\n      name = propMap[name] || name\n      return this.each(function(){ delete this[name] })\n    },\n    data: function(name, value){\n      var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase()\n\n      var data = (1 in arguments) ?\n        this.attr(attrName, value) :\n        this.attr(attrName)\n\n      return data !== null ? deserializeValue(data) : undefined\n    },\n    val: function(value){\n      if (0 in arguments) {\n        if (value == null) value = \"\"\n        return this.each(function(idx){\n          this.value = funcArg(this, value, idx, this.value)\n        })\n      } else {\n        return this[0] && (this[0].multiple ?\n           $(this[0]).find('option').filter(function(){ return this.selected }).pluck('value') :\n           this[0].value)\n      }\n    },\n    offset: function(coordinates){\n      if (coordinates) return this.each(function(index){\n        var $this = $(this),\n            coords = funcArg(this, coordinates, index, $this.offset()),\n            parentOffset = $this.offsetParent().offset(),\n            props = {\n              top:  coords.top  - parentOffset.top,\n              left: coords.left - parentOffset.left\n            }\n\n        if ($this.css('position') == 'static') props['position'] = 'relative'\n        $this.css(props)\n      })\n      if (!this.length) return null\n      if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0]))\n        return {top: 0, left: 0}\n      var obj = this[0].getBoundingClientRect()\n      return {\n        left: obj.left + window.pageXOffset,\n        top: obj.top + window.pageYOffset,\n        width: Math.round(obj.width),\n        height: Math.round(obj.height)\n      }\n    },\n    css: function(property, value){\n      if (arguments.length < 2) {\n        var element = this[0]\n        if (typeof property == 'string') {\n          if (!element) return\n          return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property)\n        } else if (isArray(property)) {\n          if (!element) return\n          var props = {}\n          var computedStyle = getComputedStyle(element, '')\n          $.each(property, function(_, prop){\n            props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))\n          })\n          return props\n        }\n      }\n\n      var css = ''\n      if (type(property) == 'string') {\n        if (!value && value !== 0)\n          this.each(function(){ this.style.removeProperty(dasherize(property)) })\n        else\n          css = dasherize(property) + \":\" + maybeAddPx(property, value)\n      } else {\n        for (key in property)\n          if (!property[key] && property[key] !== 0)\n            this.each(function(){ this.style.removeProperty(dasherize(key)) })\n          else\n            css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'\n      }\n\n      return this.each(function(){ this.style.cssText += ';' + css })\n    },\n    index: function(element){\n      return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0])\n    },\n    hasClass: function(name){\n      if (!name) return false\n      return emptyArray.some.call(this, function(el){\n        return this.test(className(el))\n      }, classRE(name))\n    },\n    addClass: function(name){\n      if (!name) return this\n      return this.each(function(idx){\n        if (!('className' in this)) return\n        classList = []\n        var cls = className(this), newName = funcArg(this, name, idx, cls)\n        newName.split(/\\s+/g).forEach(function(klass){\n          if (!$(this).hasClass(klass)) classList.push(klass)\n        }, this)\n        classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"))\n      })\n    },\n    removeClass: function(name){\n      return this.each(function(idx){\n        if (!('className' in this)) return\n        if (name === undefined) return className(this, '')\n        classList = className(this)\n        funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function(klass){\n          classList = classList.replace(classRE(klass), \" \")\n        })\n        className(this, classList.trim())\n      })\n    },\n    toggleClass: function(name, when){\n      if (!name) return this\n      return this.each(function(idx){\n        var $this = $(this), names = funcArg(this, name, idx, className(this))\n        names.split(/\\s+/g).forEach(function(klass){\n          (when === undefined ? !$this.hasClass(klass) : when) ?\n            $this.addClass(klass) : $this.removeClass(klass)\n        })\n      })\n    },\n    scrollTop: function(value){\n      if (!this.length) return\n      var hasScrollTop = 'scrollTop' in this[0]\n      if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset\n      return this.each(hasScrollTop ?\n        function(){ this.scrollTop = value } :\n        function(){ this.scrollTo(this.scrollX, value) })\n    },\n    scrollLeft: function(value){\n      if (!this.length) return\n      var hasScrollLeft = 'scrollLeft' in this[0]\n      if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset\n      return this.each(hasScrollLeft ?\n        function(){ this.scrollLeft = value } :\n        function(){ this.scrollTo(value, this.scrollY) })\n    },\n    position: function() {\n      if (!this.length) return\n\n      var elem = this[0],\n        // Get *real* offsetParent\n        offsetParent = this.offsetParent(),\n        // Get correct offsets\n        offset       = this.offset(),\n        parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset()\n\n      // Subtract element margins\n      // note: when an element has margin: auto the offsetLeft and marginLeft\n      // are the same in Safari causing offset.left to incorrectly be 0\n      offset.top  -= parseFloat( $(elem).css('margin-top') ) || 0\n      offset.left -= parseFloat( $(elem).css('margin-left') ) || 0\n\n      // Add offsetParent borders\n      parentOffset.top  += parseFloat( $(offsetParent[0]).css('border-top-width') ) || 0\n      parentOffset.left += parseFloat( $(offsetParent[0]).css('border-left-width') ) || 0\n\n      // Subtract the two offsets\n      return {\n        top:  offset.top  - parentOffset.top,\n        left: offset.left - parentOffset.left\n      }\n    },\n    offsetParent: function() {\n      return this.map(function(){\n        var parent = this.offsetParent || document.body\n        while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\")\n          parent = parent.offsetParent\n        return parent\n      })\n    }\n  }\n\n  // for now\n  $.fn.detach = $.fn.remove\n\n  // Generate the `width` and `height` functions\n  ;['width', 'height'].forEach(function(dimension){\n    var dimensionProperty =\n      dimension.replace(/./, function(m){ return m[0].toUpperCase() })\n\n    $.fn[dimension] = function(value){\n      var offset, el = this[0]\n      if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] :\n        isDocument(el) ? el.documentElement['scroll' + dimensionProperty] :\n        (offset = this.offset()) && offset[dimension]\n      else return this.each(function(idx){\n        el = $(this)\n        el.css(dimension, funcArg(this, value, idx, el[dimension]()))\n      })\n    }\n  })\n\n  function traverseNode(node, fun) {\n    fun(node)\n    for (var i = 0, len = node.childNodes.length; i < len; i++)\n      traverseNode(node.childNodes[i], fun)\n  }\n\n  // Generate the `after`, `prepend`, `before`, `append`,\n  // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n  adjacencyOperators.forEach(function(operator, operatorIndex) {\n    var inside = operatorIndex % 2 //=> prepend, append\n\n    $.fn[operator] = function(){\n      // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n      var argType, nodes = $.map(arguments, function(arg) {\n            var arr = []\n            argType = type(arg)\n            if (argType == \"array\") {\n              arg.forEach(function(el) {\n                if (el.nodeType !== undefined) return arr.push(el)\n                else if ($.zepto.isZ(el)) return arr = arr.concat(el.get())\n                arr = arr.concat(zepto.fragment(el))\n              })\n              return arr\n            }\n            return argType == \"object\" || arg == null ?\n              arg : zepto.fragment(arg)\n          }),\n          parent, copyByClone = this.length > 1\n      if (nodes.length < 1) return this\n\n      return this.each(function(_, target){\n        parent = inside ? target : target.parentNode\n\n        // convert all methods to a \"before\" operation\n        target = operatorIndex == 0 ? target.nextSibling :\n                 operatorIndex == 1 ? target.firstChild :\n                 operatorIndex == 2 ? target :\n                 null\n\n        var parentInDocument = $.contains(document.documentElement, parent)\n\n        nodes.forEach(function(node){\n          if (copyByClone) node = node.cloneNode(true)\n          else if (!parent) return $(node).remove()\n\n          parent.insertBefore(node, target)\n          if (parentInDocument) traverseNode(node, function(el){\n            if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\n               (!el.type || el.type === 'text/javascript') && !el.src){\n              var target = el.ownerDocument ? el.ownerDocument.defaultView : window\n              target['eval'].call(target, el.innerHTML)\n            }\n          })\n        })\n      })\n    }\n\n    // after    => insertAfter\n    // prepend  => prependTo\n    // before   => insertBefore\n    // append   => appendTo\n    $.fn[inside ? operator+'To' : 'insert'+(operatorIndex ? 'Before' : 'After')] = function(html){\n      $(html)[operator](this)\n      return this\n    }\n  })\n\n  zepto.Z.prototype = Z.prototype = $.fn\n\n  // Export internal API functions in the `$.zepto` namespace\n  zepto.uniq = uniq\n  zepto.deserializeValue = deserializeValue\n  $.zepto = zepto\n\n  return $\n})()\n\nmodule.exports = Zepto;\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHBcXHNjcmlwdHMuYmFiZWxcXGNvbnRlbnRzY3JpcHQuanMiLCJhcHBcXHNjcmlwdHMuYmFiZWxcXGh0bWxUb0pzb24uanMiLCJhcHBcXHNjcmlwdHMuYmFiZWxcXHhoci5qcyIsImFwcFxcc2NyaXB0cy5iYWJlbFxcemVwdG8uanMiLCJub2RlX21vZHVsZXMvemVwdG8tbW9kdWxlcy9hamF4LmpzIiwibm9kZV9tb2R1bGVzL3plcHRvLW1vZHVsZXMvY2FsbGJhY2tzLmpzIiwibm9kZV9tb2R1bGVzL3plcHRvLW1vZHVsZXMvZGVmZXJyZWQuanMiLCJub2RlX21vZHVsZXMvemVwdG8tbW9kdWxlcy9ldmVudC5qcyIsIm5vZGVfbW9kdWxlcy96ZXB0by1tb2R1bGVzL3plcHRvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBRUE7Ozs7QUFDQTs7Ozs7O0FBRUEsT0FBTyxPQUFQLENBQWUsU0FBZixDQUF5QixXQUF6QixDQUFxQyxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQWtCLFlBQWxCLEVBQW1DO0FBQ3RFLE1BQUksUUFBUSxPQUFSLEtBQW9CLGFBQXhCLEVBQXVDOztBQUVyQyxRQUFNLGFBQWEsMEJBQW5CO0FBQ0EsUUFBTSxXQUFVLFdBQVcsS0FBWCxFQUFoQjtBQUNBLFlBQVEsR0FBUixDQUFZLFFBQVo7QUFDQSxrQkFBSSxJQUFKLENBQVMsUUFBVCxFQUNDLElBREQsQ0FDTSxVQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsR0FBZixFQUF1QjtBQUMzQixjQUFRLEdBQVIsQ0FBWSxRQUFaO0FBQ0EsYUFBTyxPQUFQLENBQWUsV0FBZixDQUEyQixFQUFFLFNBQVMsYUFBWCxFQUEzQjtBQUNELEtBSkQsRUFLQyxJQUxELENBS00sVUFBQyxHQUFELEVBQU0sU0FBTixFQUFpQixLQUFqQixFQUEyQjtBQUMvQixjQUFRLEdBQVIsQ0FBWSxRQUFaO0FBQ0EsYUFB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdlJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCdcclxuXHJcbmltcG9ydCBIdG1sVG9Kc29uIGZyb20gJy4vaHRtbFRvSnNvbidcclxuaW1wb3J0IHhociBmcm9tICcuL3hocidcclxuXHJcbmNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcigocmVxdWVzdCwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpID0+IHtcclxuICBpZiAocmVxdWVzdC5tZXNzYWdlID09PSAnc2NyYXBlIHVzZXInKSB7XHJcblxyXG4gICAgY29uc3QgaHRtbFRvSnNvbiA9IG5ldyBIdG1sVG9Kc29uKClcclxuICAgIGNvbnN0IHByb2ZpbGUgPSBodG1sVG9Kc29uLnBhcnNlKClcclxuICAgIGNvbnNvbGUubG9nKHByb2ZpbGUpO1xyXG4gICAgeGhyLnNlbmQocHJvZmlsZSlcclxuICAgIC5kb25lKChkYXRhLCBzdGF0dXMsIHhocikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnZG9uZSAhJylcclxuICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoeyBtZXNzYWdlOiAnY2hhbmdlIGljb24nIH0pXHJcbiAgICB9KVxyXG4gICAgLmZhaWwoKHhociwgZXJyb3JUeXBlLCBlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnZmFpbCAhJylcclxuICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoeyBtZXNzYWdlOiAnY2hhbmdlIGljb24nIH0pXHJcbiAgICB9KVxyXG4gIH1cclxufSk7XHJcblxyXG5jaHJvbWUuZXh0ZW5zaW9uLm9uUmVxdWVzdC5hZGRMaXN0ZW5lcihcclxuICBmdW5jdGlvbihyZXF1ZXN0LCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xyXG4gICAgY29uc3QgaHRtbFRvSnNvbiA9IG5ldyBIdG1sVG9Kc29uKClcclxuICAgIGNvbnN0IHByb2ZpbGUgPSBodG1sVG9Kc29uLnBhcnNlKClcclxuICAgIHNlbmRSZXNwb25zZSh7Y291bnRlcjogcHJvZmlsZX0pO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgdmFyIGluc2VydGVkTm9kZXMgPSBbXTtcclxuICB2YXIgcHJvZmlsZT0nJztcclxudmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgY29uc29sZS5sb2coJ3J1bicpO1xyXG4gICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgIGlmKG11dGF0aW9uLnRhcmdldC5jbGFzc05hbWU9PSdwdi1wcm9maWxlLXNlY3Rpb24gZXhwZXJpZW5jZS1zZWN0aW9uJylcclxuICAgICAge1xyXG4gICAgICBjaHJvbWUuZXh0ZW5zaW9uLm9uUmVxdWVzdC5hZGRMaXN0ZW5lcihcclxuICAgICAgICAgIGZ1bmN0aW9uKHJlcXVlc3QsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGh0bWxUb0pzb24gPSBuZXcgSHRtbFRvSnNvbigpXHJcbiAgICAgICAgICAgIHZhciBwcm9maWxlID0gaHRtbFRvSnNvbi5wYXJzZSgpXHJcbiAgICAgICAgICAgIHNlbmRSZXNwb25zZSh7Y291bnRlcjogcHJvZmlsZX0pO1xyXG4gICAgICAgICAgICBpZihwcm9maWxlLmJhY2tncm91bmRFeHBlcmllbmNlIT1udWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvZmlsZSk7XHJcbiAgICAgICAgICAgIC8vIGxhdGVyLCB5b3UgY2FuIHN0b3Agb2JzZXJ2aW5nXHJcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vIH1cclxuICAgLy8gcmV0dXJuIGZhbHNlO1xyXG4gIH0pXHJcbn0pO1xyXG5vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LCB7XHJcbiAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10sXHJcbiAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICBjaGFyYWN0ZXJEYXRhOiBmYWxzZSxcclxuICAgIHN1YnRyZWU6dHJ1ZVxyXG59KTtcclxuLy8gU3RvcHMgdGhlIE11dGF0aW9uT2JzZXJ2ZXIgZnJvbSBsaXN0ZW5pbmcgZm9yIGNoYW5nZXMuXHJcbmNvbnNvbGUubG9nKGluc2VydGVkTm9kZXMubGVuZ3RoKTtcclxuaWYoaW5zZXJ0ZWROb2Rlcy5sZW5ndGg+MClcclxue1xyXG5vYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbn1cclxuIiwiaW1wb3J0ICQgZnJvbSAnLi96ZXB0byc7XHJcblxyXG5jbGFzcyBIdG1sVG9Kc29uIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuJHZjYXJkID0gJCgnLnZjYXJkJylcclxuICAgIHRoaXMuJHByb2ZpbGVCYWNrZ3JvdW5kID0gJCgnLnB2LXByb2ZpbGUtc2VjdGlvbiBleHBlcmllbmNlLXNlY3Rpb24nKVxyXG4gIH1cclxuXHJcbiAgLy8gVkNBUkRcclxuXHJcbiAgZnVsbG5hbWUoKSB7XHJcbiAgICByZXR1cm4gJCgnLnB2LXRvcC1jYXJkLXNlY3Rpb25fX25hbWUnKS50ZXh0KClcclxuICB9XHJcblxyXG4gIHRpdGxlKCkge1xyXG4gICAgcmV0dXJuICQoJy5wdi10b3AtY2FyZC1zZWN0aW9uX19oZWFkbGluZScpLnRleHQoKVxyXG4gIH1cclxuXHJcbiAgbG9jYWxpdHkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy4kdmNhcmQuZmluZCgnLmxvY2FsaXR5JykudGV4dCgpXHJcbiAgfVxyXG5cclxuICBpbmR1c3RyeSgpIHtcclxuICAgIHJldHVybiB0aGlzLiR2Y2FyZC5maW5kKCcuaW5kdXN0cnknKS50ZXh0KClcclxuICB9XHJcblxyXG4gIHBpY3R1cmUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy4kdmNhcmQuZmluZCgnLnByb2ZpbGUtcGljdHVyZSBpbWcnKS5hdHRyKCdzcmMnKVxyXG4gIH1cclxuXHJcbiAgLy8gUFJPRklMRSBCQUNLR1JPVU5EXHJcbiAgIFxyXG4gIGRlc2NyaXB0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuJHByb2ZpbGVCYWNrZ3JvdW5kLmZpbmQoJy5kZXNjcmlwdGlvbicpLnRleHQoKVxyXG4gIH1cclxuICBsb2NhdGlvbigpe1xyXG4gICAgcmV0dXJuICQoJy5wdi10b3AtY2FyZC1zZWN0aW9uX19sb2NhdGlvbicpLnRleHQoKVxyXG4gIH1cclxuXHJcbiAgYmFja2dyb3VuZEV4cGVyaWVuY2UoKSB7XHJcbiAgICB2YXIgJGRvY3VtZW50ID0gJCgnLnB2LXByb2ZpbGUtc2VjdGlvbi5leHBlcmllbmNlLXNlY3Rpb24gPiB1bCcpWzBdLmNoaWxkcmVuO1xyXG4gICAgdmFyIHJldHVyblZhbHVlID0ge307XHJcbiAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgIHJldHVyblZhbHVlLml0ZW1zID0gaXRlbXM7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8ICRkb2N1bWVudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgJGJja2V4cCA9ICRkb2N1bWVudFtpXTsgIFxyXG4gICAgICBjb25zdCByb2xlID0gJGJja2V4cC5xdWVyeVNlbGVjdG9yQWxsKCdoMycpWzBdLmlubmVyVGV4dFxyXG4gICAgICB2YXIgZHVyYXRpb24gPSAkYmNrZXhwLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3B2LWVudGl0eV9fZGF0ZS1yYW5nZScpWzBdLmlubmVyVGV4dDtcclxuICAgICAgdmFyIGNvbXBhbnlOYW1lID0gJGJja2V4cC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwdi1lbnRpdHlfX3NlY29uZGFyeS10aXRsZScpWzBdLmlubmVyVGV4dFxyXG4gICAgICB2YXIgaXRlbSA9IHsnZHVyYXRpb24nOmR1cmF0aW9uLCduYW1lJzpjb21wYW55TmFtZSwncm9sZSc6cm9sZX1cclxuICAgICAgcmV0dXJuVmFsdWUuaXRlbXMucHVzaChpdGVtKTsgICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xyXG4gIH1cclxuXHJcbiAgY291cnNlcygpe1xyXG4gICAgaWYoICQoJy5hY2NvcmRpb24tcGFuZWwucHYtcHJvZmlsZS1zZWN0aW9uLnB2LWFjY29tcGxpc2htZW50cy1ibG9jay5jb3Vyc2VzID4gZGl2ID4gZGl2ID4gdWwnKVswXSE9dW5kZWZpbmVkfHwgJCgnLmFjY29yZGlvbi1wYW5lbC5wdi1wcm9maWxlLXNlY3Rpb24ucHYtYWNjb21wbGlzaG1lbnRzLWJsb2NrLmNvdXJzZXMgPiBkaXYgPiBkaXYgPiB1bCcpWzBdIT1udWxsKVxyXG4gICAge1xyXG4gICAgdmFyICRkb2N1bWVudCA9ICQoJy5hY2NvcmRpb24tcGFuZWwucHYtcHJvZmlsZS1zZWN0aW9uLnB2LWFjY29tcGxpc2htZW50cy1ibG9jay5jb3Vyc2VzID4gZGl2ID4gZGl2ID4gdWwnKVswXS5jaGlsZHJlbjtcclxuICAgIHZhciByZXR1cm5WYWx1ZSA9IHt9O1xyXG4gICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICByZXR1cm5WYWx1ZS5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAkZG9jdW1lbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGNvdXJzZU5hbWUgPSAkZG9jdW1lbnRbaV0uaW5uZXJUZXh0O1xyXG4gICAgICB2YXIgY291cnNlID0geydjb3Vyc2VuYW1lJzpjb3Vyc2VOYW1lfVxyXG4gICAgICByZXR1cm5WYWx1ZS5pdGVtcy5wdXNoKGNvdXJzZSk7ICAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcclxuICB9XHJcbiAgZWxzZXtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG4gIGxhbmd1YWdlcygpe1xyXG4gICAgaWYoJCgnLmFjY29yZGlvbi1wYW5lbC5wdi1wcm9maWxlLXNlY3Rpb24ucHYtYWNjb21wbGlzaG1lbnRzLWJsb2NrLmxhbmd1YWdlcyA+IGRpdiA+IGRpdiA+IHVsJylbMF0hPXVuZGVmaW5lZCl7XHJcbiAgICB2YXIgJGRvY3VtZW50ID0gJCgnLmFjY29yZGlvbi1wYW5lbC5wdi1wcm9maWxlLXNlY3Rpb24ucHYtYWNjb21wbGlzaG1lbnRzLWJsb2NrLmxhbmd1YWdlcyA+IGRpdiA+IGRpdiA+IHVsJylbMF0uY2hpbGRyZW47XHJcbiAgICB2YXIgcmV0dXJuVmFsdWUgPSB7fTtcclxuICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgcmV0dXJuVmFsdWUuaXRlbXMgPSBpdGVtcztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgJGRvY3VtZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBsYW5ndWFnZU5hbWUgPSAkZG9jdW1lbnRbaV0uaW5uZXJUZXh0O1xyXG4gICAgICB2YXIgbGFuZ3VhZ2UgPSB7J2xhbmd1YWdlTmFtZSc6bGFuZ3VhZ2VOYW1lfVxyXG4gICAgICByZXR1cm5WYWx1ZS5pdGVtcy5wdXNoKGxhbmd1YWdlKTsgICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xyXG4gIH1cclxuICBlbHNle1xyXG4gICAgY29uc29sZS5sb2coJ05VTEwnKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuICBza2lsbHMoKSB7XHJcbiAgICBjb25zdCAkc2tpbGxzID0gdGhpcy4kcHJvZmlsZUJhY2tncm91bmQuZmluZCgnLmVuZG9yc2UtaXRlbS1uYW1lLXRleHQnKVxyXG4gICAgcmV0dXJuICRza2lsbHMubWFwKChpLCBzKSA9PiAkKHMpLnRleHQoKSkudG9BcnJheSgpXHJcbiAgfVxyXG5cclxuICBiYWNrZ3JvdW5kRWR1Y2F0aW9uKCkge1xyXG4gICAgY29uc3QgJGJhY2tncm91bmRFZHVjYXRpb24gPSB0aGlzLiRwcm9maWxlQmFja2dyb3VuZC5maW5kKCcuYmFja2dyb3VuZC1lZHVjYXRpb24nKVxyXG4gICAgY29uc3QgJGVkdWNhdGlvbnMgPSAkYmFja2dyb3VuZEVkdWNhdGlvbi5maW5kKCcuZWR1Y2F0aW9uJylcclxuXHJcbiAgICByZXR1cm4gJGVkdWNhdGlvbnMubWFwKChpLCBlKSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgb3JnOiAkKGUpLmZpbmQoJy5vcmcnKS50ZXh0KCksXHJcbiAgICAgICAgZGVncmVlOiAkKGUpLmZpbmQoJy5kZWdyZWUnKS50ZXh0KCksXHJcbiAgICAgICAgbWFqb3I6ICQoZSkuZmluZCgnLm1ham9yJykudGV4dCgpLFxyXG4gICAgICAgIGRhdGU6ICQoZSkuZmluZCgnLmVkdWNhdGlvbi1kYXRlJykudGV4dCgpLFxyXG4gICAgICAgIG5vdGVzOiAkKGUpLmZpbmQoJy5ub3RlcycpLnRleHQoKVxyXG4gICAgICB9XHJcbiAgICB9KS50b0FycmF5KClcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZHNcclxuICBcclxuICBwYXJzZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGZ1bGxuYW1lOiB0aGlzLmZ1bGxuYW1lKCksXHJcbiAgICAgIHRpdGxlOiB0aGlzLnRpdGxlKCksXHJcbiAgICAgIGxvY2FsaXR5OiB0aGlzLmxvY2FsaXR5KCksXHJcbiAgICAgIGluZHVzdHJ5OiB0aGlzLmluZHVzdHJ5KCksXHJcbiAgICAgIHBpY3R1cmU6IHRoaXMucGljdHVyZSgpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbigpLFxyXG4gICAgICBiYWNrZ3JvdW5kRXhwZXJpZW5jZTogdGhpcy5iYWNrZ3JvdW5kRXhwZXJpZW5jZSgpLFxyXG4gICAgICBza2lsbHM6IHRoaXMuc2tpbGxzKCksXHJcbiAgICAgIGJhY2tncm91bmRFZHVjYXRpb246IHRoaXMuYmFja2dyb3VuZEVkdWNhdGlvbigpLFxyXG4gICAgICBsb2NhdGlvbjp0aGlzLmxvY2F0aW9uKCksXHJcbiAgICAgIGNvdXJzZXM6dGhpcy5jb3Vyc2VzKCksXHJcbiAgICAgIGxhbmd1YWdlcyA6dGhpcy5sYW5ndWFnZXMoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEh0bWxUb0pzb24iLCJpbXBvcnQgJCBmcm9tICcuL3plcHRvJztcclxuXHJcbmNsYXNzIFhociB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ3VybCddLCAoaXRlbXMpID0+IHtcclxuICAgICAgdGhpcy51cmwgPSBgJHtsb2NhdGlvbi5wcm90b2NvbH0vLyR7aXRlbXMudXJsfWBcclxuICAgIH0pXHJcblxyXG4gICAgY2hyb21lLnN0b3JhZ2Uub25DaGFuZ2VkLmFkZExpc3RlbmVyKChjaGFuZ2VzLCBuYW1lc3BhY2UpID0+IHtcclxuICAgICAgY29uc3Qgc3RvcmFnZUNoYW5nZSA9IGNoYW5nZXNbJ3VybCddXHJcbiAgICAgIHRoaXMudXJsID0gYCR7bG9jYXRpb24ucHJvdG9jb2x9Ly8ke3N0b3JhZ2VDaGFuZ2UubmV3VmFsdWV9YFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHNlbmQoZGF0YSkge1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgdXJsOiB0aGlzLnVybCxcclxuICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBYaHIoKSIsImltcG9ydCAkIGZyb20gJ3plcHRvLW1vZHVsZXMvemVwdG8nXHJcbmltcG9ydCBldmVudCBmcm9tICd6ZXB0by1tb2R1bGVzL2V2ZW50J1xyXG5pbXBvcnQgYWpheCBmcm9tICd6ZXB0by1tb2R1bGVzL2FqYXgnXHJcbmltcG9ydCBkZWZlcnJlZCBmcm9tICd6ZXB0by1tb2R1bGVzL2RlZmVycmVkJ1xyXG5pbXBvcnQgY2FsbGJhY2tzIGZyb20gJ3plcHRvLW1vZHVsZXMvY2FsbGJhY2tzJ1xyXG4gXHJcbmV4cG9ydCBkZWZhdWx0ICQiLCIvLyAgICAgWmVwdG8uanNcbi8vICAgICAoYykgMjAxMC0yMDE2IFRob21hcyBGdWNoc1xuLy8gICAgIFplcHRvLmpzIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG52YXIgWmVwdG8gPSByZXF1aXJlKCcuL3plcHRvJyk7XG5cbjsoZnVuY3Rpb24oJCl7XG4gIHZhciBqc29ucElEID0gK25ldyBEYXRlKCksXG4gICAgICBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcbiAgICAgIGtleSxcbiAgICAgIG5hbWUsXG4gICAgICByc2NyaXB0ID0gLzxzY3JpcHRcXGJbXjxdKig/Oig/ITxcXC9zY3JpcHQ+KTxbXjxdKikqPFxcL3NjcmlwdD4vZ2ksXG4gICAgICBzY3JpcHRUeXBlUkUgPSAvXig/OnRleHR8YXBwbGljYXRpb24pXFwvamF2YXNjcmlwdC9pLFxuICAgICAgeG1sVHlwZVJFID0gL14oPzp0ZXh0fGFwcGxpY2F0aW9uKVxcL3htbC9pLFxuICAgICAganNvblR5cGUgPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICBodG1sVHlwZSA9ICd0ZXh0L2h0bWwnLFxuICAgICAgYmxhbmtSRSA9IC9eXFxzKiQvLFxuICAgICAgb3JpZ2luQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG5cbiAgb3JpZ2luQW5jaG9yLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuXG4gIC8vIHRyaWdnZXIgYSBjdXN0b20gZXZlbnQgYW5kIHJldHVybiBmYWxzZSBpZiBpdCB3YXMgY2FuY2VsbGVkXG4gIGZ1bmN0aW9uIHRyaWdnZXJBbmRSZXR1cm4oY29udGV4dCwgZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgdmFyIGV2ZW50ID0gJC5FdmVudChldmVudE5hbWUpXG4gICAgJChjb250ZXh0KS50cmlnZ2VyKGV2ZW50LCBkYXRhKVxuICAgIHJldHVybiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKClcbiAgfVxuXG4gIC8vIHRyaWdnZXIgYW4gQWpheCBcImdsb2JhbFwiIGV2ZW50XG4gIGZ1bmN0aW9uIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIGNvbnRleHQsIGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIGlmIChzZXR0aW5ncy5nbG9iYWwpIHJldHVybiB0cmlnZ2VyQW5kUmV0dXJuKGNvbnRleHQgfHwgZG9jdW1lbnQsIGV2ZW50TmFtZSwgZGF0YSlcbiAgfVxuXG4gIC8vIE51bWJlciBvZiBhY3RpdmUgQWpheCByZXF1ZXN0c1xuICAkLmFjdGl2ZSA9IDBcblxuICBmdW5jdGlvbiBhamF4U3RhcnQoc2V0dGluZ3MpIHtcbiAgICBpZiAoc2V0dGluZ3MuZ2xvYmFsICYmICQuYWN0aXZlKysgPT09IDApIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIG51bGwsICdhamF4U3RhcnQnKVxuICB9XG4gIGZ1bmN0aW9uIGFqYXhTdG9wKHNldHRpbmdzKSB7XG4gICAgaWYgKHNldHRpbmdzLmdsb2JhbCAmJiAhKC0tJC5hY3RpdmUpKSB0cmlnZ2VyR2xvYmFsKHNldHRpbmdzLCBudWxsLCAnYWpheFN0b3AnKVxuICB9XG5cbiAgLy8gdHJpZ2dlcnMgYW4gZXh0cmEgZ2xvYmFsIGV2ZW50IFwiYWpheEJlZm9yZVNlbmRcIiB0aGF0J3MgbGlrZSBcImFqYXhTZW5kXCIgYnV0IGNhbmNlbGFibGVcbiAgZnVuY3Rpb24gYWpheEJlZm9yZVNlbmQoeGhyLCBzZXR0aW5ncykge1xuICAgIHZhciBjb250ZXh0ID0gc2V0dGluZ3MuY29udGV4dFxuICAgIGlmIChzZXR0aW5ncy5iZWZvcmVTZW5kLmNhbGwoY29udGV4dCwgeGhyLCBzZXR0aW5ncykgPT09IGZhbHNlIHx8XG4gICAgICAgIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIGNvbnRleHQsICdhamF4QmVmb3JlU2VuZCcsIFt4aHIsIHNldHRpbmdzXSkgPT09IGZhbHNlKVxuICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgICB0cmlnZ2VyR2xvYmFsKHNldHRpbmdzLCBjb250ZXh0LCAnYWpheFNlbmQnLCBbeGhyLCBzZXR0aW5nc10pXG4gIH1cbiAgZnVuY3Rpb24gYWpheFN1Y2Nlc3MoZGF0YSwgeGhyLCBzZXR0aW5ncywgZGVmZXJyZWQpIHtcbiAgICB2YXIgY29udGV4dCA9IHNldHRpbmdzLmNvbnRleHQsIHN0YXR1cyA9ICdzdWNjZXNzJ1xuICAgIHNldHRpbmdzLnN1Y2Nlc3MuY2FsbChjb250ZXh0LCBkYXRhLCBzdGF0dXMsIHhocilcbiAgICBpZiAoZGVmZXJyZWQpIGRlZmVycmVkLnJlc29sdmVXaXRoKGNvbnRleHQsIFtkYXRhLCBzdGF0dXMsIHhocl0pXG4gICAgdHJpZ2dlckdsb2JhbChzZXR0aW5ncywgY29udGV4dCwgJ2FqYXhTdWNjZXNzJywgW3hociwgc2V0dGluZ3MsIGRhdGFdKVxuICAgIGFqYXhDb21wbGV0ZShzdGF0dXMsIHhociwgc2V0dGluZ3MpXG4gIH1cbiAgLy8gdHlwZTogXCJ0aW1lb3V0XCIsIFwiZXJyb3JcIiwgXCJhYm9ydFwiLCBcInBhcnNlcmVycm9yXCJcbiAgZnVuY3Rpb24gYWpheEVycm9yKGVycm9yLCB0eXBlLCB4aHIsIHNldHRpbmdzLCBkZWZlcnJlZCkge1xuICAgIHZhciBjb250ZXh0ID0gc2V0dGluZ3MuY29udGV4dFxuICAgIHNldHRpbmdzLmVycm9yLmNhbGwoY29udGV4dCwgeGhyLCB0eXBlLCBlcnJvcilcbiAgICBpZiAoZGVmZXJyZWQpIGRlZmVycmVkLnJlamVjdFdpdGgoY29udGV4dCwgW3hociwgdHlwZSwgZXJyb3JdKVxuICAgIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIGNvbnRleHQsICdhamF4RXJyb3InLCBbeGhyLCBzZXR0aW5ncywgZXJyb3IgfHwgdHlwZV0pXG4gICAgYWpheENvbXBsZXRlKHR5cGUsIHhociwgc2V0dGluZ3MpXG4gIH1cbiAgLy8gc3RhdHVzOiBcInN1Y2Nlc3NcIiwgXCJub3Rtb2RpZmllZFwiLCBcImVycm9yXCIsIFwidGltZW91dFwiLCBcImFib3J0XCIsIFwicGFyc2VyZXJyb3JcIlxuICBmdW5jdGlvbiBhamF4Q29tcGxldGUoc3RhdHVzLCB4aHIsIHNldHRpbmdzKSB7XG4gICAgdmFyIGNvbnRleHQgPSBzZXR0aW5ncy5jb250ZXh0XG4gICAgc2V0dGluZ3MuY29tcGxldGUuY2FsbChjb250ZXh0LCB4aHIsIHN0YXR1cylcbiAgICB0cmlnZ2VyR2xvYmFsKHNldHRpbmdzLCBjb250ZXh0LCAnYWpheENvbXBsZXRlJywgW3hociwgc2V0dGluZ3NdKVxuICAgIGFqYXhTdG9wKHNldHRpbmdzKVxuICB9XG5cbiAgZnVuY3Rpb24gYWpheERhdGFGaWx0ZXIoZGF0YSwgdHlwZSwgc2V0dGluZ3MpIHtcbiAgICBpZiAoc2V0dGluZ3MuZGF0YUZpbHRlciA9PSBlbXB0eSkgcmV0dXJuIGRhdGFcbiAgICB2YXIgY29udGV4dCA9IHNldHRpbmdzLmNvbnRleHRcbiAgICByZXR1cm4gc2V0dGluZ3MuZGF0YUZpbHRlci5jYWxsKGNvbnRleHQsIGRhdGEsIHR5cGUpXG4gIH1cblxuICAvLyBFbXB0eSBmdW5jdGlvbiwgdXNlZCBhcyBkZWZhdWx0IGNhbGxiYWNrXG4gIGZ1bmN0aW9uIGVtcHR5KCkge31cblxuICAkLmFqYXhKU09OUCA9IGZ1bmN0aW9uKG9wdGlvbnMsIGRlZmVycmVkKXtcbiAgICBpZiAoISgndHlwZScgaW4gb3B0aW9ucykpIHJldHVybiAkLmFqYXgob3B0aW9ucylcblxuICAgIHZhciBfY2FsbGJhY2tOYW1lID0gb3B0aW9ucy5qc29ucENhbGxiYWNrLFxuICAgICAgY2FsbGJhY2tOYW1lID0gKCQuaXNGdW5jdGlvbihfY2FsbGJhY2tOYW1lKSA/XG4gICAgICAgIF9jYWxsYmFja05hbWUoKSA6IF9jYWxsYmFja05hbWUpIHx8ICgnWmVwdG8nICsgKGpzb25wSUQrKykpLFxuICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JyksXG4gICAgICBvcmlnaW5hbENhbGxiYWNrID0gd2luZG93W2NhbGxiYWNrTmFtZV0sXG4gICAgICByZXNwb25zZURhdGEsXG4gICAgICBhYm9ydCA9IGZ1bmN0aW9uKGVycm9yVHlwZSkge1xuICAgICAgICAkKHNjcmlwdCkudHJpZ2dlckhhbmRsZXIoJ2Vycm9yJywgZXJyb3JUeXBlIHx8ICdhYm9ydCcpXG4gICAgICB9LFxuICAgICAgeGhyID0geyBhYm9ydDogYWJvcnQgfSwgYWJvcnRUaW1lb3V0XG5cbiAgICBpZiAoZGVmZXJyZWQpIGRlZmVycmVkLnByb21pc2UoeGhyKVxuXG4gICAgJChzY3JpcHQpLm9uKCdsb2FkIGVycm9yJywgZnVuY3Rpb24oZSwgZXJyb3JUeXBlKXtcbiAgICAgIGNsZWFyVGltZW91dChhYm9ydFRpbWVvdXQpXG4gICAgICAkKHNjcmlwdCkub2ZmKCkucmVtb3ZlKClcblxuICAgICAgaWYgKGUudHlwZSA9PSAnZXJyb3InIHx8ICFyZXNwb25zZURhdGEpIHtcbiAgICAgICAgYWpheEVycm9yKG51bGwsIGVycm9yVHlwZSB8fCAnZXJyb3InLCB4aHIsIG9wdGlvbnMsIGRlZmVycmVkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWpheFN1Y2Nlc3MocmVzcG9uc2VEYXRhWzBdLCB4aHIsIG9wdGlvbnMsIGRlZmVycmVkKVxuICAgICAgfVxuXG4gICAgICB3aW5kb3dbY2FsbGJhY2tOYW1lXSA9IG9yaWdpbmFsQ2FsbGJhY2tcbiAgICAgIGlmIChyZXNwb25zZURhdGEgJiYgJC5pc0Z1bmN0aW9uKG9yaWdpbmFsQ2FsbGJhY2spKVxuICAgICAgICBvcmlnaW5hbENhbGxiYWNrKHJlc3BvbnNlRGF0YVswXSlcblxuICAgICAgb3JpZ2luYWxDYWxsYmFjayA9IHJlc3BvbnNlRGF0YSA9IHVuZGVmaW5lZFxuICAgIH0pXG5cbiAgICBpZiAoYWpheEJlZm9yZVNlbmQoeGhyLCBvcHRpb25zKSA9PT0gZmFsc2UpIHtcbiAgICAgIGFib3J0KCdhYm9ydCcpXG4gICAgICByZXR1cm4geGhyXG4gICAgfVxuXG4gICAgd2luZG93W2NhbGxiYWNrTmFtZV0gPSBmdW5jdGlvbigpe1xuICAgICAgcmVzcG9uc2VEYXRhID0gYXJndW1lbnRzXG4gICAgfVxuXG4gICAgc2NyaXB0LnNyYyA9IG9wdGlvbnMudXJsLnJlcGxhY2UoL1xcPyguKyk9XFw/LywgJz8kMT0nICsgY2FsbGJhY2tOYW1lKVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KVxuXG4gICAgaWYgKG9wdGlvbnMudGltZW91dCA+IDApIGFib3J0VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIGFib3J0KCd0aW1lb3V0JylcbiAgICB9LCBvcHRpb25zLnRpbWVvdXQpXG5cbiAgICByZXR1cm4geGhyXG4gIH1cblxuICAkLmFqYXhTZXR0aW5ncyA9IHtcbiAgICAvLyBEZWZhdWx0IHR5cGUgb2YgcmVxdWVzdFxuICAgIHR5cGU6ICdHRVQnLFxuICAgIC8vIENhbGxiYWNrIHRoYXQgaXMgZXhlY3V0ZWQgYmVmb3JlIHJlcXVlc3RcbiAgICBiZWZvcmVTZW5kOiBlbXB0eSxcbiAgICAvLyBDYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzXG4gICAgc3VjY2VzczogZW1wdHksXG4gICAgLy8gQ2FsbGJhY2sgdGhhdCBpcyBleGVjdXRlZCB0aGUgdGhlIHNlcnZlciBkcm9wcyBlcnJvclxuICAgIGVycm9yOiBlbXB0eSxcbiAgICAvLyBDYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIG9uIHJlcXVlc3QgY29tcGxldGUgKGJvdGg6IGVycm9yIGFuZCBzdWNjZXNzKVxuICAgIGNvbXBsZXRlOiBlbXB0eSxcbiAgICAvLyBUaGUgY29udGV4dCBmb3IgdGhlIGNhbGxiYWNrc1xuICAgIGNvbnRleHQ6IG51bGwsXG4gICAgLy8gV2hldGhlciB0byB0cmlnZ2VyIFwiZ2xvYmFsXCIgQWpheCBldmVudHNcbiAgICBnbG9iYWw6IHRydWUsXG4gICAgLy8gVHJhbnNwb3J0XG4gICAgeGhyOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpXG4gICAgfSxcbiAgICAvLyBNSU1FIHR5cGVzIG1hcHBpbmdcbiAgICAvLyBJSVMgcmV0dXJucyBKYXZhc2NyaXB0IGFzIFwiYXBwbGljYXRpb24veC1qYXZhc2NyaXB0XCJcbiAgICBhY2NlcHRzOiB7XG4gICAgICBzY3JpcHQ6ICd0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdCcsXG4gICAgICBqc29uOiAgIGpzb25UeXBlLFxuICAgICAgeG1sOiAgICAnYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCcsXG4gICAgICBodG1sOiAgIGh0bWxUeXBlLFxuICAgICAgdGV4dDogICAndGV4dC9wbGFpbidcbiAgICB9LFxuICAgIC8vIFdoZXRoZXIgdGhlIHJlcXVlc3QgaXMgdG8gYW5vdGhlciBkb21haW5cbiAgICBjcm9zc0RvbWFpbjogZmFsc2UsXG4gICAgLy8gRGVmYXVsdCB0aW1lb3V0XG4gICAgdGltZW91dDogMCxcbiAgICAvLyBXaGV0aGVyIGRhdGEgc2hvdWxkIGJlIHNlcmlhbGl6ZWQgdG8gc3RyaW5nXG4gICAgcHJvY2Vzc0RhdGE6IHRydWUsXG4gICAgLy8gV2hldGhlciB0aGUgYnJvd3NlciBzaG91bGQgYmUgYWxsb3dlZCB0byBjYWNoZSBHRVQgcmVzcG9uc2VzXG4gICAgY2FjaGU6IHRydWUsXG4gICAgLy9Vc2VkIHRvIGhhbmRsZSB0aGUgcmF3IHJlc3BvbnNlIGRhdGEgb2YgWE1MSHR0cFJlcXVlc3QuXG4gICAgLy9UaGlzIGlzIGEgcHJlLWZpbHRlcmluZyBmdW5jdGlvbiB0byBzYW5pdGl6ZSB0aGUgcmVzcG9uc2UuXG4gICAgLy9UaGUgc2FuaXRpemVkIHJlc3BvbnNlIHNob3VsZCBiZSByZXR1cm5lZFxuICAgIGRhdGFGaWx0ZXI6IGVtcHR5XG4gIH1cblxuICBmdW5jdGlvbiBtaW1lVG9EYXRhVHlwZShtaW1lKSB7XG4gICAgaWYgKG1pbWUpIG1pbWUgPSBtaW1lLnNwbGl0KCc7JywgMilbMF1cbiAgICByZXR1cm4gbWltZSAmJiAoIG1pbWUgPT0gaHRtbFR5cGUgPyAnaHRtbCcgOlxuICAgICAgbWltZSA9PSBqc29uVHlwZSA/ICdqc29uJyA6XG4gICAgICBzY3JpcHRUeXBlUkUudGVzdChtaW1lKSA/ICdzY3JpcHQnIDpcbiAgICAgIHhtbFR5cGVSRS50ZXN0KG1pbWUpICYmICd4bWwnICkgfHwgJ3RleHQnXG4gIH1cblxuICBmdW5jdGlvbiBhcHBlbmRRdWVyeSh1cmwsIHF1ZXJ5KSB7XG4gICAgaWYgKHF1ZXJ5ID09ICcnKSByZXR1cm4gdXJsXG4gICAgcmV0dXJuICh1cmwgKyAnJicgKyBxdWVyeSkucmVwbGFjZSgvWyY/XXsxLDJ9LywgJz8nKVxuICB9XG5cbiAgLy8gc2VyaWFsaXplIHBheWxvYWQgYW5kIGFwcGVuZCBpdCB0byB0aGUgVVJMIGZvciBHRVQgcmVxdWVzdHNcbiAgZnVuY3Rpb24gc2VyaWFsaXplRGF0YShvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMucHJvY2Vzc0RhdGEgJiYgb3B0aW9ucy5kYXRhICYmICQudHlwZShvcHRpb25zLmRhdGEpICE9IFwic3RyaW5nXCIpXG4gICAgICBvcHRpb25zLmRhdGEgPSAkLnBhcmFtKG9wdGlvbnMuZGF0YSwgb3B0aW9ucy50cmFkaXRpb25hbClcbiAgICBpZiAob3B0aW9ucy5kYXRhICYmICghb3B0aW9ucy50eXBlIHx8IG9wdGlvbnMudHlwZS50b1VwcGVyQ2FzZSgpID09ICdHRVQnIHx8ICdqc29ucCcgPT0gb3B0aW9ucy5kYXRhVHlwZSkpXG4gICAgICBvcHRpb25zLnVybCA9IGFwcGVuZFF1ZXJ5KG9wdGlvbnMudXJsLCBvcHRpb25zLmRhdGEpLCBvcHRpb25zLmRhdGEgPSB1bmRlZmluZWRcbiAgfVxuXG4gICQuYWpheCA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zIHx8IHt9KSxcbiAgICAgICAgZGVmZXJyZWQgPSAkLkRlZmVycmVkICYmICQuRGVmZXJyZWQoKSxcbiAgICAgICAgdXJsQW5jaG9yLCBoYXNoSW5kZXhcbiAgICBmb3IgKGtleSBpbiAkLmFqYXhTZXR0aW5ncykgaWYgKHNldHRpbmdzW2tleV0gPT09IHVuZGVmaW5lZCkgc2V0dGluZ3Nba2V5XSA9ICQuYWpheFNldHRpbmdzW2tleV1cblxuICAgIGFqYXhTdGFydChzZXR0aW5ncylcblxuICAgIGlmICghc2V0dGluZ3MuY3Jvc3NEb21haW4pIHtcbiAgICAgIHVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgICAgdXJsQW5jaG9yLmhyZWYgPSBzZXR0aW5ncy51cmxcbiAgICAgIC8vIGNsZWFucyB1cCBVUkwgZm9yIC5ocmVmIChJRSBvbmx5KSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWRyb2JieS96ZXB0by9wdWxsLzEwNDlcbiAgICAgIHVybEFuY2hvci5ocmVmID0gdXJsQW5jaG9yLmhyZWZcbiAgICAgIHNldHRpbmdzLmNyb3NzRG9tYWluID0gKG9yaWdpbkFuY2hvci5wcm90b2NvbCArICcvLycgKyBvcmlnaW5BbmNob3IuaG9zdCkgIT09ICh1cmxBbmNob3IucHJvdG9jb2wgKyAnLy8nICsgdXJsQW5jaG9yLmhvc3QpXG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncy51cmwpIHNldHRpbmdzLnVybCA9IHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpXG4gICAgaWYgKChoYXNoSW5kZXggPSBzZXR0aW5ncy51cmwuaW5kZXhPZignIycpKSA+IC0xKSBzZXR0aW5ncy51cmwgPSBzZXR0aW5ncy51cmwuc2xpY2UoMCwgaGFzaEluZGV4KVxuICAgIHNlcmlhbGl6ZURhdGEoc2V0dGluZ3MpXG5cbiAgICB2YXIgZGF0YVR5cGUgPSBzZXR0aW5ncy5kYXRhVHlwZSwgaGFzUGxhY2Vob2xkZXIgPSAvXFw/Lis9XFw/Ly50ZXN0KHNldHRpbmdzLnVybClcbiAgICBpZiAoaGFzUGxhY2Vob2xkZXIpIGRhdGFUeXBlID0gJ2pzb25wJ1xuXG4gICAgaWYgKHNldHRpbmdzLmNhY2hlID09PSBmYWxzZSB8fCAoXG4gICAgICAgICAoIW9wdGlvbnMgfHwgb3B0aW9ucy5jYWNoZSAhPT0gdHJ1ZSkgJiZcbiAgICAgICAgICgnc2NyaXB0JyA9PSBkYXRhVHlwZSB8fCAnanNvbnAnID09IGRhdGFUeXBlKVxuICAgICAgICApKVxuICAgICAgc2V0dGluZ3MudXJsID0gYXBwZW5kUXVlcnkoc2V0dGluZ3MudXJsLCAnXz0nICsgRGF0ZS5ub3coKSlcblxuICAgIGlmICgnanNvbnAnID09IGRhdGFUeXBlKSB7XG4gICAgICBpZiAoIWhhc1BsYWNlaG9sZGVyKVxuICAgICAgICBzZXR0aW5ncy51cmwgPSBhcHBlbmRRdWVyeShzZXR0aW5ncy51cmwsXG4gICAgICAgICAgc2V0dGluZ3MuanNvbnAgPyAoc2V0dGluZ3MuanNvbnAgKyAnPT8nKSA6IHNldHRpbmdzLmpzb25wID09PSBmYWxzZSA/ICcnIDogJ2NhbGxiYWNrPT8nKVxuICAgICAgcmV0dXJuICQuYWpheEpTT05QKHNldHRpbmdzLCBkZWZlcnJlZClcbiAgICB9XG5cbiAgICB2YXIgbWltZSA9IHNldHRpbmdzLmFjY2VwdHNbZGF0YVR5cGVdLFxuICAgICAgICBoZWFkZXJzID0geyB9LFxuICAgICAgICBzZXRIZWFkZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgeyBoZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gPSBbbmFtZSwgdmFsdWVdIH0sXG4gICAgICAgIHByb3RvY29sID0gL14oW1xcdy1dKzopXFwvXFwvLy50ZXN0KHNldHRpbmdzLnVybCkgPyBSZWdFeHAuJDEgOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wsXG4gICAgICAgIHhociA9IHNldHRpbmdzLnhocigpLFxuICAgICAgICBuYXRpdmVTZXRIZWFkZXIgPSB4aHIuc2V0UmVxdWVzdEhlYWRlcixcbiAgICAgICAgYWJvcnRUaW1lb3V0XG5cbiAgICBpZiAoZGVmZXJyZWQpIGRlZmVycmVkLnByb21pc2UoeGhyKVxuXG4gICAgaWYgKCFzZXR0aW5ncy5jcm9zc0RvbWFpbikgc2V0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0JylcbiAgICBzZXRIZWFkZXIoJ0FjY2VwdCcsIG1pbWUgfHwgJyovKicpXG4gICAgaWYgKG1pbWUgPSBzZXR0aW5ncy5taW1lVHlwZSB8fCBtaW1lKSB7XG4gICAgICBpZiAobWltZS5pbmRleE9mKCcsJykgPiAtMSkgbWltZSA9IG1pbWUuc3BsaXQoJywnLCAyKVswXVxuICAgICAgeGhyLm92ZXJyaWRlTWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUobWltZSlcbiAgICB9XG4gICAgaWYgKHNldHRpbmdzLmNvbnRlbnRUeXBlIHx8IChzZXR0aW5ncy5jb250ZW50VHlwZSAhPT0gZmFsc2UgJiYgc2V0dGluZ3MuZGF0YSAmJiBzZXR0aW5ncy50eXBlLnRvVXBwZXJDYXNlKCkgIT0gJ0dFVCcpKVxuICAgICAgc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCBzZXR0aW5ncy5jb250ZW50VHlwZSB8fCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJylcblxuICAgIGlmIChzZXR0aW5ncy5oZWFkZXJzKSBmb3IgKG5hbWUgaW4gc2V0dGluZ3MuaGVhZGVycykgc2V0SGVhZGVyKG5hbWUsIHNldHRpbmdzLmhlYWRlcnNbbmFtZV0pXG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIgPSBzZXRIZWFkZXJcblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGVtcHR5XG4gICAgICAgIGNsZWFyVGltZW91dChhYm9ydFRpbWVvdXQpXG4gICAgICAgIHZhciByZXN1bHQsIGVycm9yID0gZmFsc2VcbiAgICAgICAgaWYgKCh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB8fCB4aHIuc3RhdHVzID09IDMwNCB8fCAoeGhyLnN0YXR1cyA9PSAwICYmIHByb3RvY29sID09ICdmaWxlOicpKSB7XG4gICAgICAgICAgZGF0YVR5cGUgPSBkYXRhVHlwZSB8fCBtaW1lVG9EYXRhVHlwZShzZXR0aW5ncy5taW1lVHlwZSB8fCB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ2NvbnRlbnQtdHlwZScpKVxuXG4gICAgICAgICAgaWYgKHhoci5yZXNwb25zZVR5cGUgPT0gJ2FycmF5YnVmZmVyJyB8fCB4aHIucmVzcG9uc2VUeXBlID09ICdibG9iJylcbiAgICAgICAgICAgIHJlc3VsdCA9IHhoci5yZXNwb25zZVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0geGhyLnJlc3BvbnNlVGV4dFxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBodHRwOi8vcGVyZmVjdGlvbmtpbGxzLmNvbS9nbG9iYWwtZXZhbC13aGF0LWFyZS10aGUtb3B0aW9ucy9cbiAgICAgICAgICAgICAgLy8gc2FuaXRpemUgcmVzcG9uc2UgYWNjb3JkaW5nbHkgaWYgZGF0YSBmaWx0ZXIgY2FsbGJhY2sgcHJvdmlkZWRcbiAgICAgICAgICAgICAgcmVzdWx0ID0gYWpheERhdGFGaWx0ZXIocmVzdWx0LCBkYXRhVHlwZSwgc2V0dGluZ3MpXG4gICAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PSAnc2NyaXB0JykgICAgKDEsZXZhbCkocmVzdWx0KVxuICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PSAneG1sJykgIHJlc3VsdCA9IHhoci5yZXNwb25zZVhNTFxuICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PSAnanNvbicpIHJlc3VsdCA9IGJsYW5rUkUudGVzdChyZXN1bHQpID8gbnVsbCA6ICQucGFyc2VKU09OKHJlc3VsdClcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgZXJyb3IgPSBlIH1cblxuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gYWpheEVycm9yKGVycm9yLCAncGFyc2VyZXJyb3InLCB4aHIsIHNldHRpbmdzLCBkZWZlcnJlZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhamF4U3VjY2VzcyhyZXN1bHQsIHhociwgc2V0dGluZ3MsIGRlZmVycmVkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFqYXhFcnJvcih4aHIuc3RhdHVzVGV4dCB8fCBudWxsLCB4aHIuc3RhdHVzID8gJ2Vycm9yJyA6ICdhYm9ydCcsIHhociwgc2V0dGluZ3MsIGRlZmVycmVkKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFqYXhCZWZvcmVTZW5kKHhociwgc2V0dGluZ3MpID09PSBmYWxzZSkge1xuICAgICAgeGhyLmFib3J0KClcbiAgICAgIGFqYXhFcnJvcihudWxsLCAnYWJvcnQnLCB4aHIsIHNldHRpbmdzLCBkZWZlcnJlZClcbiAgICAgIHJldHVybiB4aHJcbiAgICB9XG5cbiAgICB2YXIgYXN5bmMgPSAnYXN5bmMnIGluIHNldHRpbmdzID8gc2V0dGluZ3MuYXN5bmMgOiB0cnVlXG4gICAgeGhyLm9wZW4oc2V0dGluZ3MudHlwZSwgc2V0dGluZ3MudXJsLCBhc3luYywgc2V0dGluZ3MudXNlcm5hbWUsIHNldHRpbmdzLnBhc3N3b3JkKVxuXG4gICAgaWYgKHNldHRpbmdzLnhockZpZWxkcykgZm9yIChuYW1lIGluIHNldHRpbmdzLnhockZpZWxkcykgeGhyW25hbWVdID0gc2V0dGluZ3MueGhyRmllbGRzW25hbWVdXG5cbiAgICBmb3IgKG5hbWUgaW4gaGVhZGVycykgbmF0aXZlU2V0SGVhZGVyLmFwcGx5KHhociwgaGVhZGVyc1tuYW1lXSlcblxuICAgIGlmIChzZXR0aW5ncy50aW1lb3V0ID4gMCkgYWJvcnRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZW1wdHlcbiAgICAgICAgeGhyLmFib3J0KClcbiAgICAgICAgYWpheEVycm9yKG51bGwsICd0aW1lb3V0JywgeGhyLCBzZXR0aW5ncywgZGVmZXJyZWQpXG4gICAgICB9LCBzZXR0aW5ncy50aW1lb3V0KVxuXG4gICAgLy8gYXZvaWQgc2VuZGluZyBlbXB0eSBzdHJpbmcgKCMzMTkpXG4gICAgeGhyLnNlbmQoc2V0dGluZ3MuZGF0YSA/IHNldHRpbmdzLmRhdGEgOiBudWxsKVxuICAgIHJldHVybiB4aHJcbiAgfVxuXG4gIC8vIGhhbmRsZSBvcHRpb25hbCBkYXRhL3N1Y2Nlc3MgYXJndW1lbnRzXG4gIGZ1bmN0aW9uIHBhcnNlQXJndW1lbnRzKHVybCwgZGF0YSwgc3VjY2VzcywgZGF0YVR5cGUpIHtcbiAgICBpZiAoJC5pc0Z1bmN0aW9uKGRhdGEpKSBkYXRhVHlwZSA9IHN1Y2Nlc3MsIHN1Y2Nlc3MgPSBkYXRhLCBkYXRhID0gdW5kZWZpbmVkXG4gICAgaWYgKCEkLmlzRnVuY3Rpb24oc3VjY2VzcykpIGRhdGFUeXBlID0gc3VjY2Vzcywgc3VjY2VzcyA9IHVuZGVmaW5lZFxuICAgIHJldHVybiB7XG4gICAgICB1cmw6IHVybFxuICAgICwgZGF0YTogZGF0YVxuICAgICwgc3VjY2Vzczogc3VjY2Vzc1xuICAgICwgZGF0YVR5cGU6IGRhdGFUeXBlXG4gICAgfVxuICB9XG5cbiAgJC5nZXQgPSBmdW5jdGlvbigvKiB1cmwsIGRhdGEsIHN1Y2Nlc3MsIGRhdGFUeXBlICovKXtcbiAgICByZXR1cm4gJC5hamF4KHBhcnNlQXJndW1lbnRzLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpXG4gIH1cblxuICAkLnBvc3QgPSBmdW5jdGlvbigvKiB1cmwsIGRhdGEsIHN1Y2Nlc3MsIGRhdGFUeXBlICovKXtcbiAgICB2YXIgb3B0aW9ucyA9IHBhcnNlQXJndW1lbnRzLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICBvcHRpb25zLnR5cGUgPSAnUE9TVCdcbiAgICByZXR1cm4gJC5hamF4KG9wdGlvbnMpXG4gIH1cblxuICAkLmdldEpTT04gPSBmdW5jdGlvbigvKiB1cmwsIGRhdGEsIHN1Y2Nlc3MgKi8pe1xuICAgIHZhciBvcHRpb25zID0gcGFyc2VBcmd1bWVudHMuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgIG9wdGlvbnMuZGF0YVR5cGUgPSAnanNvbidcbiAgICByZXR1cm4gJC5hamF4KG9wdGlvbnMpXG4gIH1cblxuICAkLmZuLmxvYWQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIHN1Y2Nlc3Mpe1xuICAgIGlmICghdGhpcy5sZW5ndGgpIHJldHVybiB0aGlzXG4gICAgdmFyIHNlbGYgPSB0aGlzLCBwYXJ0cyA9IHVybC5zcGxpdCgvXFxzLyksIHNlbGVjdG9yLFxuICAgICAgICBvcHRpb25zID0gcGFyc2VBcmd1bWVudHModXJsLCBkYXRhLCBzdWNjZXNzKSxcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zLnN1Y2Nlc3NcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkgb3B0aW9ucy51cmwgPSBwYXJ0c1swXSwgc2VsZWN0b3IgPSBwYXJ0c1sxXVxuICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgIHNlbGYuaHRtbChzZWxlY3RvciA/XG4gICAgICAgICQoJzxkaXY+JykuaHRtbChyZXNwb25zZS5yZXBsYWNlKHJzY3JpcHQsIFwiXCIpKS5maW5kKHNlbGVjdG9yKVxuICAgICAgICA6IHJlc3BvbnNlKVxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2suYXBwbHkoc2VsZiwgYXJndW1lbnRzKVxuICAgIH1cbiAgICAkLmFqYXgob3B0aW9ucylcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgdmFyIGVzY2FwZSA9IGVuY29kZVVSSUNvbXBvbmVudFxuXG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShwYXJhbXMsIG9iaiwgdHJhZGl0aW9uYWwsIHNjb3BlKXtcbiAgICB2YXIgdHlwZSwgYXJyYXkgPSAkLmlzQXJyYXkob2JqKSwgaGFzaCA9ICQuaXNQbGFpbk9iamVjdChvYmopXG4gICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgdHlwZSA9ICQudHlwZSh2YWx1ZSlcbiAgICAgIGlmIChzY29wZSkga2V5ID0gdHJhZGl0aW9uYWwgPyBzY29wZSA6XG4gICAgICAgIHNjb3BlICsgJ1snICsgKGhhc2ggfHwgdHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdhcnJheScgPyBrZXkgOiAnJykgKyAnXSdcbiAgICAgIC8vIGhhbmRsZSBkYXRhIGluIHNlcmlhbGl6ZUFycmF5KCkgZm9ybWF0XG4gICAgICBpZiAoIXNjb3BlICYmIGFycmF5KSBwYXJhbXMuYWRkKHZhbHVlLm5hbWUsIHZhbHVlLnZhbHVlKVxuICAgICAgLy8gcmVjdXJzZSBpbnRvIG5lc3RlZCBvYmplY3RzXG4gICAgICBlbHNlIGlmICh0eXBlID09IFwiYXJyYXlcIiB8fCAoIXRyYWRpdGlvbmFsICYmIHR5cGUgPT0gXCJvYmplY3RcIikpXG4gICAgICAgIHNlcmlhbGl6ZShwYXJhbXMsIHZhbHVlLCB0cmFkaXRpb25hbCwga2V5KVxuICAgICAgZWxzZSBwYXJhbXMuYWRkKGtleSwgdmFsdWUpXG4gICAgfSlcbiAgfVxuXG4gICQucGFyYW0gPSBmdW5jdGlvbihvYmosIHRyYWRpdGlvbmFsKXtcbiAgICB2YXIgcGFyYW1zID0gW11cbiAgICBwYXJhbXMuYWRkID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKCQuaXNGdW5jdGlvbih2YWx1ZSkpIHZhbHVlID0gdmFsdWUoKVxuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHZhbHVlID0gXCJcIlxuICAgICAgdGhpcy5wdXNoKGVzY2FwZShrZXkpICsgJz0nICsgZXNjYXBlKHZhbHVlKSlcbiAgICB9XG4gICAgc2VyaWFsaXplKHBhcmFtcywgb2JqLCB0cmFkaXRpb25hbClcbiAgICByZXR1cm4gcGFyYW1zLmpvaW4oJyYnKS5yZXBsYWNlKC8lMjAvZywgJysnKVxuICB9XG59KShaZXB0bylcbiIsIi8vICAgICBaZXB0by5qc1xuLy8gICAgIChjKSAyMDEwLTIwMTYgVGhvbWFzIEZ1Y2hzXG4vLyAgICAgWmVwdG8uanMgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbnZhciBaZXB0byA9IHJlcXVpcmUoJy4vemVwdG8nKTtcblxuOyhmdW5jdGlvbigkKXtcbiAgLy8gQ3JlYXRlIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gYmUgZmlyZWQgaW4gYSBzZXF1ZW5jZSwgd2l0aCBjb25maWd1cmFibGUgYmVoYXZpb3VyXG4gIC8vIE9wdGlvbiBmbGFnczpcbiAgLy8gICAtIG9uY2U6IENhbGxiYWNrcyBmaXJlZCBhdCBtb3N0IG9uZSB0aW1lLlxuICAvLyAgIC0gbWVtb3J5OiBSZW1lbWJlciB0aGUgbW9zdCByZWNlbnQgY29udGV4dCBhbmQgYXJndW1lbnRzXG4gIC8vICAgLSBzdG9wT25GYWxzZTogQ2Vhc2UgaXRlcmF0aW5nIG92ZXIgY2FsbGJhY2sgbGlzdFxuICAvLyAgIC0gdW5pcXVlOiBQZXJtaXQgYWRkaW5nIGF0IG1vc3Qgb25lIGluc3RhbmNlIG9mIHRoZSBzYW1lIGNhbGxiYWNrXG4gICQuQ2FsbGJhY2tzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucylcblxuICAgIHZhciBtZW1vcnksIC8vIExhc3QgZmlyZSB2YWx1ZSAoZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cylcbiAgICAgICAgZmlyZWQsICAvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuICAgICAgICBmaXJpbmcsIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcbiAgICAgICAgZmlyaW5nU3RhcnQsIC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuICAgICAgICBmaXJpbmdMZW5ndGgsIC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuICAgICAgICBmaXJpbmdJbmRleCwgLy8gSW5kZXggb2YgY3VycmVudGx5IGZpcmluZyBjYWxsYmFjayAobW9kaWZpZWQgYnkgcmVtb3ZlIGlmIG5lZWRlZClcbiAgICAgICAgbGlzdCA9IFtdLCAvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuICAgICAgICBzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sIC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcbiAgICAgICAgZmlyZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhXG4gICAgICAgICAgZmlyZWQgPSB0cnVlXG4gICAgICAgICAgZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwXG4gICAgICAgICAgZmlyaW5nU3RhcnQgPSAwXG4gICAgICAgICAgZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGhcbiAgICAgICAgICBmaXJpbmcgPSB0cnVlXG4gICAgICAgICAgZm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoIDsgKytmaXJpbmdJbmRleCApIHtcbiAgICAgICAgICAgIGlmIChsaXN0W2ZpcmluZ0luZGV4XS5hcHBseShkYXRhWzBdLCBkYXRhWzFdKSA9PT0gZmFsc2UgJiYgb3B0aW9ucy5zdG9wT25GYWxzZSkge1xuICAgICAgICAgICAgICBtZW1vcnkgPSBmYWxzZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmaXJpbmcgPSBmYWxzZVxuICAgICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgICBpZiAoc3RhY2spIHN0YWNrLmxlbmd0aCAmJiBmaXJlKHN0YWNrLnNoaWZ0KCkpXG4gICAgICAgICAgICBlbHNlIGlmIChtZW1vcnkpIGxpc3QubGVuZ3RoID0gMFxuICAgICAgICAgICAgZWxzZSBDYWxsYmFja3MuZGlzYWJsZSgpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIENhbGxiYWNrcyA9IHtcbiAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICBhZGQgPSBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChhcmdzLCBmdW5jdGlvbihfLCBhcmcpe1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy51bmlxdWUgfHwgIUNhbGxiYWNrcy5oYXMoYXJnKSkgbGlzdC5wdXNoKGFyZylcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnICYmIGFyZy5sZW5ndGggJiYgdHlwZW9mIGFyZyAhPT0gJ3N0cmluZycpIGFkZChhcmcpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGFkZChhcmd1bWVudHMpXG4gICAgICAgICAgICAgIGlmIChmaXJpbmcpIGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoXG4gICAgICAgICAgICAgIGVsc2UgaWYgKG1lbW9yeSkge1xuICAgICAgICAgICAgICAgIGZpcmluZ1N0YXJ0ID0gc3RhcnRcbiAgICAgICAgICAgICAgICBmaXJlKG1lbW9yeSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAobGlzdCkge1xuICAgICAgICAgICAgICAkLmVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihfLCBhcmcpe1xuICAgICAgICAgICAgICAgIHZhciBpbmRleFxuICAgICAgICAgICAgICAgIHdoaWxlICgoaW5kZXggPSAkLmluQXJyYXkoYXJnLCBsaXN0LCBpbmRleCkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgIGxpc3Quc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG4gICAgICAgICAgICAgICAgICBpZiAoZmlyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8PSBmaXJpbmdMZW5ndGgpIC0tZmlyaW5nTGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8PSBmaXJpbmdJbmRleCkgLS1maXJpbmdJbmRleFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBoYXM6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gISEobGlzdCAmJiAoZm4gPyAkLmluQXJyYXkoZm4sIGxpc3QpID4gLTEgOiBsaXN0Lmxlbmd0aCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmaXJpbmdMZW5ndGggPSBsaXN0Lmxlbmd0aCA9IDBcbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxpc3QgPSBzdGFjayA9IG1lbW9yeSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc2FibGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAhbGlzdFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbG9jazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzdGFjayA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKCFtZW1vcnkpIENhbGxiYWNrcy5kaXNhYmxlKClcbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb2NrZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICFzdGFja1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmlyZVdpdGg6IGZ1bmN0aW9uKGNvbnRleHQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ICYmICghZmlyZWQgfHwgc3RhY2spKSB7XG4gICAgICAgICAgICAgIGFyZ3MgPSBhcmdzIHx8IFtdXG4gICAgICAgICAgICAgIGFyZ3MgPSBbY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3NdXG4gICAgICAgICAgICAgIGlmIChmaXJpbmcpIHN0YWNrLnB1c2goYXJncylcbiAgICAgICAgICAgICAgZWxzZSBmaXJlKGFyZ3MpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmlyZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQ2FsbGJhY2tzLmZpcmVXaXRoKHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZpcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWZpcmVkXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICByZXR1cm4gQ2FsbGJhY2tzXG4gIH1cbn0pKFplcHRvKVxuIiwiLy8gICAgIFplcHRvLmpzXG4vLyAgICAgKGMpIDIwMTAtMjAxNiBUaG9tYXMgRnVjaHNcbi8vICAgICBaZXB0by5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vXG4vLyAgICAgU29tZSBjb2RlIChjKSAyMDA1LCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcblxudmFyIFplcHRvID0gcmVxdWlyZSgnLi96ZXB0bycpO1xuXG47KGZ1bmN0aW9uKCQpe1xuICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcblxuICBmdW5jdGlvbiBEZWZlcnJlZChmdW5jKSB7XG4gICAgdmFyIHR1cGxlcyA9IFtcbiAgICAgICAgICAvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcbiAgICAgICAgICBbIFwicmVzb2x2ZVwiLCBcImRvbmVcIiwgJC5DYWxsYmFja3Moe29uY2U6MSwgbWVtb3J5OjF9KSwgXCJyZXNvbHZlZFwiIF0sXG4gICAgICAgICAgWyBcInJlamVjdFwiLCBcImZhaWxcIiwgJC5DYWxsYmFja3Moe29uY2U6MSwgbWVtb3J5OjF9KSwgXCJyZWplY3RlZFwiIF0sXG4gICAgICAgICAgWyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsICQuQ2FsbGJhY2tzKHttZW1vcnk6MX0pIF1cbiAgICAgICAgXSxcbiAgICAgICAgc3RhdGUgPSBcInBlbmRpbmdcIixcbiAgICAgICAgcHJvbWlzZSA9IHtcbiAgICAgICAgICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsd2F5czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhlbjogZnVuY3Rpb24oLyogZm5Eb25lIFssIGZuRmFpbGVkIFssIGZuUHJvZ3Jlc3NdXSAqLykge1xuICAgICAgICAgICAgdmFyIGZucyA9IGFyZ3VtZW50c1xuICAgICAgICAgICAgcmV0dXJuIERlZmVycmVkKGZ1bmN0aW9uKGRlZmVyKXtcbiAgICAgICAgICAgICAgJC5lYWNoKHR1cGxlcywgZnVuY3Rpb24oaSwgdHVwbGUpe1xuICAgICAgICAgICAgICAgIHZhciBmbiA9ICQuaXNGdW5jdGlvbihmbnNbaV0pICYmIGZuc1tpXVxuICAgICAgICAgICAgICAgIGRlZmVycmVkW3R1cGxlWzFdXShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgdmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgICAgaWYgKHJldHVybmVkICYmICQuaXNGdW5jdGlvbihyZXR1cm5lZC5wcm9taXNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5lZC5wcm9taXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAuZG9uZShkZWZlci5yZXNvbHZlKVxuICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKGRlZmVyLnJlamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAucHJvZ3Jlc3MoZGVmZXIubm90aWZ5KVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzID09PSBwcm9taXNlID8gZGVmZXIucHJvbWlzZSgpIDogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IGZuID8gW3JldHVybmVkXSA6IGFyZ3VtZW50c1xuICAgICAgICAgICAgICAgICAgICBkZWZlclt0dXBsZVswXSArIFwiV2l0aFwiXShjb250ZXh0LCB2YWx1ZXMpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgZm5zID0gbnVsbFxuICAgICAgICAgICAgfSkucHJvbWlzZSgpXG4gICAgICAgICAgfSxcblxuICAgICAgICAgIHByb21pc2U6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsID8gJC5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmZXJyZWQgPSB7fVxuXG4gICAgJC5lYWNoKHR1cGxlcywgZnVuY3Rpb24oaSwgdHVwbGUpe1xuICAgICAgdmFyIGxpc3QgPSB0dXBsZVsyXSxcbiAgICAgICAgICBzdGF0ZVN0cmluZyA9IHR1cGxlWzNdXG5cbiAgICAgIHByb21pc2VbdHVwbGVbMV1dID0gbGlzdC5hZGRcblxuICAgICAgaWYgKHN0YXRlU3RyaW5nKSB7XG4gICAgICAgIGxpc3QuYWRkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc3RhdGUgPSBzdGF0ZVN0cmluZ1xuICAgICAgICB9LCB0dXBsZXNbaV4xXVsyXS5kaXNhYmxlLCB0dXBsZXNbMl1bMl0ubG9jaylcbiAgICAgIH1cblxuICAgICAgZGVmZXJyZWRbdHVwbGVbMF1dID0gZnVuY3Rpb24oKXtcbiAgICAgICAgZGVmZXJyZWRbdHVwbGVbMF0gKyBcIldpdGhcIl0odGhpcyA9PT0gZGVmZXJyZWQgPyBwcm9taXNlIDogdGhpcywgYXJndW1lbnRzKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgfVxuICAgICAgZGVmZXJyZWRbdHVwbGVbMF0gKyBcIldpdGhcIl0gPSBsaXN0LmZpcmVXaXRoXG4gICAgfSlcblxuICAgIHByb21pc2UucHJvbWlzZShkZWZlcnJlZClcbiAgICBpZiAoZnVuYykgZnVuYy5jYWxsKGRlZmVycmVkLCBkZWZlcnJlZClcbiAgICByZXR1cm4gZGVmZXJyZWRcbiAgfVxuXG4gICQud2hlbiA9IGZ1bmN0aW9uKHN1Yikge1xuICAgIHZhciByZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpLFxuICAgICAgICBsZW4gPSByZXNvbHZlVmFsdWVzLmxlbmd0aCxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIHJlbWFpbiA9IGxlbiAhPT0gMSB8fCAoc3ViICYmICQuaXNGdW5jdGlvbihzdWIucHJvbWlzZSkpID8gbGVuIDogMCxcbiAgICAgICAgZGVmZXJyZWQgPSByZW1haW4gPT09IDEgPyBzdWIgOiBEZWZlcnJlZCgpLFxuICAgICAgICBwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzLFxuICAgICAgICB1cGRhdGVGbiA9IGZ1bmN0aW9uKGksIGN0eCwgdmFsKXtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgY3R4W2ldID0gdGhpc1xuICAgICAgICAgICAgdmFsW2ldID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKGFyZ3VtZW50cykgOiB2YWx1ZVxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gcHJvZ3Jlc3NWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5V2l0aChjdHgsIHZhbClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoISgtLXJlbWFpbikpIHtcbiAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZVdpdGgoY3R4LCB2YWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICBpZiAobGVuID4gMSkge1xuICAgICAgcHJvZ3Jlc3NWYWx1ZXMgPSBuZXcgQXJyYXkobGVuKVxuICAgICAgcHJvZ3Jlc3NDb250ZXh0cyA9IG5ldyBBcnJheShsZW4pXG4gICAgICByZXNvbHZlQ29udGV4dHMgPSBuZXcgQXJyYXkobGVuKVxuICAgICAgZm9yICggOyBpIDwgbGVuOyArK2kgKSB7XG4gICAgICAgIGlmIChyZXNvbHZlVmFsdWVzW2ldICYmICQuaXNGdW5jdGlvbihyZXNvbHZlVmFsdWVzW2ldLnByb21pc2UpKSB7XG4gICAgICAgICAgcmVzb2x2ZVZhbHVlc1tpXS5wcm9taXNlKClcbiAgICAgICAgICAgIC5kb25lKHVwZGF0ZUZuKGksIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcykpXG4gICAgICAgICAgICAuZmFpbChkZWZlcnJlZC5yZWplY3QpXG4gICAgICAgICAgICAucHJvZ3Jlc3ModXBkYXRlRm4oaSwgcHJvZ3Jlc3NDb250ZXh0cywgcHJvZ3Jlc3NWYWx1ZXMpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC0tcmVtYWluXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFyZW1haW4pIGRlZmVycmVkLnJlc29sdmVXaXRoKHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcylcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpXG4gIH1cblxuICAkLkRlZmVycmVkID0gRGVmZXJyZWRcbn0pKFplcHRvKVxuIiwiLy8gICAgIFplcHRvLmpzXG4vLyAgICAgKGMpIDIwMTAtMjAxNiBUaG9tYXMgRnVjaHNcbi8vICAgICBaZXB0by5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxudmFyIFplcHRvID0gcmVxdWlyZSgnLi96ZXB0bycpO1xuXG47KGZ1bmN0aW9uKCQpe1xuICB2YXIgX3ppZCA9IDEsIHVuZGVmaW5lZCxcbiAgICAgIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgICAgaXNGdW5jdGlvbiA9ICQuaXNGdW5jdGlvbixcbiAgICAgIGlzU3RyaW5nID0gZnVuY3Rpb24ob2JqKXsgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ3N0cmluZycgfSxcbiAgICAgIGhhbmRsZXJzID0ge30sXG4gICAgICBzcGVjaWFsRXZlbnRzPXt9LFxuICAgICAgZm9jdXNpblN1cHBvcnRlZCA9ICdvbmZvY3VzaW4nIGluIHdpbmRvdyxcbiAgICAgIGZvY3VzID0geyBmb2N1czogJ2ZvY3VzaW4nLCBibHVyOiAnZm9jdXNvdXQnIH0sXG4gICAgICBob3ZlciA9IHsgbW91c2VlbnRlcjogJ21vdXNlb3ZlcicsIG1vdXNlbGVhdmU6ICdtb3VzZW91dCcgfVxuXG4gIHNwZWNpYWxFdmVudHMuY2xpY2sgPSBzcGVjaWFsRXZlbnRzLm1vdXNlZG93biA9IHNwZWNpYWxFdmVudHMubW91c2V1cCA9IHNwZWNpYWxFdmVudHMubW91c2Vtb3ZlID0gJ01vdXNlRXZlbnRzJ1xuXG4gIGZ1bmN0aW9uIHppZChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuX3ppZCB8fCAoZWxlbWVudC5femlkID0gX3ppZCsrKVxuICB9XG4gIGZ1bmN0aW9uIGZpbmRIYW5kbGVycyhlbGVtZW50LCBldmVudCwgZm4sIHNlbGVjdG9yKSB7XG4gICAgZXZlbnQgPSBwYXJzZShldmVudClcbiAgICBpZiAoZXZlbnQubnMpIHZhciBtYXRjaGVyID0gbWF0Y2hlckZvcihldmVudC5ucylcbiAgICByZXR1cm4gKGhhbmRsZXJzW3ppZChlbGVtZW50KV0gfHwgW10pLmZpbHRlcihmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gaGFuZGxlclxuICAgICAgICAmJiAoIWV2ZW50LmUgIHx8IGhhbmRsZXIuZSA9PSBldmVudC5lKVxuICAgICAgICAmJiAoIWV2ZW50Lm5zIHx8IG1hdGNoZXIudGVzdChoYW5kbGVyLm5zKSlcbiAgICAgICAgJiYgKCFmbiAgICAgICB8fCB6aWQoaGFuZGxlci5mbikgPT09IHppZChmbikpXG4gICAgICAgICYmICghc2VsZWN0b3IgfHwgaGFuZGxlci5zZWwgPT0gc2VsZWN0b3IpXG4gICAgfSlcbiAgfVxuICBmdW5jdGlvbiBwYXJzZShldmVudCkge1xuICAgIHZhciBwYXJ0cyA9ICgnJyArIGV2ZW50KS5zcGxpdCgnLicpXG4gICAgcmV0dXJuIHtlOiBwYXJ0c1swXSwgbnM6IHBhcnRzLnNsaWNlKDEpLnNvcnQoKS5qb2luKCcgJyl9XG4gIH1cbiAgZnVuY3Rpb24gbWF0Y2hlckZvcihucykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCcoPzpefCApJyArIG5zLnJlcGxhY2UoJyAnLCAnIC4qID8nKSArICcoPzogfCQpJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50Q2FwdHVyZShoYW5kbGVyLCBjYXB0dXJlU2V0dGluZykge1xuICAgIHJldHVybiBoYW5kbGVyLmRlbCAmJlxuICAgICAgKCFmb2N1c2luU3VwcG9ydGVkICYmIChoYW5kbGVyLmUgaW4gZm9jdXMpKSB8fFxuICAgICAgISFjYXB0dXJlU2V0dGluZ1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhbEV2ZW50KHR5cGUpIHtcbiAgICByZXR1cm4gaG92ZXJbdHlwZV0gfHwgKGZvY3VzaW5TdXBwb3J0ZWQgJiYgZm9jdXNbdHlwZV0pIHx8IHR5cGVcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZChlbGVtZW50LCBldmVudHMsIGZuLCBkYXRhLCBzZWxlY3RvciwgZGVsZWdhdG9yLCBjYXB0dXJlKXtcbiAgICB2YXIgaWQgPSB6aWQoZWxlbWVudCksIHNldCA9IChoYW5kbGVyc1tpZF0gfHwgKGhhbmRsZXJzW2lkXSA9IFtdKSlcbiAgICBldmVudHMuc3BsaXQoL1xccy8pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgaWYgKGV2ZW50ID09ICdyZWFkeScpIHJldHVybiAkKGRvY3VtZW50KS5yZWFkeShmbilcbiAgICAgIHZhciBoYW5kbGVyICAgPSBwYXJzZShldmVudClcbiAgICAgIGhhbmRsZXIuZm4gICAgPSBmblxuICAgICAgaGFuZGxlci5zZWwgICA9IHNlbGVjdG9yXG4gICAgICAvLyBlbXVsYXRlIG1vdXNlZW50ZXIsIG1vdXNlbGVhdmVcbiAgICAgIGlmIChoYW5kbGVyLmUgaW4gaG92ZXIpIGZuID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciByZWxhdGVkID0gZS5yZWxhdGVkVGFyZ2V0XG4gICAgICAgIGlmICghcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGhpcyAmJiAhJC5jb250YWlucyh0aGlzLCByZWxhdGVkKSkpXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIuZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgfVxuICAgICAgaGFuZGxlci5kZWwgICA9IGRlbGVnYXRvclxuICAgICAgdmFyIGNhbGxiYWNrICA9IGRlbGVnYXRvciB8fCBmblxuICAgICAgaGFuZGxlci5wcm94eSA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICBlID0gY29tcGF0aWJsZShlKVxuICAgICAgICBpZiAoZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSByZXR1cm5cbiAgICAgICAgZS5kYXRhID0gZGF0YVxuICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2suYXBwbHkoZWxlbWVudCwgZS5fYXJncyA9PSB1bmRlZmluZWQgPyBbZV0gOiBbZV0uY29uY2F0KGUuX2FyZ3MpKVxuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkgZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICAgIGhhbmRsZXIuaSA9IHNldC5sZW5ndGhcbiAgICAgIHNldC5wdXNoKGhhbmRsZXIpXG4gICAgICBpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGVsZW1lbnQpXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihyZWFsRXZlbnQoaGFuZGxlci5lKSwgaGFuZGxlci5wcm94eSwgZXZlbnRDYXB0dXJlKGhhbmRsZXIsIGNhcHR1cmUpKVxuICAgIH0pXG4gIH1cbiAgZnVuY3Rpb24gcmVtb3ZlKGVsZW1lbnQsIGV2ZW50cywgZm4sIHNlbGVjdG9yLCBjYXB0dXJlKXtcbiAgICB2YXIgaWQgPSB6aWQoZWxlbWVudClcbiAgICA7KGV2ZW50cyB8fCAnJykuc3BsaXQoL1xccy8pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgZmluZEhhbmRsZXJzKGVsZW1lbnQsIGV2ZW50LCBmbiwgc2VsZWN0b3IpLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlcil7XG4gICAgICAgIGRlbGV0ZSBoYW5kbGVyc1tpZF1baGFuZGxlci5pXVxuICAgICAgaWYgKCdyZW1vdmVFdmVudExpc3RlbmVyJyBpbiBlbGVtZW50KVxuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIocmVhbEV2ZW50KGhhbmRsZXIuZSksIGhhbmRsZXIucHJveHksIGV2ZW50Q2FwdHVyZShoYW5kbGVyLCBjYXB0dXJlKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gICQuZXZlbnQgPSB7IGFkZDogYWRkLCByZW1vdmU6IHJlbW92ZSB9XG5cbiAgJC5wcm94eSA9IGZ1bmN0aW9uKGZuLCBjb250ZXh0KSB7XG4gICAgdmFyIGFyZ3MgPSAoMiBpbiBhcmd1bWVudHMpICYmIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKVxuICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgdmFyIHByb3h5Rm4gPSBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyA/IGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkgOiBhcmd1bWVudHMpIH1cbiAgICAgIHByb3h5Rm4uX3ppZCA9IHppZChmbilcbiAgICAgIHJldHVybiBwcm94eUZuXG4gICAgfSBlbHNlIGlmIChpc1N0cmluZyhjb250ZXh0KSkge1xuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgYXJncy51bnNoaWZ0KGZuW2NvbnRleHRdLCBmbilcbiAgICAgICAgcmV0dXJuICQucHJveHkuYXBwbHkobnVsbCwgYXJncylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkLnByb3h5KGZuW2NvbnRleHRdLCBmbilcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGVkIGZ1bmN0aW9uXCIpXG4gICAgfVxuICB9XG5cbiAgJC5mbi5iaW5kID0gZnVuY3Rpb24oZXZlbnQsIGRhdGEsIGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudCwgZGF0YSwgY2FsbGJhY2spXG4gIH1cbiAgJC5mbi51bmJpbmQgPSBmdW5jdGlvbihldmVudCwgY2FsbGJhY2spe1xuICAgIHJldHVybiB0aGlzLm9mZihldmVudCwgY2FsbGJhY2spXG4gIH1cbiAgJC5mbi5vbmUgPSBmdW5jdGlvbihldmVudCwgc2VsZWN0b3IsIGRhdGEsIGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudCwgc2VsZWN0b3IsIGRhdGEsIGNhbGxiYWNrLCAxKVxuICB9XG5cbiAgdmFyIHJldHVyblRydWUgPSBmdW5jdGlvbigpe3JldHVybiB0cnVlfSxcbiAgICAgIHJldHVybkZhbHNlID0gZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9LFxuICAgICAgaWdub3JlUHJvcGVydGllcyA9IC9eKFtBLVpdfHJldHVyblZhbHVlJHxsYXllcltYWV0kfHdlYmtpdE1vdmVtZW50W1hZXSQpLyxcbiAgICAgIGV2ZW50TWV0aG9kcyA9IHtcbiAgICAgICAgcHJldmVudERlZmF1bHQ6ICdpc0RlZmF1bHRQcmV2ZW50ZWQnLFxuICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ICdpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCcsXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbjogJ2lzUHJvcGFnYXRpb25TdG9wcGVkJ1xuICAgICAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBhdGlibGUoZXZlbnQsIHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UgfHwgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgc291cmNlIHx8IChzb3VyY2UgPSBldmVudClcblxuICAgICAgJC5lYWNoKGV2ZW50TWV0aG9kcywgZnVuY3Rpb24obmFtZSwgcHJlZGljYXRlKSB7XG4gICAgICAgIHZhciBzb3VyY2VNZXRob2QgPSBzb3VyY2VbbmFtZV1cbiAgICAgICAgZXZlbnRbbmFtZV0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgIHRoaXNbcHJlZGljYXRlXSA9IHJldHVyblRydWVcbiAgICAgICAgICByZXR1cm4gc291cmNlTWV0aG9kICYmIHNvdXJjZU1ldGhvZC5hcHBseShzb3VyY2UsIGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgICAgICBldmVudFtwcmVkaWNhdGVdID0gcmV0dXJuRmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGV2ZW50LnRpbWVTdGFtcCB8fCAoZXZlbnQudGltZVN0YW1wID0gRGF0ZS5ub3coKSlcbiAgICAgIH0gY2F0Y2ggKGlnbm9yZWQpIHsgfVxuXG4gICAgICBpZiAoc291cmNlLmRlZmF1bHRQcmV2ZW50ZWQgIT09IHVuZGVmaW5lZCA/IHNvdXJjZS5kZWZhdWx0UHJldmVudGVkIDpcbiAgICAgICAgICAncmV0dXJuVmFsdWUnIGluIHNvdXJjZSA/IHNvdXJjZS5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgOlxuICAgICAgICAgIHNvdXJjZS5nZXRQcmV2ZW50RGVmYXVsdCAmJiBzb3VyY2UuZ2V0UHJldmVudERlZmF1bHQoKSlcbiAgICAgICAgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZXZlbnRcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVByb3h5KGV2ZW50KSB7XG4gICAgdmFyIGtleSwgcHJveHkgPSB7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50IH1cbiAgICBmb3IgKGtleSBpbiBldmVudClcbiAgICAgIGlmICghaWdub3JlUHJvcGVydGllcy50ZXN0KGtleSkgJiYgZXZlbnRba2V5XSAhPT0gdW5kZWZpbmVkKSBwcm94eVtrZXldID0gZXZlbnRba2V5XVxuXG4gICAgcmV0dXJuIGNvbXBhdGlibGUocHJveHksIGV2ZW50KVxuICB9XG5cbiAgJC5mbi5kZWxlZ2F0ZSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBldmVudCwgY2FsbGJhY2spe1xuICAgIHJldHVybiB0aGlzLm9uKGV2ZW50LCBzZWxlY3RvciwgY2FsbGJhY2spXG4gIH1cbiAgJC5mbi51bmRlbGVnYXRlID0gZnVuY3Rpb24oc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjayl7XG4gICAgcmV0dXJuIHRoaXMub2ZmKGV2ZW50LCBzZWxlY3RvciwgY2FsbGJhY2spXG4gIH1cblxuICAkLmZuLmxpdmUgPSBmdW5jdGlvbihldmVudCwgY2FsbGJhY2spe1xuICAgICQoZG9jdW1lbnQuYm9keSkuZGVsZWdhdGUodGhpcy5zZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgJC5mbi5kaWUgPSBmdW5jdGlvbihldmVudCwgY2FsbGJhY2spe1xuICAgICQoZG9jdW1lbnQuYm9keSkudW5kZWxlZ2F0ZSh0aGlzLnNlbGVjdG9yLCBldmVudCwgY2FsbGJhY2spXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gICQuZm4ub24gPSBmdW5jdGlvbihldmVudCwgc2VsZWN0b3IsIGRhdGEsIGNhbGxiYWNrLCBvbmUpe1xuICAgIHZhciBhdXRvUmVtb3ZlLCBkZWxlZ2F0b3IsICR0aGlzID0gdGhpc1xuICAgIGlmIChldmVudCAmJiAhaXNTdHJpbmcoZXZlbnQpKSB7XG4gICAgICAkLmVhY2goZXZlbnQsIGZ1bmN0aW9uKHR5cGUsIGZuKXtcbiAgICAgICAgJHRoaXMub24odHlwZSwgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUpXG4gICAgICB9KVxuICAgICAgcmV0dXJuICR0aGlzXG4gICAgfVxuXG4gICAgaWYgKCFpc1N0cmluZyhzZWxlY3RvcikgJiYgIWlzRnVuY3Rpb24oY2FsbGJhY2spICYmIGNhbGxiYWNrICE9PSBmYWxzZSlcbiAgICAgIGNhbGxiYWNrID0gZGF0YSwgZGF0YSA9IHNlbGVjdG9yLCBzZWxlY3RvciA9IHVuZGVmaW5lZFxuICAgIGlmIChjYWxsYmFjayA9PT0gdW5kZWZpbmVkIHx8IGRhdGEgPT09IGZhbHNlKVxuICAgICAgY2FsbGJhY2sgPSBkYXRhLCBkYXRhID0gdW5kZWZpbmVkXG5cbiAgICBpZiAoY2FsbGJhY2sgPT09IGZhbHNlKSBjYWxsYmFjayA9IHJldHVybkZhbHNlXG5cbiAgICByZXR1cm4gJHRoaXMuZWFjaChmdW5jdGlvbihfLCBlbGVtZW50KXtcbiAgICAgIGlmIChvbmUpIGF1dG9SZW1vdmUgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgcmVtb3ZlKGVsZW1lbnQsIGUudHlwZSwgY2FsbGJhY2spXG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxlY3RvcikgZGVsZWdhdG9yID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciBldnQsIG1hdGNoID0gJChlLnRhcmdldCkuY2xvc2VzdChzZWxlY3RvciwgZWxlbWVudCkuZ2V0KDApXG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaCAhPT0gZWxlbWVudCkge1xuICAgICAgICAgIGV2dCA9ICQuZXh0ZW5kKGNyZWF0ZVByb3h5KGUpLCB7Y3VycmVudFRhcmdldDogbWF0Y2gsIGxpdmVGaXJlZDogZWxlbWVudH0pXG4gICAgICAgICAgcmV0dXJuIChhdXRvUmVtb3ZlIHx8IGNhbGxiYWNrKS5hcHBseShtYXRjaCwgW2V2dF0uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYWRkKGVsZW1lbnQsIGV2ZW50LCBjYWxsYmFjaywgZGF0YSwgc2VsZWN0b3IsIGRlbGVnYXRvciB8fCBhdXRvUmVtb3ZlKVxuICAgIH0pXG4gIH1cbiAgJC5mbi5vZmYgPSBmdW5jdGlvbihldmVudCwgc2VsZWN0b3IsIGNhbGxiYWNrKXtcbiAgICB2YXIgJHRoaXMgPSB0aGlzXG4gICAgaWYgKGV2ZW50ICYmICFpc1N0cmluZyhldmVudCkpIHtcbiAgICAgICQuZWFjaChldmVudCwgZnVuY3Rpb24odHlwZSwgZm4pe1xuICAgICAgICAkdGhpcy5vZmYodHlwZSwgc2VsZWN0b3IsIGZuKVxuICAgICAgfSlcbiAgICAgIHJldHVybiAkdGhpc1xuICAgIH1cblxuICAgIGlmICghaXNTdHJpbmcoc2VsZWN0b3IpICYmICFpc0Z1bmN0aW9uKGNhbGxiYWNrKSAmJiBjYWxsYmFjayAhPT0gZmFsc2UpXG4gICAgICBjYWxsYmFjayA9IHNlbGVjdG9yLCBzZWxlY3RvciA9IHVuZGVmaW5lZFxuXG4gICAgaWYgKGNhbGxiYWNrID09PSBmYWxzZSkgY2FsbGJhY2sgPSByZXR1cm5GYWxzZVxuXG4gICAgcmV0dXJuICR0aGlzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHJlbW92ZSh0aGlzLCBldmVudCwgY2FsbGJhY2ssIHNlbGVjdG9yKVxuICAgIH0pXG4gIH1cblxuICAkLmZuLnRyaWdnZXIgPSBmdW5jdGlvbihldmVudCwgYXJncyl7XG4gICAgZXZlbnQgPSAoaXNTdHJpbmcoZXZlbnQpIHx8ICQuaXNQbGFpbk9iamVjdChldmVudCkpID8gJC5FdmVudChldmVudCkgOiBjb21wYXRpYmxlKGV2ZW50KVxuICAgIGV2ZW50Ll9hcmdzID0gYXJnc1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgIC8vIGhhbmRsZSBmb2N1cygpLCBibHVyKCkgYnkgY2FsbGluZyB0aGVtIGRpcmVjdGx5XG4gICAgICBpZiAoZXZlbnQudHlwZSBpbiBmb2N1cyAmJiB0eXBlb2YgdGhpc1tldmVudC50eXBlXSA9PSBcImZ1bmN0aW9uXCIpIHRoaXNbZXZlbnQudHlwZV0oKVxuICAgICAgLy8gaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24gbWlnaHQgbm90IGJlIERPTSBlbGVtZW50c1xuICAgICAgZWxzZSBpZiAoJ2Rpc3BhdGNoRXZlbnQnIGluIHRoaXMpIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICAgIGVsc2UgJCh0aGlzKS50cmlnZ2VySGFuZGxlcihldmVudCwgYXJncylcbiAgICB9KVxuICB9XG5cbiAgLy8gdHJpZ2dlcnMgZXZlbnQgaGFuZGxlcnMgb24gY3VycmVudCBlbGVtZW50IGp1c3QgYXMgaWYgYW4gZXZlbnQgb2NjdXJyZWQsXG4gIC8vIGRvZXNuJ3QgdHJpZ2dlciBhbiBhY3R1YWwgZXZlbnQsIGRvZXNuJ3QgYnViYmxlXG4gICQuZm4udHJpZ2dlckhhbmRsZXIgPSBmdW5jdGlvbihldmVudCwgYXJncyl7XG4gICAgdmFyIGUsIHJlc3VsdFxuICAgIHRoaXMuZWFjaChmdW5jdGlvbihpLCBlbGVtZW50KXtcbiAgICAgIGUgPSBjcmVhdGVQcm94eShpc1N0cmluZyhldmVudCkgPyAkLkV2ZW50KGV2ZW50KSA6IGV2ZW50KVxuICAgICAgZS5fYXJncyA9IGFyZ3NcbiAgICAgIGUudGFyZ2V0ID0gZWxlbWVudFxuICAgICAgJC5lYWNoKGZpbmRIYW5kbGVycyhlbGVtZW50LCBldmVudC50eXBlIHx8IGV2ZW50KSwgZnVuY3Rpb24oaSwgaGFuZGxlcil7XG4gICAgICAgIHJlc3VsdCA9IGhhbmRsZXIucHJveHkoZSlcbiAgICAgICAgaWYgKGUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gc2hvcnRjdXQgbWV0aG9kcyBmb3IgYC5iaW5kKGV2ZW50LCBmbilgIGZvciBlYWNoIGV2ZW50IHR5cGVcbiAgOygnZm9jdXNpbiBmb2N1c291dCBmb2N1cyBibHVyIGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgJytcbiAgJ21vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlICcrXG4gICdjaGFuZ2Ugc2VsZWN0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3InKS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAkLmZuW2V2ZW50XSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gKDAgaW4gYXJndW1lbnRzKSA/XG4gICAgICAgIHRoaXMuYmluZChldmVudCwgY2FsbGJhY2spIDpcbiAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50KVxuICAgIH1cbiAgfSlcblxuICAkLkV2ZW50ID0gZnVuY3Rpb24odHlwZSwgcHJvcHMpIHtcbiAgICBpZiAoIWlzU3RyaW5nKHR5cGUpKSBwcm9wcyA9IHR5cGUsIHR5cGUgPSBwcm9wcy50eXBlXG4gICAgdmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoc3BlY2lhbEV2ZW50c1t0eXBlXSB8fCAnRXZlbnRzJyksIGJ1YmJsZXMgPSB0cnVlXG4gICAgaWYgKHByb3BzKSBmb3IgKHZhciBuYW1lIGluIHByb3BzKSAobmFtZSA9PSAnYnViYmxlcycpID8gKGJ1YmJsZXMgPSAhIXByb3BzW25hbWVdKSA6IChldmVudFtuYW1lXSA9IHByb3BzW25hbWVdKVxuICAgIGV2ZW50LmluaXRFdmVudCh0eXBlLCBidWJibGVzLCB0cnVlKVxuICAgIHJldHVybiBjb21wYXRpYmxlKGV2ZW50KVxuICB9XG5cbn0pKFplcHRvKVxuIiwiLy8gICAgIFplcHRvLmpzXG4vLyAgICAgKGMpIDIwMTAtMjAxNiBUaG9tYXMgRnVjaHNcbi8vICAgICBaZXB0by5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxudmFyIFplcHRvID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgdW5kZWZpbmVkLCBrZXksICQsIGNsYXNzTGlzdCwgZW1wdHlBcnJheSA9IFtdLCBjb25jYXQgPSBlbXB0eUFycmF5LmNvbmNhdCwgZmlsdGVyID0gZW1wdHlBcnJheS5maWx0ZXIsIHNsaWNlID0gZW1wdHlBcnJheS5zbGljZSxcbiAgICBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcbiAgICBlbGVtZW50RGlzcGxheSA9IHt9LCBjbGFzc0NhY2hlID0ge30sXG4gICAgY3NzTnVtYmVyID0geyAnY29sdW1uLWNvdW50JzogMSwgJ2NvbHVtbnMnOiAxLCAnZm9udC13ZWlnaHQnOiAxLCAnbGluZS1oZWlnaHQnOiAxLCdvcGFjaXR5JzogMSwgJ3otaW5kZXgnOiAxLCAnem9vbSc6IDEgfSxcbiAgICBmcmFnbWVudFJFID0gL15cXHMqPChcXHcrfCEpW14+XSo+LyxcbiAgICBzaW5nbGVUYWdSRSA9IC9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxcbiAgICB0YWdFeHBhbmRlclJFID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2lnLFxuICAgIHJvb3ROb2RlUkUgPSAvXig/OmJvZHl8aHRtbCkkL2ksXG4gICAgY2FwaXRhbFJFID0gLyhbQS1aXSkvZyxcblxuICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSBnZXQvc2V0IHZpYSBtZXRob2QgY2FsbHNcbiAgICBtZXRob2RBdHRyaWJ1dGVzID0gWyd2YWwnLCAnY3NzJywgJ2h0bWwnLCAndGV4dCcsICdkYXRhJywgJ3dpZHRoJywgJ2hlaWdodCcsICdvZmZzZXQnXSxcblxuICAgIGFkamFjZW5jeU9wZXJhdG9ycyA9IFsgJ2FmdGVyJywgJ3ByZXBlbmQnLCAnYmVmb3JlJywgJ2FwcGVuZCcgXSxcbiAgICB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyksXG4gICAgdGFibGVSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgIGNvbnRhaW5lcnMgPSB7XG4gICAgICAndHInOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpLFxuICAgICAgJ3Rib2R5JzogdGFibGUsICd0aGVhZCc6IHRhYmxlLCAndGZvb3QnOiB0YWJsZSxcbiAgICAgICd0ZCc6IHRhYmxlUm93LCAndGgnOiB0YWJsZVJvdyxcbiAgICAgICcqJzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB9LFxuICAgIHJlYWR5UkUgPSAvY29tcGxldGV8bG9hZGVkfGludGVyYWN0aXZlLyxcbiAgICBzaW1wbGVTZWxlY3RvclJFID0gL15bXFx3LV0qJC8sXG4gICAgY2xhc3MydHlwZSA9IHt9LFxuICAgIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZyxcbiAgICB6ZXB0byA9IHt9LFxuICAgIGNhbWVsaXplLCB1bmlxLFxuICAgIHRlbXBQYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICBwcm9wTWFwID0ge1xuICAgICAgJ3RhYmluZGV4JzogJ3RhYkluZGV4JyxcbiAgICAgICdyZWFkb25seSc6ICdyZWFkT25seScsXG4gICAgICAnZm9yJzogJ2h0bWxGb3InLFxuICAgICAgJ2NsYXNzJzogJ2NsYXNzTmFtZScsXG4gICAgICAnbWF4bGVuZ3RoJzogJ21heExlbmd0aCcsXG4gICAgICAnY2VsbHNwYWNpbmcnOiAnY2VsbFNwYWNpbmcnLFxuICAgICAgJ2NlbGxwYWRkaW5nJzogJ2NlbGxQYWRkaW5nJyxcbiAgICAgICdyb3dzcGFuJzogJ3Jvd1NwYW4nLFxuICAgICAgJ2NvbHNwYW4nOiAnY29sU3BhbicsXG4gICAgICAndXNlbWFwJzogJ3VzZU1hcCcsXG4gICAgICAnZnJhbWVib3JkZXInOiAnZnJhbWVCb3JkZXInLFxuICAgICAgJ2NvbnRlbnRlZGl0YWJsZSc6ICdjb250ZW50RWRpdGFibGUnXG4gICAgfSxcbiAgICBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fFxuICAgICAgZnVuY3Rpb24ob2JqZWN0KXsgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEFycmF5IH1cblxuICB6ZXB0by5tYXRjaGVzID0gZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoIXNlbGVjdG9yIHx8ICFlbGVtZW50IHx8IGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHJldHVybiBmYWxzZVxuICAgIHZhciBtYXRjaGVzU2VsZWN0b3IgPSBlbGVtZW50Lm1hdGNoZXMgfHwgZWxlbWVudC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgZWxlbWVudC5vTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubWF0Y2hlc1NlbGVjdG9yXG4gICAgaWYgKG1hdGNoZXNTZWxlY3RvcikgcmV0dXJuIG1hdGNoZXNTZWxlY3Rvci5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKVxuICAgIC8vIGZhbGwgYmFjayB0byBwZXJmb3JtaW5nIGEgc2VsZWN0b3I6XG4gICAgdmFyIG1hdGNoLCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGUsIHRlbXAgPSAhcGFyZW50XG4gICAgaWYgKHRlbXApIChwYXJlbnQgPSB0ZW1wUGFyZW50KS5hcHBlbmRDaGlsZChlbGVtZW50KVxuICAgIG1hdGNoID0gfnplcHRvLnFzYShwYXJlbnQsIHNlbGVjdG9yKS5pbmRleE9mKGVsZW1lbnQpXG4gICAgdGVtcCAmJiB0ZW1wUGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpXG4gICAgcmV0dXJuIG1hdGNoXG4gIH1cblxuICBmdW5jdGlvbiB0eXBlKG9iaikge1xuICAgIHJldHVybiBvYmogPT0gbnVsbCA/IFN0cmluZyhvYmopIDpcbiAgICAgIGNsYXNzMnR5cGVbdG9TdHJpbmcuY2FsbChvYmopXSB8fCBcIm9iamVjdFwiXG4gIH1cblxuICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB0eXBlKHZhbHVlKSA9PSBcImZ1bmN0aW9uXCIgfVxuICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopICAgICB7IHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT0gb2JqLndpbmRvdyB9XG4gIGZ1bmN0aW9uIGlzRG9jdW1lbnQob2JqKSAgIHsgcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iai5ub2RlVHlwZSA9PSBvYmouRE9DVU1FTlRfTk9ERSB9XG4gIGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikgICAgIHsgcmV0dXJuIHR5cGUob2JqKSA9PSBcIm9iamVjdFwiIH1cbiAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgICByZXR1cm4gaXNPYmplY3Qob2JqKSAmJiAhaXNXaW5kb3cob2JqKSAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PSBPYmplY3QucHJvdG90eXBlXG4gIH1cblxuICBmdW5jdGlvbiBsaWtlQXJyYXkob2JqKSB7XG4gICAgdmFyIGxlbmd0aCA9ICEhb2JqICYmICdsZW5ndGgnIGluIG9iaiAmJiBvYmoubGVuZ3RoLFxuICAgICAgdHlwZSA9ICQudHlwZShvYmopXG5cbiAgICByZXR1cm4gJ2Z1bmN0aW9uJyAhPSB0eXBlICYmICFpc1dpbmRvdyhvYmopICYmIChcbiAgICAgICdhcnJheScgPT0gdHlwZSB8fCBsZW5ndGggPT09IDAgfHxcbiAgICAgICAgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID4gMCAmJiAobGVuZ3RoIC0gMSkgaW4gb2JqKVxuICAgIClcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBhY3QoYXJyYXkpIHsgcmV0dXJuIGZpbHRlci5jYWxsKGFycmF5LCBmdW5jdGlvbihpdGVtKXsgcmV0dXJuIGl0ZW0gIT0gbnVsbCB9KSB9XG4gIGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXkpIHsgcmV0dXJuIGFycmF5Lmxlbmd0aCA+IDAgPyAkLmZuLmNvbmNhdC5hcHBseShbXSwgYXJyYXkpIDogYXJyYXkgfVxuICBjYW1lbGl6ZSA9IGZ1bmN0aW9uKHN0cil7IHJldHVybiBzdHIucmVwbGFjZSgvLSsoLik/L2csIGZ1bmN0aW9uKG1hdGNoLCBjaHIpeyByZXR1cm4gY2hyID8gY2hyLnRvVXBwZXJDYXNlKCkgOiAnJyB9KSB9XG4gIGZ1bmN0aW9uIGRhc2hlcml6ZShzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLzo6L2csICcvJylcbiAgICAgICAgICAgLnJlcGxhY2UoLyhbQS1aXSspKFtBLVpdW2Etel0pL2csICckMV8kMicpXG4gICAgICAgICAgIC5yZXBsYWNlKC8oW2EtelxcZF0pKFtBLVpdKS9nLCAnJDFfJDInKVxuICAgICAgICAgICAucmVwbGFjZSgvXy9nLCAnLScpXG4gICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gIH1cbiAgdW5pcSA9IGZ1bmN0aW9uKGFycmF5KXsgcmV0dXJuIGZpbHRlci5jYWxsKGFycmF5LCBmdW5jdGlvbihpdGVtLCBpZHgpeyByZXR1cm4gYXJyYXkuaW5kZXhPZihpdGVtKSA9PSBpZHggfSkgfVxuXG4gIGZ1bmN0aW9uIGNsYXNzUkUobmFtZSkge1xuICAgIHJldHVybiBuYW1lIGluIGNsYXNzQ2FjaGUgP1xuICAgICAgY2xhc3NDYWNoZVtuYW1lXSA6IChjbGFzc0NhY2hlW25hbWVdID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIG5hbWUgKyAnKFxcXFxzfCQpJykpXG4gIH1cblxuICBmdW5jdGlvbiBtYXliZUFkZFB4KG5hbWUsIHZhbHVlKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIiAmJiAhY3NzTnVtYmVyW2Rhc2hlcml6ZShuYW1lKV0pID8gdmFsdWUgKyBcInB4XCIgOiB2YWx1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdERpc3BsYXkobm9kZU5hbWUpIHtcbiAgICB2YXIgZWxlbWVudCwgZGlzcGxheVxuICAgIGlmICghZWxlbWVudERpc3BsYXlbbm9kZU5hbWVdKSB7XG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSlcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudClcbiAgICAgIGRpc3BsYXkgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsICcnKS5nZXRQcm9wZXJ0eVZhbHVlKFwiZGlzcGxheVwiKVxuICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpXG4gICAgICBkaXNwbGF5ID09IFwibm9uZVwiICYmIChkaXNwbGF5ID0gXCJibG9ja1wiKVxuICAgICAgZWxlbWVudERpc3BsYXlbbm9kZU5hbWVdID0gZGlzcGxheVxuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudERpc3BsYXlbbm9kZU5hbWVdXG4gIH1cblxuICBmdW5jdGlvbiBjaGlsZHJlbihlbGVtZW50KSB7XG4gICAgcmV0dXJuICdjaGlsZHJlbicgaW4gZWxlbWVudCA/XG4gICAgICBzbGljZS5jYWxsKGVsZW1lbnQuY2hpbGRyZW4pIDpcbiAgICAgICQubWFwKGVsZW1lbnQuY2hpbGROb2RlcywgZnVuY3Rpb24obm9kZSl7IGlmIChub2RlLm5vZGVUeXBlID09IDEpIHJldHVybiBub2RlIH0pXG4gIH1cblxuICBmdW5jdGlvbiBaKGRvbSwgc2VsZWN0b3IpIHtcbiAgICB2YXIgaSwgbGVuID0gZG9tID8gZG9tLmxlbmd0aCA6IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHRoaXNbaV0gPSBkb21baV1cbiAgICB0aGlzLmxlbmd0aCA9IGxlblxuICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJ1xuICB9XG5cbiAgLy8gYCQuemVwdG8uZnJhZ21lbnRgIHRha2VzIGEgaHRtbCBzdHJpbmcgYW5kIGFuIG9wdGlvbmFsIHRhZyBuYW1lXG4gIC8vIHRvIGdlbmVyYXRlIERPTSBub2RlcyBmcm9tIHRoZSBnaXZlbiBodG1sIHN0cmluZy5cbiAgLy8gVGhlIGdlbmVyYXRlZCBET00gbm9kZXMgYXJlIHJldHVybmVkIGFzIGFuIGFycmF5LlxuICAvLyBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBvdmVycmlkZGVuIGluIHBsdWdpbnMgZm9yIGV4YW1wbGUgdG8gbWFrZVxuICAvLyBpdCBjb21wYXRpYmxlIHdpdGggYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHRoZSBET00gZnVsbHkuXG4gIHplcHRvLmZyYWdtZW50ID0gZnVuY3Rpb24oaHRtbCwgbmFtZSwgcHJvcGVydGllcykge1xuICAgIHZhciBkb20sIG5vZGVzLCBjb250YWluZXJcblxuICAgIC8vIEEgc3BlY2lhbCBjYXNlIG9wdGltaXphdGlvbiBmb3IgYSBzaW5nbGUgdGFnXG4gICAgaWYgKHNpbmdsZVRhZ1JFLnRlc3QoaHRtbCkpIGRvbSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChSZWdFeHAuJDEpKVxuXG4gICAgaWYgKCFkb20pIHtcbiAgICAgIGlmIChodG1sLnJlcGxhY2UpIGh0bWwgPSBodG1sLnJlcGxhY2UodGFnRXhwYW5kZXJSRSwgXCI8JDE+PC8kMj5cIilcbiAgICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIG5hbWUgPSBmcmFnbWVudFJFLnRlc3QoaHRtbCkgJiYgUmVnRXhwLiQxXG4gICAgICBpZiAoIShuYW1lIGluIGNvbnRhaW5lcnMpKSBuYW1lID0gJyonXG5cbiAgICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNbbmFtZV1cbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJyArIGh0bWxcbiAgICAgIGRvbSA9ICQuZWFjaChzbGljZS5jYWxsKGNvbnRhaW5lci5jaGlsZE5vZGVzKSwgZnVuY3Rpb24oKXtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChpc1BsYWluT2JqZWN0KHByb3BlcnRpZXMpKSB7XG4gICAgICBub2RlcyA9ICQoZG9tKVxuICAgICAgJC5lYWNoKHByb3BlcnRpZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG1ldGhvZEF0dHJpYnV0ZXMuaW5kZXhPZihrZXkpID4gLTEpIG5vZGVzW2tleV0odmFsdWUpXG4gICAgICAgIGVsc2Ugbm9kZXMuYXR0cihrZXksIHZhbHVlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tXG4gIH1cblxuICAvLyBgJC56ZXB0by5aYCBzd2FwcyBvdXQgdGhlIHByb3RvdHlwZSBvZiB0aGUgZ2l2ZW4gYGRvbWAgYXJyYXlcbiAgLy8gb2Ygbm9kZXMgd2l0aCBgJC5mbmAgYW5kIHRodXMgc3VwcGx5aW5nIGFsbCB0aGUgWmVwdG8gZnVuY3Rpb25zXG4gIC8vIHRvIHRoZSBhcnJheS4gVGhpcyBtZXRob2QgY2FuIGJlIG92ZXJyaWRkZW4gaW4gcGx1Z2lucy5cbiAgemVwdG8uWiA9IGZ1bmN0aW9uKGRvbSwgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IFooZG9tLCBzZWxlY3RvcilcbiAgfVxuXG4gIC8vIGAkLnplcHRvLmlzWmAgc2hvdWxkIHJldHVybiBgdHJ1ZWAgaWYgdGhlIGdpdmVuIG9iamVjdCBpcyBhIFplcHRvXG4gIC8vIGNvbGxlY3Rpb24uIFRoaXMgbWV0aG9kIGNhbiBiZSBvdmVycmlkZGVuIGluIHBsdWdpbnMuXG4gIHplcHRvLmlzWiA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiB6ZXB0by5aXG4gIH1cblxuICAvLyBgJC56ZXB0by5pbml0YCBpcyBaZXB0bydzIGNvdW50ZXJwYXJ0IHRvIGpRdWVyeSdzIGAkLmZuLmluaXRgIGFuZFxuICAvLyB0YWtlcyBhIENTUyBzZWxlY3RvciBhbmQgYW4gb3B0aW9uYWwgY29udGV4dCAoYW5kIGhhbmRsZXMgdmFyaW91c1xuICAvLyBzcGVjaWFsIGNhc2VzKS5cbiAgLy8gVGhpcyBtZXRob2QgY2FuIGJlIG92ZXJyaWRkZW4gaW4gcGx1Z2lucy5cbiAgemVwdG8uaW5pdCA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIGRvbVxuICAgIC8vIElmIG5vdGhpbmcgZ2l2ZW4sIHJldHVybiBhbiBlbXB0eSBaZXB0byBjb2xsZWN0aW9uXG4gICAgaWYgKCFzZWxlY3RvcikgcmV0dXJuIHplcHRvLlooKVxuICAgIC8vIE9wdGltaXplIGZvciBzdHJpbmcgc2VsZWN0b3JzXG4gICAgZWxzZSBpZiAodHlwZW9mIHNlbGVjdG9yID09ICdzdHJpbmcnKSB7XG4gICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnRyaW0oKVxuICAgICAgLy8gSWYgaXQncyBhIGh0bWwgZnJhZ21lbnQsIGNyZWF0ZSBub2RlcyBmcm9tIGl0XG4gICAgICAvLyBOb3RlOiBJbiBib3RoIENocm9tZSAyMSBhbmQgRmlyZWZveCAxNSwgRE9NIGVycm9yIDEyXG4gICAgICAvLyBpcyB0aHJvd24gaWYgdGhlIGZyYWdtZW50IGRvZXNuJ3QgYmVnaW4gd2l0aCA8XG4gICAgICBpZiAoc2VsZWN0b3JbMF0gPT0gJzwnICYmIGZyYWdtZW50UkUudGVzdChzZWxlY3RvcikpXG4gICAgICAgIGRvbSA9IHplcHRvLmZyYWdtZW50KHNlbGVjdG9yLCBSZWdFeHAuJDEsIGNvbnRleHQpLCBzZWxlY3RvciA9IG51bGxcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb250ZXh0LCBjcmVhdGUgYSBjb2xsZWN0aW9uIG9uIHRoYXQgY29udGV4dCBmaXJzdCwgYW5kIHNlbGVjdFxuICAgICAgLy8gbm9kZXMgZnJvbSB0aGVyZVxuICAgICAgZWxzZSBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gJChjb250ZXh0KS5maW5kKHNlbGVjdG9yKVxuICAgICAgLy8gSWYgaXQncyBhIENTUyBzZWxlY3RvciwgdXNlIGl0IHRvIHNlbGVjdCBub2Rlcy5cbiAgICAgIGVsc2UgZG9tID0gemVwdG8ucXNhKGRvY3VtZW50LCBzZWxlY3RvcilcbiAgICB9XG4gICAgLy8gSWYgYSBmdW5jdGlvbiBpcyBnaXZlbiwgY2FsbCBpdCB3aGVuIHRoZSBET00gaXMgcmVhZHlcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkgcmV0dXJuICQoZG9jdW1lbnQpLnJlYWR5KHNlbGVjdG9yKVxuICAgIC8vIElmIGEgWmVwdG8gY29sbGVjdGlvbiBpcyBnaXZlbiwganVzdCByZXR1cm4gaXRcbiAgICBlbHNlIGlmICh6ZXB0by5pc1ooc2VsZWN0b3IpKSByZXR1cm4gc2VsZWN0b3JcbiAgICBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbGl6ZSBhcnJheSBpZiBhbiBhcnJheSBvZiBub2RlcyBpcyBnaXZlblxuICAgICAgaWYgKGlzQXJyYXkoc2VsZWN0b3IpKSBkb20gPSBjb21wYWN0KHNlbGVjdG9yKVxuICAgICAgLy8gV3JhcCBET00gbm9kZXMuXG4gICAgICBlbHNlIGlmIChpc09iamVjdChzZWxlY3RvcikpXG4gICAgICAgIGRvbSA9IFtzZWxlY3Rvcl0sIHNlbGVjdG9yID0gbnVsbFxuICAgICAgLy8gSWYgaXQncyBhIGh0bWwgZnJhZ21lbnQsIGNyZWF0ZSBub2RlcyBmcm9tIGl0XG4gICAgICBlbHNlIGlmIChmcmFnbWVudFJFLnRlc3Qoc2VsZWN0b3IpKVxuICAgICAgICBkb20gPSB6ZXB0by5mcmFnbWVudChzZWxlY3Rvci50cmltKCksIFJlZ0V4cC4kMSwgY29udGV4dCksIHNlbGVjdG9yID0gbnVsbFxuICAgICAgLy8gSWYgdGhlcmUncyBhIGNvbnRleHQsIGNyZWF0ZSBhIGNvbGxlY3Rpb24gb24gdGhhdCBjb250ZXh0IGZpcnN0LCBhbmQgc2VsZWN0XG4gICAgICAvLyBub2RlcyBmcm9tIHRoZXJlXG4gICAgICBlbHNlIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIHJldHVybiAkKGNvbnRleHQpLmZpbmQoc2VsZWN0b3IpXG4gICAgICAvLyBBbmQgbGFzdCBidXQgbm8gbGVhc3QsIGlmIGl0J3MgYSBDU1Mgc2VsZWN0b3IsIHVzZSBpdCB0byBzZWxlY3Qgbm9kZXMuXG4gICAgICBlbHNlIGRvbSA9IHplcHRvLnFzYShkb2N1bWVudCwgc2VsZWN0b3IpXG4gICAgfVxuICAgIC8vIGNyZWF0ZSBhIG5ldyBaZXB0byBjb2xsZWN0aW9uIGZyb20gdGhlIG5vZGVzIGZvdW5kXG4gICAgcmV0dXJuIHplcHRvLlooZG9tLCBzZWxlY3RvcilcbiAgfVxuXG4gIC8vIGAkYCB3aWxsIGJlIHRoZSBiYXNlIGBaZXB0b2Agb2JqZWN0LiBXaGVuIGNhbGxpbmcgdGhpc1xuICAvLyBmdW5jdGlvbiBqdXN0IGNhbGwgYCQuemVwdG8uaW5pdCwgd2hpY2ggbWFrZXMgdGhlIGltcGxlbWVudGF0aW9uXG4gIC8vIGRldGFpbHMgb2Ygc2VsZWN0aW5nIG5vZGVzIGFuZCBjcmVhdGluZyBaZXB0byBjb2xsZWN0aW9uc1xuICAvLyBwYXRjaGFibGUgaW4gcGx1Z2lucy5cbiAgJCA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBjb250ZXh0KXtcbiAgICByZXR1cm4gemVwdG8uaW5pdChzZWxlY3RvciwgY29udGV4dClcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQsIHNvdXJjZSwgZGVlcCkge1xuICAgIGZvciAoa2V5IGluIHNvdXJjZSlcbiAgICAgIGlmIChkZWVwICYmIChpc1BsYWluT2JqZWN0KHNvdXJjZVtrZXldKSB8fCBpc0FycmF5KHNvdXJjZVtrZXldKSkpIHtcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pICYmICFpc1BsYWluT2JqZWN0KHRhcmdldFtrZXldKSlcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHt9XG4gICAgICAgIGlmIChpc0FycmF5KHNvdXJjZVtrZXldKSAmJiAhaXNBcnJheSh0YXJnZXRba2V5XSkpXG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBbXVxuICAgICAgICBleHRlbmQodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldLCBkZWVwKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc291cmNlW2tleV0gIT09IHVuZGVmaW5lZCkgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XVxuICB9XG5cbiAgLy8gQ29weSBhbGwgYnV0IHVuZGVmaW5lZCBwcm9wZXJ0aWVzIGZyb20gb25lIG9yIG1vcmVcbiAgLy8gb2JqZWN0cyB0byB0aGUgYHRhcmdldGAgb2JqZWN0LlxuICAkLmV4dGVuZCA9IGZ1bmN0aW9uKHRhcmdldCl7XG4gICAgdmFyIGRlZXAsIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PSAnYm9vbGVhbicpIHtcbiAgICAgIGRlZXAgPSB0YXJnZXRcbiAgICAgIHRhcmdldCA9IGFyZ3Muc2hpZnQoKVxuICAgIH1cbiAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24oYXJnKXsgZXh0ZW5kKHRhcmdldCwgYXJnLCBkZWVwKSB9KVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIC8vIGAkLnplcHRvLnFzYWAgaXMgWmVwdG8ncyBDU1Mgc2VsZWN0b3IgaW1wbGVtZW50YXRpb24gd2hpY2hcbiAgLy8gdXNlcyBgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbGAgYW5kIG9wdGltaXplcyBmb3Igc29tZSBzcGVjaWFsIGNhc2VzLCBsaWtlIGAjaWRgLlxuICAvLyBUaGlzIG1ldGhvZCBjYW4gYmUgb3ZlcnJpZGRlbiBpbiBwbHVnaW5zLlxuICB6ZXB0by5xc2EgPSBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3Rvcil7XG4gICAgdmFyIGZvdW5kLFxuICAgICAgICBtYXliZUlEID0gc2VsZWN0b3JbMF0gPT0gJyMnLFxuICAgICAgICBtYXliZUNsYXNzID0gIW1heWJlSUQgJiYgc2VsZWN0b3JbMF0gPT0gJy4nLFxuICAgICAgICBuYW1lT25seSA9IG1heWJlSUQgfHwgbWF5YmVDbGFzcyA/IHNlbGVjdG9yLnNsaWNlKDEpIDogc2VsZWN0b3IsIC8vIEVuc3VyZSB0aGF0IGEgMSBjaGFyIHRhZyBuYW1lIHN0aWxsIGdldHMgY2hlY2tlZFxuICAgICAgICBpc1NpbXBsZSA9IHNpbXBsZVNlbGVjdG9yUkUudGVzdChuYW1lT25seSlcbiAgICByZXR1cm4gKGVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQgJiYgaXNTaW1wbGUgJiYgbWF5YmVJRCkgPyAvLyBTYWZhcmkgRG9jdW1lbnRGcmFnbWVudCBkb2Vzbid0IGhhdmUgZ2V0RWxlbWVudEJ5SWRcbiAgICAgICggKGZvdW5kID0gZWxlbWVudC5nZXRFbGVtZW50QnlJZChuYW1lT25seSkpID8gW2ZvdW5kXSA6IFtdICkgOlxuICAgICAgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEgJiYgZWxlbWVudC5ub2RlVHlwZSAhPT0gOSAmJiBlbGVtZW50Lm5vZGVUeXBlICE9PSAxMSkgPyBbXSA6XG4gICAgICBzbGljZS5jYWxsKFxuICAgICAgICBpc1NpbXBsZSAmJiAhbWF5YmVJRCAmJiBlbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPyAvLyBEb2N1bWVudEZyYWdtZW50IGRvZXNuJ3QgaGF2ZSBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lL1RhZ05hbWVcbiAgICAgICAgICBtYXliZUNsYXNzID8gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG5hbWVPbmx5KSA6IC8vIElmIGl0J3Mgc2ltcGxlLCBpdCBjb3VsZCBiZSBhIGNsYXNzXG4gICAgICAgICAgZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3RvcikgOiAvLyBPciBhIHRhZ1xuICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikgLy8gT3IgaXQncyBub3Qgc2ltcGxlLCBhbmQgd2UgbmVlZCB0byBxdWVyeSBhbGxcbiAgICAgIClcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlcmVkKG5vZGVzLCBzZWxlY3Rvcikge1xuICAgIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gJChub2RlcykgOiAkKG5vZGVzKS5maWx0ZXIoc2VsZWN0b3IpXG4gIH1cblxuICAkLmNvbnRhaW5zID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zID9cbiAgICBmdW5jdGlvbihwYXJlbnQsIG5vZGUpIHtcbiAgICAgIHJldHVybiBwYXJlbnQgIT09IG5vZGUgJiYgcGFyZW50LmNvbnRhaW5zKG5vZGUpXG4gICAgfSA6XG4gICAgZnVuY3Rpb24ocGFyZW50LCBub2RlKSB7XG4gICAgICB3aGlsZSAobm9kZSAmJiAobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkpXG4gICAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgZnVuY3Rpb24gZnVuY0FyZyhjb250ZXh0LCBhcmcsIGlkeCwgcGF5bG9hZCkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGFyZykgPyBhcmcuY2FsbChjb250ZXh0LCBpZHgsIHBheWxvYWQpIDogYXJnXG4gIH1cblxuICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobm9kZSwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YWx1ZSA9PSBudWxsID8gbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSkgOiBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSlcbiAgfVxuXG4gIC8vIGFjY2VzcyBjbGFzc05hbWUgcHJvcGVydHkgd2hpbGUgcmVzcGVjdGluZyBTVkdBbmltYXRlZFN0cmluZ1xuICBmdW5jdGlvbiBjbGFzc05hbWUobm9kZSwgdmFsdWUpe1xuICAgIHZhciBrbGFzcyA9IG5vZGUuY2xhc3NOYW1lIHx8ICcnLFxuICAgICAgICBzdmcgICA9IGtsYXNzICYmIGtsYXNzLmJhc2VWYWwgIT09IHVuZGVmaW5lZFxuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBzdmcgPyBrbGFzcy5iYXNlVmFsIDoga2xhc3NcbiAgICBzdmcgPyAoa2xhc3MuYmFzZVZhbCA9IHZhbHVlKSA6IChub2RlLmNsYXNzTmFtZSA9IHZhbHVlKVxuICB9XG5cbiAgLy8gXCJ0cnVlXCIgID0+IHRydWVcbiAgLy8gXCJmYWxzZVwiID0+IGZhbHNlXG4gIC8vIFwibnVsbFwiICA9PiBudWxsXG4gIC8vIFwiNDJcIiAgICA9PiA0MlxuICAvLyBcIjQyLjVcIiAgPT4gNDIuNVxuICAvLyBcIjA4XCIgICAgPT4gXCIwOFwiXG4gIC8vIEpTT04gICAgPT4gcGFyc2UgaWYgdmFsaWRcbiAgLy8gU3RyaW5nICA9PiBzZWxmXG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHZhbHVlID9cbiAgICAgICAgdmFsdWUgPT0gXCJ0cnVlXCIgfHxcbiAgICAgICAgKCB2YWx1ZSA9PSBcImZhbHNlXCIgPyBmYWxzZSA6XG4gICAgICAgICAgdmFsdWUgPT0gXCJudWxsXCIgPyBudWxsIDpcbiAgICAgICAgICArdmFsdWUgKyBcIlwiID09IHZhbHVlID8gK3ZhbHVlIDpcbiAgICAgICAgICAvXltcXFtcXHtdLy50ZXN0KHZhbHVlKSA/ICQucGFyc2VKU09OKHZhbHVlKSA6XG4gICAgICAgICAgdmFsdWUgKVxuICAgICAgICA6IHZhbHVlXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH1cblxuICAkLnR5cGUgPSB0eXBlXG4gICQuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb25cbiAgJC5pc1dpbmRvdyA9IGlzV2luZG93XG4gICQuaXNBcnJheSA9IGlzQXJyYXlcbiAgJC5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdFxuXG4gICQuaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBuYW1lXG4gICAgZm9yIChuYW1lIGluIG9iaikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gICQuaXNOdW1lcmljID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIG51bSA9IE51bWJlcih2YWwpLCB0eXBlID0gdHlwZW9mIHZhbFxuICAgIHJldHVybiB2YWwgIT0gbnVsbCAmJiB0eXBlICE9ICdib29sZWFuJyAmJlxuICAgICAgKHR5cGUgIT0gJ3N0cmluZycgfHwgdmFsLmxlbmd0aCkgJiZcbiAgICAgICFpc05hTihudW0pICYmIGlzRmluaXRlKG51bSkgfHwgZmFsc2VcbiAgfVxuXG4gICQuaW5BcnJheSA9IGZ1bmN0aW9uKGVsZW0sIGFycmF5LCBpKXtcbiAgICByZXR1cm4gZW1wdHlBcnJheS5pbmRleE9mLmNhbGwoYXJyYXksIGVsZW0sIGkpXG4gIH1cblxuICAkLmNhbWVsQ2FzZSA9IGNhbWVsaXplXG4gICQudHJpbSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHIgPT0gbnVsbCA/IFwiXCIgOiBTdHJpbmcucHJvdG90eXBlLnRyaW0uY2FsbChzdHIpXG4gIH1cblxuICAvLyBwbHVnaW4gY29tcGF0aWJpbGl0eVxuICAkLnV1aWQgPSAwXG4gICQuc3VwcG9ydCA9IHsgfVxuICAkLmV4cHIgPSB7IH1cbiAgJC5ub29wID0gZnVuY3Rpb24oKSB7fVxuXG4gICQubWFwID0gZnVuY3Rpb24oZWxlbWVudHMsIGNhbGxiYWNrKXtcbiAgICB2YXIgdmFsdWUsIHZhbHVlcyA9IFtdLCBpLCBrZXlcbiAgICBpZiAobGlrZUFycmF5KGVsZW1lbnRzKSlcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrKGVsZW1lbnRzW2ldLCBpKVxuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWVzLnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgZWxzZVxuICAgICAgZm9yIChrZXkgaW4gZWxlbWVudHMpIHtcbiAgICAgICAgdmFsdWUgPSBjYWxsYmFjayhlbGVtZW50c1trZXldLCBrZXkpXG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZXMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICByZXR1cm4gZmxhdHRlbih2YWx1ZXMpXG4gIH1cblxuICAkLmVhY2ggPSBmdW5jdGlvbihlbGVtZW50cywgY2FsbGJhY2spe1xuICAgIHZhciBpLCBrZXlcbiAgICBpZiAobGlrZUFycmF5KGVsZW1lbnRzKSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoY2FsbGJhY2suY2FsbChlbGVtZW50c1tpXSwgaSwgZWxlbWVudHNbaV0pID09PSBmYWxzZSkgcmV0dXJuIGVsZW1lbnRzXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoa2V5IGluIGVsZW1lbnRzKVxuICAgICAgICBpZiAoY2FsbGJhY2suY2FsbChlbGVtZW50c1trZXldLCBrZXksIGVsZW1lbnRzW2tleV0pID09PSBmYWxzZSkgcmV0dXJuIGVsZW1lbnRzXG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnRzXG4gIH1cblxuICAkLmdyZXAgPSBmdW5jdGlvbihlbGVtZW50cywgY2FsbGJhY2spe1xuICAgIHJldHVybiBmaWx0ZXIuY2FsbChlbGVtZW50cywgY2FsbGJhY2spXG4gIH1cblxuICBpZiAod2luZG93LkpTT04pICQucGFyc2VKU09OID0gSlNPTi5wYXJzZVxuXG4gIC8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxuICAkLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbihpLCBuYW1lKSB7XG4gICAgY2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgfSlcblxuICAvLyBEZWZpbmUgbWV0aG9kcyB0aGF0IHdpbGwgYmUgYXZhaWxhYmxlIG9uIGFsbFxuICAvLyBaZXB0byBjb2xsZWN0aW9uc1xuICAkLmZuID0ge1xuICAgIGNvbnN0cnVjdG9yOiB6ZXB0by5aLFxuICAgIGxlbmd0aDogMCxcblxuICAgIC8vIEJlY2F1c2UgYSBjb2xsZWN0aW9uIGFjdHMgbGlrZSBhbiBhcnJheVxuICAgIC8vIGNvcHkgb3ZlciB0aGVzZSB1c2VmdWwgYXJyYXkgZnVuY3Rpb25zLlxuICAgIGZvckVhY2g6IGVtcHR5QXJyYXkuZm9yRWFjaCxcbiAgICByZWR1Y2U6IGVtcHR5QXJyYXkucmVkdWNlLFxuICAgIHB1c2g6IGVtcHR5QXJyYXkucHVzaCxcbiAgICBzb3J0OiBlbXB0eUFycmF5LnNvcnQsXG4gICAgc3BsaWNlOiBlbXB0eUFycmF5LnNwbGljZSxcbiAgICBpbmRleE9mOiBlbXB0eUFycmF5LmluZGV4T2YsXG4gICAgY29uY2F0OiBmdW5jdGlvbigpe1xuICAgICAgdmFyIGksIHZhbHVlLCBhcmdzID0gW11cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBhcmd1bWVudHNbaV1cbiAgICAgICAgYXJnc1tpXSA9IHplcHRvLmlzWih2YWx1ZSkgPyB2YWx1ZS50b0FycmF5KCkgOiB2YWx1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbmNhdC5hcHBseSh6ZXB0by5pc1oodGhpcykgPyB0aGlzLnRvQXJyYXkoKSA6IHRoaXMsIGFyZ3MpXG4gICAgfSxcblxuICAgIC8vIGBtYXBgIGFuZCBgc2xpY2VgIGluIHRoZSBqUXVlcnkgQVBJIHdvcmsgZGlmZmVyZW50bHlcbiAgICAvLyBmcm9tIHRoZWlyIGFycmF5IGNvdW50ZXJwYXJ0c1xuICAgIG1hcDogZnVuY3Rpb24oZm4pe1xuICAgICAgcmV0dXJuICQoJC5tYXAodGhpcywgZnVuY3Rpb24oZWwsIGkpeyByZXR1cm4gZm4uY2FsbChlbCwgaSwgZWwpIH0pKVxuICAgIH0sXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gJChzbGljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKVxuICAgIH0sXG5cbiAgICByZWFkeTogZnVuY3Rpb24oY2FsbGJhY2spe1xuICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiBkb2N1bWVudC5ib2R5IGV4aXN0cyBmb3IgSUUgYXMgdGhhdCBicm93c2VyIHJlcG9ydHNcbiAgICAgIC8vIGRvY3VtZW50IHJlYWR5IHdoZW4gaXQgaGFzbid0IHlldCBjcmVhdGVkIHRoZSBib2R5IGVsZW1lbnRcbiAgICAgIGlmIChyZWFkeVJFLnRlc3QoZG9jdW1lbnQucmVhZHlTdGF0ZSkgJiYgZG9jdW1lbnQuYm9keSkgY2FsbGJhY2soJClcbiAgICAgIGVsc2UgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCl7IGNhbGxiYWNrKCQpIH0sIGZhbHNlKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9LFxuICAgIGdldDogZnVuY3Rpb24oaWR4KXtcbiAgICAgIHJldHVybiBpZHggPT09IHVuZGVmaW5lZCA/IHNsaWNlLmNhbGwodGhpcykgOiB0aGlzW2lkeCA+PSAwID8gaWR4IDogaWR4ICsgdGhpcy5sZW5ndGhdXG4gICAgfSxcbiAgICB0b0FycmF5OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5nZXQoKSB9LFxuICAgIHNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gdGhpcy5sZW5ndGhcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Tm9kZSAhPSBudWxsKVxuICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKVxuICAgICAgfSlcbiAgICB9LFxuICAgIGVhY2g6IGZ1bmN0aW9uKGNhbGxiYWNrKXtcbiAgICAgIGVtcHR5QXJyYXkuZXZlcnkuY2FsbCh0aGlzLCBmdW5jdGlvbihlbCwgaWR4KXtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoZWwsIGlkeCwgZWwpICE9PSBmYWxzZVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSxcbiAgICBmaWx0ZXI6IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkgcmV0dXJuIHRoaXMubm90KHRoaXMubm90KHNlbGVjdG9yKSlcbiAgICAgIHJldHVybiAkKGZpbHRlci5jYWxsKHRoaXMsIGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICByZXR1cm4gemVwdG8ubWF0Y2hlcyhlbGVtZW50LCBzZWxlY3RvcilcbiAgICAgIH0pKVxuICAgIH0sXG4gICAgYWRkOiBmdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0KXtcbiAgICAgIHJldHVybiAkKHVuaXEodGhpcy5jb25jYXQoJChzZWxlY3Rvcixjb250ZXh0KSkpKVxuICAgIH0sXG4gICAgaXM6IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDAgJiYgemVwdG8ubWF0Y2hlcyh0aGlzWzBdLCBzZWxlY3RvcilcbiAgICB9LFxuICAgIG5vdDogZnVuY3Rpb24oc2VsZWN0b3Ipe1xuICAgICAgdmFyIG5vZGVzPVtdXG4gICAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikgJiYgc2VsZWN0b3IuY2FsbCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oaWR4KXtcbiAgICAgICAgICBpZiAoIXNlbGVjdG9yLmNhbGwodGhpcyxpZHgpKSBub2Rlcy5wdXNoKHRoaXMpXG4gICAgICAgIH0pXG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFyIGV4Y2x1ZGVzID0gdHlwZW9mIHNlbGVjdG9yID09ICdzdHJpbmcnID8gdGhpcy5maWx0ZXIoc2VsZWN0b3IpIDpcbiAgICAgICAgICAobGlrZUFycmF5KHNlbGVjdG9yKSAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yLml0ZW0pKSA/IHNsaWNlLmNhbGwoc2VsZWN0b3IpIDogJChzZWxlY3RvcilcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGVsKXtcbiAgICAgICAgICBpZiAoZXhjbHVkZXMuaW5kZXhPZihlbCkgPCAwKSBub2Rlcy5wdXNoKGVsKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuICQobm9kZXMpXG4gICAgfSxcbiAgICBoYXM6IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gaXNPYmplY3Qoc2VsZWN0b3IpID9cbiAgICAgICAgICAkLmNvbnRhaW5zKHRoaXMsIHNlbGVjdG9yKSA6XG4gICAgICAgICAgJCh0aGlzKS5maW5kKHNlbGVjdG9yKS5zaXplKClcbiAgICAgIH0pXG4gICAgfSxcbiAgICBlcTogZnVuY3Rpb24oaWR4KXtcbiAgICAgIHJldHVybiBpZHggPT09IC0xID8gdGhpcy5zbGljZShpZHgpIDogdGhpcy5zbGljZShpZHgsICsgaWR4ICsgMSlcbiAgICB9LFxuICAgIGZpcnN0OiBmdW5jdGlvbigpe1xuICAgICAgdmFyIGVsID0gdGhpc1swXVxuICAgICAgcmV0dXJuIGVsICYmICFpc09iamVjdChlbCkgPyBlbCA6ICQoZWwpXG4gICAgfSxcbiAgICBsYXN0OiBmdW5jdGlvbigpe1xuICAgICAgdmFyIGVsID0gdGhpc1t0aGlzLmxlbmd0aCAtIDFdXG4gICAgICByZXR1cm4gZWwgJiYgIWlzT2JqZWN0KGVsKSA/IGVsIDogJChlbClcbiAgICB9LFxuICAgIGZpbmQ6IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIHZhciByZXN1bHQsICR0aGlzID0gdGhpc1xuICAgICAgaWYgKCFzZWxlY3RvcikgcmVzdWx0ID0gJCgpXG4gICAgICBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT0gJ29iamVjdCcpXG4gICAgICAgIHJlc3VsdCA9ICQoc2VsZWN0b3IpLmZpbHRlcihmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciBub2RlID0gdGhpc1xuICAgICAgICAgIHJldHVybiBlbXB0eUFycmF5LnNvbWUuY2FsbCgkdGhpcywgZnVuY3Rpb24ocGFyZW50KXtcbiAgICAgICAgICAgIHJldHVybiAkLmNvbnRhaW5zKHBhcmVudCwgbm9kZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgZWxzZSBpZiAodGhpcy5sZW5ndGggPT0gMSkgcmVzdWx0ID0gJCh6ZXB0by5xc2EodGhpc1swXSwgc2VsZWN0b3IpKVxuICAgICAgZWxzZSByZXN1bHQgPSB0aGlzLm1hcChmdW5jdGlvbigpeyByZXR1cm4gemVwdG8ucXNhKHRoaXMsIHNlbGVjdG9yKSB9KVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0sXG4gICAgY2xvc2VzdDogZnVuY3Rpb24oc2VsZWN0b3IsIGNvbnRleHQpe1xuICAgICAgdmFyIG5vZGVzID0gW10sIGNvbGxlY3Rpb24gPSB0eXBlb2Ygc2VsZWN0b3IgPT0gJ29iamVjdCcgJiYgJChzZWxlY3RvcilcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbihfLCBub2RlKXtcbiAgICAgICAgd2hpbGUgKG5vZGUgJiYgIShjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5pbmRleE9mKG5vZGUpID49IDAgOiB6ZXB0by5tYXRjaGVzKG5vZGUsIHNlbGVjdG9yKSkpXG4gICAgICAgICAgbm9kZSA9IG5vZGUgIT09IGNvbnRleHQgJiYgIWlzRG9jdW1lbnQobm9kZSkgJiYgbm9kZS5wYXJlbnROb2RlXG4gICAgICAgIGlmIChub2RlICYmIG5vZGVzLmluZGV4T2Yobm9kZSkgPCAwKSBub2Rlcy5wdXNoKG5vZGUpXG4gICAgICB9KVxuICAgICAgcmV0dXJuICQobm9kZXMpXG4gICAgfSxcbiAgICBwYXJlbnRzOiBmdW5jdGlvbihzZWxlY3Rvcil7XG4gICAgICB2YXIgYW5jZXN0b3JzID0gW10sIG5vZGVzID0gdGhpc1xuICAgICAgd2hpbGUgKG5vZGVzLmxlbmd0aCA+IDApXG4gICAgICAgIG5vZGVzID0gJC5tYXAobm9kZXMsIGZ1bmN0aW9uKG5vZGUpe1xuICAgICAgICAgIGlmICgobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkgJiYgIWlzRG9jdW1lbnQobm9kZSkgJiYgYW5jZXN0b3JzLmluZGV4T2Yobm9kZSkgPCAwKSB7XG4gICAgICAgICAgICBhbmNlc3RvcnMucHVzaChub2RlKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGVcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICByZXR1cm4gZmlsdGVyZWQoYW5jZXN0b3JzLCBzZWxlY3RvcilcbiAgICB9LFxuICAgIHBhcmVudDogZnVuY3Rpb24oc2VsZWN0b3Ipe1xuICAgICAgcmV0dXJuIGZpbHRlcmVkKHVuaXEodGhpcy5wbHVjaygncGFyZW50Tm9kZScpKSwgc2VsZWN0b3IpXG4gICAgfSxcbiAgICBjaGlsZHJlbjogZnVuY3Rpb24oc2VsZWN0b3Ipe1xuICAgICAgcmV0dXJuIGZpbHRlcmVkKHRoaXMubWFwKGZ1bmN0aW9uKCl7IHJldHVybiBjaGlsZHJlbih0aGlzKSB9KSwgc2VsZWN0b3IpXG4gICAgfSxcbiAgICBjb250ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmNvbnRlbnREb2N1bWVudCB8fCBzbGljZS5jYWxsKHRoaXMuY2hpbGROb2RlcykgfSlcbiAgICB9LFxuICAgIHNpYmxpbmdzOiBmdW5jdGlvbihzZWxlY3Rvcil7XG4gICAgICByZXR1cm4gZmlsdGVyZWQodGhpcy5tYXAoZnVuY3Rpb24oaSwgZWwpe1xuICAgICAgICByZXR1cm4gZmlsdGVyLmNhbGwoY2hpbGRyZW4oZWwucGFyZW50Tm9kZSksIGZ1bmN0aW9uKGNoaWxkKXsgcmV0dXJuIGNoaWxkIT09ZWwgfSlcbiAgICAgIH0pLCBzZWxlY3RvcilcbiAgICB9LFxuICAgIGVtcHR5OiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyB0aGlzLmlubmVySFRNTCA9ICcnIH0pXG4gICAgfSxcbiAgICAvLyBgcGx1Y2tgIGlzIGJvcnJvd2VkIGZyb20gUHJvdG90eXBlLmpzXG4gICAgcGx1Y2s6IGZ1bmN0aW9uKHByb3BlcnR5KXtcbiAgICAgIHJldHVybiAkLm1hcCh0aGlzLCBmdW5jdGlvbihlbCl7IHJldHVybiBlbFtwcm9wZXJ0eV0gfSlcbiAgICB9LFxuICAgIHNob3c6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIiAmJiAodGhpcy5zdHlsZS5kaXNwbGF5ID0gJycpXG4gICAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKHRoaXMsICcnKS5nZXRQcm9wZXJ0eVZhbHVlKFwiZGlzcGxheVwiKSA9PSBcIm5vbmVcIilcbiAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSBkZWZhdWx0RGlzcGxheSh0aGlzLm5vZGVOYW1lKVxuICAgICAgfSlcbiAgICB9LFxuICAgIHJlcGxhY2VXaXRoOiBmdW5jdGlvbihuZXdDb250ZW50KXtcbiAgICAgIHJldHVybiB0aGlzLmJlZm9yZShuZXdDb250ZW50KS5yZW1vdmUoKVxuICAgIH0sXG4gICAgd3JhcDogZnVuY3Rpb24oc3RydWN0dXJlKXtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jdGlvbihzdHJ1Y3R1cmUpXG4gICAgICBpZiAodGhpc1swXSAmJiAhZnVuYylcbiAgICAgICAgdmFyIGRvbSAgID0gJChzdHJ1Y3R1cmUpLmdldCgwKSxcbiAgICAgICAgICAgIGNsb25lID0gZG9tLnBhcmVudE5vZGUgfHwgdGhpcy5sZW5ndGggPiAxXG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICAkKHRoaXMpLndyYXBBbGwoXG4gICAgICAgICAgZnVuYyA/IHN0cnVjdHVyZS5jYWxsKHRoaXMsIGluZGV4KSA6XG4gICAgICAgICAgICBjbG9uZSA/IGRvbS5jbG9uZU5vZGUodHJ1ZSkgOiBkb21cbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9LFxuICAgIHdyYXBBbGw6IGZ1bmN0aW9uKHN0cnVjdHVyZSl7XG4gICAgICBpZiAodGhpc1swXSkge1xuICAgICAgICAkKHRoaXNbMF0pLmJlZm9yZShzdHJ1Y3R1cmUgPSAkKHN0cnVjdHVyZSkpXG4gICAgICAgIHZhciBjaGlsZHJlblxuICAgICAgICAvLyBkcmlsbCBkb3duIHRvIHRoZSBpbm1vc3QgZWxlbWVudFxuICAgICAgICB3aGlsZSAoKGNoaWxkcmVuID0gc3RydWN0dXJlLmNoaWxkcmVuKCkpLmxlbmd0aCkgc3RydWN0dXJlID0gY2hpbGRyZW4uZmlyc3QoKVxuICAgICAgICAkKHN0cnVjdHVyZSkuYXBwZW5kKHRoaXMpXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0sXG4gICAgd3JhcElubmVyOiBmdW5jdGlvbihzdHJ1Y3R1cmUpe1xuICAgICAgdmFyIGZ1bmMgPSBpc0Z1bmN0aW9uKHN0cnVjdHVyZSlcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyksIGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpLFxuICAgICAgICAgICAgZG9tICA9IGZ1bmMgPyBzdHJ1Y3R1cmUuY2FsbCh0aGlzLCBpbmRleCkgOiBzdHJ1Y3R1cmVcbiAgICAgICAgY29udGVudHMubGVuZ3RoID8gY29udGVudHMud3JhcEFsbChkb20pIDogc2VsZi5hcHBlbmQoZG9tKVxuICAgICAgfSlcbiAgICB9LFxuICAgIHVud3JhcDogZnVuY3Rpb24oKXtcbiAgICAgIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLnJlcGxhY2VXaXRoKCQodGhpcykuY2hpbGRyZW4oKSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0sXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuY2xvbmVOb2RlKHRydWUpIH0pXG4gICAgfSxcbiAgICBoaWRlOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHRoaXMuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIilcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24oc2V0dGluZyl7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBlbCA9ICQodGhpcylcbiAgICAgICAgOyhzZXR0aW5nID09PSB1bmRlZmluZWQgPyBlbC5jc3MoXCJkaXNwbGF5XCIpID09IFwibm9uZVwiIDogc2V0dGluZykgPyBlbC5zaG93KCkgOiBlbC5oaWRlKClcbiAgICAgIH0pXG4gICAgfSxcbiAgICBwcmV2OiBmdW5jdGlvbihzZWxlY3Rvcil7IHJldHVybiAkKHRoaXMucGx1Y2soJ3ByZXZpb3VzRWxlbWVudFNpYmxpbmcnKSkuZmlsdGVyKHNlbGVjdG9yIHx8ICcqJykgfSxcbiAgICBuZXh0OiBmdW5jdGlvbihzZWxlY3Rvcil7IHJldHVybiAkKHRoaXMucGx1Y2soJ25leHRFbGVtZW50U2libGluZycpKS5maWx0ZXIoc2VsZWN0b3IgfHwgJyonKSB9LFxuICAgIGh0bWw6IGZ1bmN0aW9uKGh0bWwpe1xuICAgICAgcmV0dXJuIDAgaW4gYXJndW1lbnRzID9cbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgICAgdmFyIG9yaWdpbkh0bWwgPSB0aGlzLmlubmVySFRNTFxuICAgICAgICAgICQodGhpcykuZW1wdHkoKS5hcHBlbmQoIGZ1bmNBcmcodGhpcywgaHRtbCwgaWR4LCBvcmlnaW5IdG1sKSApXG4gICAgICAgIH0pIDpcbiAgICAgICAgKDAgaW4gdGhpcyA/IHRoaXNbMF0uaW5uZXJIVE1MIDogbnVsbClcbiAgICB9LFxuICAgIHRleHQ6IGZ1bmN0aW9uKHRleHQpe1xuICAgICAgcmV0dXJuIDAgaW4gYXJndW1lbnRzID9cbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgICAgdmFyIG5ld1RleHQgPSBmdW5jQXJnKHRoaXMsIHRleHQsIGlkeCwgdGhpcy50ZXh0Q29udGVudClcbiAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gbmV3VGV4dCA9PSBudWxsID8gJycgOiAnJytuZXdUZXh0XG4gICAgICAgIH0pIDpcbiAgICAgICAgKDAgaW4gdGhpcyA/IHRoaXMucGx1Y2soJ3RleHRDb250ZW50Jykuam9pbihcIlwiKSA6IG51bGwpXG4gICAgfSxcbiAgICBhdHRyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSl7XG4gICAgICB2YXIgcmVzdWx0XG4gICAgICByZXR1cm4gKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnICYmICEoMSBpbiBhcmd1bWVudHMpKSA/XG4gICAgICAgICgwIGluIHRoaXMgJiYgdGhpc1swXS5ub2RlVHlwZSA9PSAxICYmIChyZXN1bHQgPSB0aGlzWzBdLmdldEF0dHJpYnV0ZShuYW1lKSkgIT0gbnVsbCA/IHJlc3VsdCA6IHVuZGVmaW5lZCkgOlxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oaWR4KXtcbiAgICAgICAgICBpZiAodGhpcy5ub2RlVHlwZSAhPT0gMSkgcmV0dXJuXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KG5hbWUpKSBmb3IgKGtleSBpbiBuYW1lKSBzZXRBdHRyaWJ1dGUodGhpcywga2V5LCBuYW1lW2tleV0pXG4gICAgICAgICAgZWxzZSBzZXRBdHRyaWJ1dGUodGhpcywgbmFtZSwgZnVuY0FyZyh0aGlzLCB2YWx1ZSwgaWR4LCB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKSkpXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICByZW1vdmVBdHRyOiBmdW5jdGlvbihuYW1lKXtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsgdGhpcy5ub2RlVHlwZSA9PT0gMSAmJiBuYW1lLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGUpe1xuICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcywgYXR0cmlidXRlKVxuICAgICAgfSwgdGhpcyl9KVxuICAgIH0sXG4gICAgcHJvcDogZnVuY3Rpb24obmFtZSwgdmFsdWUpe1xuICAgICAgbmFtZSA9IHByb3BNYXBbbmFtZV0gfHwgbmFtZVxuICAgICAgcmV0dXJuICgxIGluIGFyZ3VtZW50cykgP1xuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oaWR4KXtcbiAgICAgICAgICB0aGlzW25hbWVdID0gZnVuY0FyZyh0aGlzLCB2YWx1ZSwgaWR4LCB0aGlzW25hbWVdKVxuICAgICAgICB9KSA6XG4gICAgICAgICh0aGlzWzBdICYmIHRoaXNbMF1bbmFtZV0pXG4gICAgfSxcbiAgICByZW1vdmVQcm9wOiBmdW5jdGlvbihuYW1lKXtcbiAgICAgIG5hbWUgPSBwcm9wTWFwW25hbWVdIHx8IG5hbWVcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsgZGVsZXRlIHRoaXNbbmFtZV0gfSlcbiAgICB9LFxuICAgIGRhdGE6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKXtcbiAgICAgIHZhciBhdHRyTmFtZSA9ICdkYXRhLScgKyBuYW1lLnJlcGxhY2UoY2FwaXRhbFJFLCAnLSQxJykudG9Mb3dlckNhc2UoKVxuXG4gICAgICB2YXIgZGF0YSA9ICgxIGluIGFyZ3VtZW50cykgP1xuICAgICAgICB0aGlzLmF0dHIoYXR0ck5hbWUsIHZhbHVlKSA6XG4gICAgICAgIHRoaXMuYXR0cihhdHRyTmFtZSlcblxuICAgICAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkZXNlcmlhbGl6ZVZhbHVlKGRhdGEpIDogdW5kZWZpbmVkXG4gICAgfSxcbiAgICB2YWw6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIGlmICgwIGluIGFyZ3VtZW50cykge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgdmFsdWUgPSBcIlwiXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaWR4KXtcbiAgICAgICAgICB0aGlzLnZhbHVlID0gZnVuY0FyZyh0aGlzLCB2YWx1ZSwgaWR4LCB0aGlzLnZhbHVlKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbMF0gJiYgKHRoaXNbMF0ubXVsdGlwbGUgP1xuICAgICAgICAgICAkKHRoaXNbMF0pLmZpbmQoJ29wdGlvbicpLmZpbHRlcihmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5zZWxlY3RlZCB9KS5wbHVjaygndmFsdWUnKSA6XG4gICAgICAgICAgIHRoaXNbMF0udmFsdWUpXG4gICAgICB9XG4gICAgfSxcbiAgICBvZmZzZXQ6IGZ1bmN0aW9uKGNvb3JkaW5hdGVzKXtcbiAgICAgIGlmIChjb29yZGluYXRlcykgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpbmRleCl7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICBjb29yZHMgPSBmdW5jQXJnKHRoaXMsIGNvb3JkaW5hdGVzLCBpbmRleCwgJHRoaXMub2Zmc2V0KCkpLFxuICAgICAgICAgICAgcGFyZW50T2Zmc2V0ID0gJHRoaXMub2Zmc2V0UGFyZW50KCkub2Zmc2V0KCksXG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgdG9wOiAgY29vcmRzLnRvcCAgLSBwYXJlbnRPZmZzZXQudG9wLFxuICAgICAgICAgICAgICBsZWZ0OiBjb29yZHMubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgaWYgKCR0aGlzLmNzcygncG9zaXRpb24nKSA9PSAnc3RhdGljJykgcHJvcHNbJ3Bvc2l0aW9uJ10gPSAncmVsYXRpdmUnXG4gICAgICAgICR0aGlzLmNzcyhwcm9wcylcbiAgICAgIH0pXG4gICAgICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm4gbnVsbFxuICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAhPT0gdGhpc1swXSAmJiAhJC5jb250YWlucyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXNbMF0pKVxuICAgICAgICByZXR1cm4ge3RvcDogMCwgbGVmdDogMH1cbiAgICAgIHZhciBvYmogPSB0aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBsZWZ0OiBvYmoubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCxcbiAgICAgICAgdG9wOiBvYmoudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0LFxuICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChvYmoud2lkdGgpLFxuICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQob2JqLmhlaWdodClcbiAgICAgIH1cbiAgICB9LFxuICAgIGNzczogZnVuY3Rpb24ocHJvcGVydHksIHZhbHVlKXtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXNbMF1cbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbY2FtZWxpemUocHJvcGVydHkpXSB8fCBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsICcnKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KVxuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocHJvcGVydHkpKSB7XG4gICAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICAgICAgICB2YXIgcHJvcHMgPSB7fVxuICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCAnJylcbiAgICAgICAgICAkLmVhY2gocHJvcGVydHksIGZ1bmN0aW9uKF8sIHByb3Ape1xuICAgICAgICAgICAgcHJvcHNbcHJvcF0gPSAoZWxlbWVudC5zdHlsZVtjYW1lbGl6ZShwcm9wKV0gfHwgY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNzcyA9ICcnXG4gICAgICBpZiAodHlwZShwcm9wZXJ0eSkgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMClcbiAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKXsgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShkYXNoZXJpemUocHJvcGVydHkpKSB9KVxuICAgICAgICBlbHNlXG4gICAgICAgICAgY3NzID0gZGFzaGVyaXplKHByb3BlcnR5KSArIFwiOlwiICsgbWF5YmVBZGRQeChwcm9wZXJ0eSwgdmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGtleSBpbiBwcm9wZXJ0eSlcbiAgICAgICAgICBpZiAoIXByb3BlcnR5W2tleV0gJiYgcHJvcGVydHlba2V5XSAhPT0gMClcbiAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpeyB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KGRhc2hlcml6ZShrZXkpKSB9KVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNzcyArPSBkYXNoZXJpemUoa2V5KSArICc6JyArIG1heWJlQWRkUHgoa2V5LCBwcm9wZXJ0eVtrZXldKSArICc7J1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7IHRoaXMuc3R5bGUuY3NzVGV4dCArPSAnOycgKyBjc3MgfSlcbiAgICB9LFxuICAgIGluZGV4OiBmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgIHJldHVybiBlbGVtZW50ID8gdGhpcy5pbmRleE9mKCQoZWxlbWVudClbMF0pIDogdGhpcy5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4T2YodGhpc1swXSlcbiAgICB9LFxuICAgIGhhc0NsYXNzOiBmdW5jdGlvbihuYW1lKXtcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuIGZhbHNlXG4gICAgICByZXR1cm4gZW1wdHlBcnJheS5zb21lLmNhbGwodGhpcywgZnVuY3Rpb24oZWwpe1xuICAgICAgICByZXR1cm4gdGhpcy50ZXN0KGNsYXNzTmFtZShlbCkpXG4gICAgICB9LCBjbGFzc1JFKG5hbWUpKVxuICAgIH0sXG4gICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKG5hbWUpe1xuICAgICAgaWYgKCFuYW1lKSByZXR1cm4gdGhpc1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpZHgpe1xuICAgICAgICBpZiAoISgnY2xhc3NOYW1lJyBpbiB0aGlzKSkgcmV0dXJuXG4gICAgICAgIGNsYXNzTGlzdCA9IFtdXG4gICAgICAgIHZhciBjbHMgPSBjbGFzc05hbWUodGhpcyksIG5ld05hbWUgPSBmdW5jQXJnKHRoaXMsIG5hbWUsIGlkeCwgY2xzKVxuICAgICAgICBuZXdOYW1lLnNwbGl0KC9cXHMrL2cpLmZvckVhY2goZnVuY3Rpb24oa2xhc3Mpe1xuICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcyhrbGFzcykpIGNsYXNzTGlzdC5wdXNoKGtsYXNzKVxuICAgICAgICB9LCB0aGlzKVxuICAgICAgICBjbGFzc0xpc3QubGVuZ3RoICYmIGNsYXNzTmFtZSh0aGlzLCBjbHMgKyAoY2xzID8gXCIgXCIgOiBcIlwiKSArIGNsYXNzTGlzdC5qb2luKFwiIFwiKSlcbiAgICAgIH0pXG4gICAgfSxcbiAgICByZW1vdmVDbGFzczogZnVuY3Rpb24obmFtZSl7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgIGlmICghKCdjbGFzc05hbWUnIGluIHRoaXMpKSByZXR1cm5cbiAgICAgICAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGNsYXNzTmFtZSh0aGlzLCAnJylcbiAgICAgICAgY2xhc3NMaXN0ID0gY2xhc3NOYW1lKHRoaXMpXG4gICAgICAgIGZ1bmNBcmcodGhpcywgbmFtZSwgaWR4LCBjbGFzc0xpc3QpLnNwbGl0KC9cXHMrL2cpLmZvckVhY2goZnVuY3Rpb24oa2xhc3Mpe1xuICAgICAgICAgIGNsYXNzTGlzdCA9IGNsYXNzTGlzdC5yZXBsYWNlKGNsYXNzUkUoa2xhc3MpLCBcIiBcIilcbiAgICAgICAgfSlcbiAgICAgICAgY2xhc3NOYW1lKHRoaXMsIGNsYXNzTGlzdC50cmltKCkpXG4gICAgICB9KVxuICAgIH0sXG4gICAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKG5hbWUsIHdoZW4pe1xuICAgICAgaWYgKCFuYW1lKSByZXR1cm4gdGhpc1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpZHgpe1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBuYW1lcyA9IGZ1bmNBcmcodGhpcywgbmFtZSwgaWR4LCBjbGFzc05hbWUodGhpcykpXG4gICAgICAgIG5hbWVzLnNwbGl0KC9cXHMrL2cpLmZvckVhY2goZnVuY3Rpb24oa2xhc3Mpe1xuICAgICAgICAgICh3aGVuID09PSB1bmRlZmluZWQgPyAhJHRoaXMuaGFzQ2xhc3Moa2xhc3MpIDogd2hlbikgP1xuICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3Moa2xhc3MpIDogJHRoaXMucmVtb3ZlQ2xhc3Moa2xhc3MpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG4gICAgc2Nyb2xsVG9wOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm5cbiAgICAgIHZhciBoYXNTY3JvbGxUb3AgPSAnc2Nyb2xsVG9wJyBpbiB0aGlzWzBdXG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGhhc1Njcm9sbFRvcCA/IHRoaXNbMF0uc2Nyb2xsVG9wIDogdGhpc1swXS5wYWdlWU9mZnNldFxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChoYXNTY3JvbGxUb3AgP1xuICAgICAgICBmdW5jdGlvbigpeyB0aGlzLnNjcm9sbFRvcCA9IHZhbHVlIH0gOlxuICAgICAgICBmdW5jdGlvbigpeyB0aGlzLnNjcm9sbFRvKHRoaXMuc2Nyb2xsWCwgdmFsdWUpIH0pXG4gICAgfSxcbiAgICBzY3JvbGxMZWZ0OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm5cbiAgICAgIHZhciBoYXNTY3JvbGxMZWZ0ID0gJ3Njcm9sbExlZnQnIGluIHRoaXNbMF1cbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gaGFzU2Nyb2xsTGVmdCA/IHRoaXNbMF0uc2Nyb2xsTGVmdCA6IHRoaXNbMF0ucGFnZVhPZmZzZXRcbiAgICAgIHJldHVybiB0aGlzLmVhY2goaGFzU2Nyb2xsTGVmdCA/XG4gICAgICAgIGZ1bmN0aW9uKCl7IHRoaXMuc2Nyb2xsTGVmdCA9IHZhbHVlIH0gOlxuICAgICAgICBmdW5jdGlvbigpeyB0aGlzLnNjcm9sbFRvKHZhbHVlLCB0aGlzLnNjcm9sbFkpIH0pXG4gICAgfSxcbiAgICBwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm5cblxuICAgICAgdmFyIGVsZW0gPSB0aGlzWzBdLFxuICAgICAgICAvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuICAgICAgICBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCgpLFxuICAgICAgICAvLyBHZXQgY29ycmVjdCBvZmZzZXRzXG4gICAgICAgIG9mZnNldCAgICAgICA9IHRoaXMub2Zmc2V0KCksXG4gICAgICAgIHBhcmVudE9mZnNldCA9IHJvb3ROb2RlUkUudGVzdChvZmZzZXRQYXJlbnRbMF0ubm9kZU5hbWUpID8geyB0b3A6IDAsIGxlZnQ6IDAgfSA6IG9mZnNldFBhcmVudC5vZmZzZXQoKVxuXG4gICAgICAvLyBTdWJ0cmFjdCBlbGVtZW50IG1hcmdpbnNcbiAgICAgIC8vIG5vdGU6IHdoZW4gYW4gZWxlbWVudCBoYXMgbWFyZ2luOiBhdXRvIHRoZSBvZmZzZXRMZWZ0IGFuZCBtYXJnaW5MZWZ0XG4gICAgICAvLyBhcmUgdGhlIHNhbWUgaW4gU2FmYXJpIGNhdXNpbmcgb2Zmc2V0LmxlZnQgdG8gaW5jb3JyZWN0bHkgYmUgMFxuICAgICAgb2Zmc2V0LnRvcCAgLT0gcGFyc2VGbG9hdCggJChlbGVtKS5jc3MoJ21hcmdpbi10b3AnKSApIHx8IDBcbiAgICAgIG9mZnNldC5sZWZ0IC09IHBhcnNlRmxvYXQoICQoZWxlbSkuY3NzKCdtYXJnaW4tbGVmdCcpICkgfHwgMFxuXG4gICAgICAvLyBBZGQgb2Zmc2V0UGFyZW50IGJvcmRlcnNcbiAgICAgIHBhcmVudE9mZnNldC50b3AgICs9IHBhcnNlRmxvYXQoICQob2Zmc2V0UGFyZW50WzBdKS5jc3MoJ2JvcmRlci10b3Atd2lkdGgnKSApIHx8IDBcbiAgICAgIHBhcmVudE9mZnNldC5sZWZ0ICs9IHBhcnNlRmxvYXQoICQob2Zmc2V0UGFyZW50WzBdKS5jc3MoJ2JvcmRlci1sZWZ0LXdpZHRoJykgKSB8fCAwXG5cbiAgICAgIC8vIFN1YnRyYWN0IHRoZSB0d28gb2Zmc2V0c1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiAgb2Zmc2V0LnRvcCAgLSBwYXJlbnRPZmZzZXQudG9wLFxuICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0XG4gICAgICB9XG4gICAgfSxcbiAgICBvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCB8fCBkb2N1bWVudC5ib2R5XG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgIXJvb3ROb2RlUkUudGVzdChwYXJlbnQubm9kZU5hbWUpICYmICQocGFyZW50KS5jc3MoXCJwb3NpdGlvblwiKSA9PSBcInN0YXRpY1wiKVxuICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5vZmZzZXRQYXJlbnRcbiAgICAgICAgcmV0dXJuIHBhcmVudFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBmb3Igbm93XG4gICQuZm4uZGV0YWNoID0gJC5mbi5yZW1vdmVcblxuICAvLyBHZW5lcmF0ZSB0aGUgYHdpZHRoYCBhbmQgYGhlaWdodGAgZnVuY3Rpb25zXG4gIDtbJ3dpZHRoJywgJ2hlaWdodCddLmZvckVhY2goZnVuY3Rpb24oZGltZW5zaW9uKXtcbiAgICB2YXIgZGltZW5zaW9uUHJvcGVydHkgPVxuICAgICAgZGltZW5zaW9uLnJlcGxhY2UoLy4vLCBmdW5jdGlvbihtKXsgcmV0dXJuIG1bMF0udG9VcHBlckNhc2UoKSB9KVxuXG4gICAgJC5mbltkaW1lbnNpb25dID0gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgdmFyIG9mZnNldCwgZWwgPSB0aGlzWzBdXG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGlzV2luZG93KGVsKSA/IGVsWydpbm5lcicgKyBkaW1lbnNpb25Qcm9wZXJ0eV0gOlxuICAgICAgICBpc0RvY3VtZW50KGVsKSA/IGVsLmRvY3VtZW50RWxlbWVudFsnc2Nyb2xsJyArIGRpbWVuc2lvblByb3BlcnR5XSA6XG4gICAgICAgIChvZmZzZXQgPSB0aGlzLm9mZnNldCgpKSAmJiBvZmZzZXRbZGltZW5zaW9uXVxuICAgICAgZWxzZSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgIGVsID0gJCh0aGlzKVxuICAgICAgICBlbC5jc3MoZGltZW5zaW9uLCBmdW5jQXJnKHRoaXMsIHZhbHVlLCBpZHgsIGVsW2RpbWVuc2lvbl0oKSkpXG4gICAgICB9KVxuICAgIH1cbiAgfSlcblxuICBmdW5jdGlvbiB0cmF2ZXJzZU5vZGUobm9kZSwgZnVuKSB7XG4gICAgZnVuKG5vZGUpXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKylcbiAgICAgIHRyYXZlcnNlTm9kZShub2RlLmNoaWxkTm9kZXNbaV0sIGZ1bilcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHRoZSBgYWZ0ZXJgLCBgcHJlcGVuZGAsIGBiZWZvcmVgLCBgYXBwZW5kYCxcbiAgLy8gYGluc2VydEFmdGVyYCwgYGluc2VydEJlZm9yZWAsIGBhcHBlbmRUb2AsIGFuZCBgcHJlcGVuZFRvYCBtZXRob2RzLlxuICBhZGphY2VuY3lPcGVyYXRvcnMuZm9yRWFjaChmdW5jdGlvbihvcGVyYXRvciwgb3BlcmF0b3JJbmRleCkge1xuICAgIHZhciBpbnNpZGUgPSBvcGVyYXRvckluZGV4ICUgMiAvLz0+IHByZXBlbmQsIGFwcGVuZFxuXG4gICAgJC5mbltvcGVyYXRvcl0gPSBmdW5jdGlvbigpe1xuICAgICAgLy8gYXJndW1lbnRzIGNhbiBiZSBub2RlcywgYXJyYXlzIG9mIG5vZGVzLCBaZXB0byBvYmplY3RzIGFuZCBIVE1MIHN0cmluZ3NcbiAgICAgIHZhciBhcmdUeXBlLCBub2RlcyA9ICQubWFwKGFyZ3VtZW50cywgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICB2YXIgYXJyID0gW11cbiAgICAgICAgICAgIGFyZ1R5cGUgPSB0eXBlKGFyZylcbiAgICAgICAgICAgIGlmIChhcmdUeXBlID09IFwiYXJyYXlcIikge1xuICAgICAgICAgICAgICBhcmcuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIGlmIChlbC5ub2RlVHlwZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gYXJyLnB1c2goZWwpXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJC56ZXB0by5pc1ooZWwpKSByZXR1cm4gYXJyID0gYXJyLmNvbmNhdChlbC5nZXQoKSlcbiAgICAgICAgICAgICAgICBhcnIgPSBhcnIuY29uY2F0KHplcHRvLmZyYWdtZW50KGVsKSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgcmV0dXJuIGFyclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFyZ1R5cGUgPT0gXCJvYmplY3RcIiB8fCBhcmcgPT0gbnVsbCA/XG4gICAgICAgICAgICAgIGFyZyA6IHplcHRvLmZyYWdtZW50KGFyZylcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBwYXJlbnQsIGNvcHlCeUNsb25lID0gdGhpcy5sZW5ndGggPiAxXG4gICAgICBpZiAobm9kZXMubGVuZ3RoIDwgMSkgcmV0dXJuIHRoaXNcblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihfLCB0YXJnZXQpe1xuICAgICAgICBwYXJlbnQgPSBpbnNpZGUgPyB0YXJnZXQgOiB0YXJnZXQucGFyZW50Tm9kZVxuXG4gICAgICAgIC8vIGNvbnZlcnQgYWxsIG1ldGhvZHMgdG8gYSBcImJlZm9yZVwiIG9wZXJhdGlvblxuICAgICAgICB0YXJnZXQgPSBvcGVyYXRvckluZGV4ID09IDAgPyB0YXJnZXQubmV4dFNpYmxpbmcgOlxuICAgICAgICAgICAgICAgICBvcGVyYXRvckluZGV4ID09IDEgPyB0YXJnZXQuZmlyc3RDaGlsZCA6XG4gICAgICAgICAgICAgICAgIG9wZXJhdG9ySW5kZXggPT0gMiA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgIG51bGxcblxuICAgICAgICB2YXIgcGFyZW50SW5Eb2N1bWVudCA9ICQuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBwYXJlbnQpXG5cbiAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKXtcbiAgICAgICAgICBpZiAoY29weUJ5Q2xvbmUpIG5vZGUgPSBub2RlLmNsb25lTm9kZSh0cnVlKVxuICAgICAgICAgIGVsc2UgaWYgKCFwYXJlbnQpIHJldHVybiAkKG5vZGUpLnJlbW92ZSgpXG5cbiAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHRhcmdldClcbiAgICAgICAgICBpZiAocGFyZW50SW5Eb2N1bWVudCkgdHJhdmVyc2VOb2RlKG5vZGUsIGZ1bmN0aW9uKGVsKXtcbiAgICAgICAgICAgIGlmIChlbC5ub2RlTmFtZSAhPSBudWxsICYmIGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdTQ1JJUFQnICYmXG4gICAgICAgICAgICAgICAoIWVsLnR5cGUgfHwgZWwudHlwZSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpICYmICFlbC5zcmMpe1xuICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWwub3duZXJEb2N1bWVudCA/IGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgOiB3aW5kb3dcbiAgICAgICAgICAgICAgdGFyZ2V0WydldmFsJ10uY2FsbCh0YXJnZXQsIGVsLmlubmVySFRNTClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBhZnRlciAgICA9PiBpbnNlcnRBZnRlclxuICAgIC8vIHByZXBlbmQgID0+IHByZXBlbmRUb1xuICAgIC8vIGJlZm9yZSAgID0+IGluc2VydEJlZm9yZVxuICAgIC8vIGFwcGVuZCAgID0+IGFwcGVuZFRvXG4gICAgJC5mbltpbnNpZGUgPyBvcGVyYXRvcisnVG8nIDogJ2luc2VydCcrKG9wZXJhdG9ySW5kZXggPyAnQmVmb3JlJyA6ICdBZnRlcicpXSA9IGZ1bmN0aW9uKGh0bWwpe1xuICAgICAgJChodG1sKVtvcGVyYXRvcl0odGhpcylcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICB9KVxuXG4gIHplcHRvLloucHJvdG90eXBlID0gWi5wcm90b3R5cGUgPSAkLmZuXG5cbiAgLy8gRXhwb3J0IGludGVybmFsIEFQSSBmdW5jdGlvbnMgaW4gdGhlIGAkLnplcHRvYCBuYW1lc3BhY2VcbiAgemVwdG8udW5pcSA9IHVuaXFcbiAgemVwdG8uZGVzZXJpYWxpemVWYWx1ZSA9IGRlc2VyaWFsaXplVmFsdWVcbiAgJC56ZXB0byA9IHplcHRvXG5cbiAgcmV0dXJuICRcbn0pKClcblxubW9kdWxlLmV4cG9ydHMgPSBaZXB0bztcbiJdfQ==\n"]}